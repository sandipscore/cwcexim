@model CwcExim.Areas.Import.Models.SealCuttingV2


<div class="row">
    <div class="col-md-12">
        <div class="Head_h4">
            <div class="row">
                <div class="col-md-12">
                    <h4>Seal Cutting</h4>
                </div>
            </div>
            @Html.HiddenFor(m => m.lstPostPaymentChrgBreakup)
            @Html.HiddenFor(m => m.lstPostPaymentChrgAmt)
            @Html.HiddenFor(m => m.lstPostPaymentChrg)
            @Html.HiddenFor(m => m.lstPostPaymentChrgBreakupAmt, new { @value = "0" })
            @Html.HiddenFor(m => m.InvoiceAmt)
            @Html.HiddenFor(m => m.TotalTaxable)
            @Html.HiddenFor(m => m.TotalCGST)
            @Html.HiddenFor(m => m.TotalSGST)
            @Html.HiddenFor(m => m.TotalIGST)

            <div class="content_wrp">
                <div class="row Form_Space_top">
                    <div class="col-md-3">
                        <div class="form-group">
                            @Html.HiddenFor(m => m.SealCuttingId, new { @value = "0" })
                            @Html.LabelFor(m => m.SealCuttingNo, new { @class = "InputLabel" }):
                            @Html.TextBoxFor(m => m.SealCuttingNo, new { @readonly = true })
                        </div>
                    </div>

                    <div class="col-md-3 col-md-offset-1-5">
                        <div class="form-group">
                            @Html.LabelFor(m => m.TransactionDate, new { @class = "InputLabel" }):
                            <div class="position-relative Date_Img">
                                @Html.TextBoxFor(m => m.TransactionDate, new { @readonly = true})
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3 col-md-offset-1-5">
                        <div class="form-group">
                            <label>Container / CBT No :</label>
                            <div class="position-relative">
                                @Html.HiddenFor(m => m.ContainerId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.ContainerNo, new { @readonly = true })
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row Form_Space_top">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Size:</label>
                            @Html.TextBoxFor(m => m.size, new { @readonly = true })
                        </div>
                    </div>

                    <div class="col-md-3 col-md-offset-1-5">
                        <div class="form-group">
                            @Html.LabelFor(m => m.GateInDate, new { @class = "InputLabel" }):
                            <div class="position-relative Date_Img">
                                @Html.TextBoxFor(m => m.GateInDate, new { @class = "InputLabel", @readonly = true })
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3 col-md-offset-1-5">
                        <div class="form-group">
                            @Html.LabelFor(m => m.CFSCode, new { @class = "InputLabel" }):
                            @Html.TextBoxFor(m => m.CFSCode, new { @readonly = true })
                        </div>
                    </div>
                </div>
                
                <div class="row Form_Space_top">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>LCL/FCL:</label>
                            @Html.TextBoxFor(m => m.LCLFCL, new { @readonly = true })
                        </div>
                    </div>

                    <div class="col-md-3 col-md-offset-6">
                        <div class="form-group">
                            @Html.LabelFor(m => m.CustomSealNo, new { @class = "InputLabel" }):
                            @Html.HiddenFor(m => m.CustomSealId, new { @value = "0" })
                            @Html.TextBoxFor(m => m.CustomSealNo, new { })
                        </div>
                    </div>
                </div>
                
                <div class="row Form_Space_top">
                    <div class="col-md-3">
                        <div class="form-group">
                            @Html.LabelFor(m => m.GodownNo, new { @class = "InputLabel" }):
                            <div class="position-relative">
                                @Html.HiddenFor(m => m.GodownId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.GodownNo, new {@readonly = true })                               
                            </div>
                        </div>
                    </div>
                </div>

                <div class="Form_Space_top"></div>

                <div class="Head_h5">
                    <div class="row">
                        <div class="col-md-12">
                            <h5>Payment Information (For LCL)</h5>
                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="col-md-12">
                            <div class="form-group">
                                @Html.LabelFor(m => m.CHAShippingLine, new { @class = "InputLabel" }):
                                @Html.HiddenFor(m => m.CHAShippingLineId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.CHAShippingLine, new { @readOnly = true })
                            </div>
                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>SD Details : Folio No.:</label>
                                @Html.TextBoxFor(m => m.FolioNo, new { @readonly = true })
                            </div>
                        </div>

                        <div class="col-md-3 col-md-offset-6">
                            <div class="form-group">
                                @Html.LabelFor(m => m.Balance, new { @class = "InputLabel" }):
                                @Html.TextBoxFor(m => m.Balance, new { @readOnly = true })
                            </div>
                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="col-md-3">
                            <div class="form-group">
                                @Html.LabelFor(m => m.InvoiceNo, new { @class = "InputLabel" }):
                                @Html.TextBoxFor(m => m.InvoiceNo, new { @readOnly = true })
                                @Html.ValidationMessageFor(m => m.InvoiceNo)
                            </div>
                        </div>
                    </div>

                    <div class="Head_h5">
                        <div class="row">
                            <div class="col-md-12">
                                <h5>Charges</h5>
                            </div>
                        </div>
                        <div class="row Form_Space_top">
                            <div class="col-md-12">
                                <table id="tblCWCCharges" class="table table-bordered table-striped dataTable Table_center">
                                    <thead>
                                        <tr>
                                            <th rowspan="2">Charges</th>
                                            <th rowspan="2">Value</th>
                                            <th colspan="2" class="text-center">IGST</th>
                                            <th colspan="2" class="text-center">CGST</th>
                                            <th colspan="2" class="text-center">SGST</th>
                                            <th rowspan="2" style="width:15%;">Total</th>
                                        </tr>
                                        <tr>
                                            <th>%</th>
                                            <th>Amt</th>
                                            <th>%</th>
                                            <th>Amt</th>
                                            <th>%</th>
                                            <th style="border-right:1px solid #ddd;">Amt</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>


                        <div class="row Form_Space_top">
                            <div class="col-md-12">
                                <h5>Total</h5>
                            </div>
                        </div>
                        <div class="row Form_Space_top">
                            <div class="form-group Form_Input">
                                <div class="col-md-offset-8 col_cus_offset_7 col_cus_2 col-md-1-5">
                                    <label>Total Value:</label>
                                </div>
                                <div class="col-md-2-5 col_cus_3">
                                    @Html.TextBox("AllTotal", "0", new { @readonly = true, @style = "text-align:right;" })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="Form_Space_top"></div>

                <div class="Head_h5">
                    <div class="row">
                        <div class="col-md-12">
                            <h5>OBL/HBL Details</h5>
                        </div>
                    </div>
                    <div class="row">
                        <div class="Form_Space_top"></div>
                        <div class="col-md-12" id="DivOBLList">
                            <table class="table table-bordered table-hover dataTable Table_center" id="tblOBLList">
                                <thead>
                                    <tr>
                                        <th class="text-center">@Html.DisplayName("SL No")</th>
                                        <th>OBL/HBL No.</th>
                                        <th>OBL/HBL Date</th>
                                        <th>Cargo Type</th>
                                        <th>No Of Package</th>
                                        <th>Gross Wt.</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        var Serial = 1;
                                        if (Model.lstObldt != null)
                                        {
                                            foreach (var item in Model.lstObldt)
                                            {
                                                <tr>
                                                    <td class="text-center">@Serial</td>
                                                    <td class="text-center">@item.BLNo</td>
                                                    <td class="text-center">@item.BLDate</td>
                                                    <td class="text-center">@item.CargoType</td>
                                                    <td class="text-center">@item.NO_PKG</td>
                                                    <td class="text-center">@item.GR_WT</td>
                                                </tr>
                                                Serial++;
                                            }
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                        <div class="Form_Space_top"></div>
                    </div>
                </div>

                <div class="row">
                    <div class="stoke SignUp_space_bottom2 SignUp_space_top2"></div>
                </div>

                <div class="d-flex justify-content-left">
                    <input type="submit" id="btnBack" class="btn btn-primary btn-100px" value="Back">
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        populateCharges();
    });
    $('#btnBack').on("click", function () {

        $('#DivBody').load('/Import/Ppg_CWCImportV2/AddSealCuting');
    });
    function populateCharges() {
        debugger;
        var lstPostPaymentChrg = [];

        $('#AllTotal').val($('#InvoiceAmt').val());
        var rawJson = [];
        var dada = $('#lstPostPaymentChrgAmt').val();
        if (dada != '') {
            rawJson = JSON.parse($('#lstPostPaymentChrgAmt').val());
        }


        var html = '';
        $.each(rawJson, function (i, item) {

            // tmat = tamt + item.Amount.toFixed(2);
            html += '<tr><td>' + item.Clause + '. ' + item.ChargeName + '</td>'
                    + '<td class="Table_right"><input id="' + item.ChargeId + '" type="text"  value="' + item.Taxable.toFixed(2) + '" readonly/></td>'
                    + '<td class="Table_right"><input id="IGSTP' + item.ChargeId + '" type="text" value="' + item.IGSTPer + '" readonly /></td>'
                    + '<td class="Table_right"><input id="IGSTA' + item.ChargeId + '" type="text" value="' + item.IGSTAmt.toFixed(2) + '" readonly /></td>'
                    + '<td class="Table_right"><input id="CGSTP' + item.ChargeId + '" type="text" value="' + item.CGSTPer + '"  readonly /></td>'
                    + '<td class="Table_right"><input id="CGSTA' + item.ChargeId + '" type="text" value="' + item.CGSTAmt.toFixed(2) + '" readonly /></td>'
                    + '<td class="Table_right"><input id="SGSTP' + item.ChargeId + '" type="text" value="' + item.SGSTPer + '"  readonly /></td>'
                    + '<td class="Table_right"><input id="SGSTA' + item.ChargeId + '" type="text" value="' + item.SGSTAmt.toFixed(2) + '" readonly /></td>'
                    + '<td class="Table_right"><input id="TOT' + item.ChargeId + '" type="text" value="' + item.Total.toFixed(2) + '" readonly /></td></tr>';
        });
        $('#tblCWCCharges tbody').html(html);
    }
</script>
