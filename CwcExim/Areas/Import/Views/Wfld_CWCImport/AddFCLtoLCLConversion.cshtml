@model CwcExim.Areas.Import.Models.WFLDFCLtoLCLConversion
<style>
    #tbleSline.dataTable tbody > tr > td {
        cursor: pointer;
    }
    .slimScrollDiv {
        height: 300px;
    }
    .table.tblhd {
        border-bottom: 0;
    }
</style>
@using (Ajax.BeginForm("AddFCLtoLCLConversion", "Wfld_CWCImport", new AjaxOptions { HttpMethod = "POST", OnSuccess = "SealCuttingOnSuccess", OnFailure = "SealCuttingeOnFailure" }))
{
    @Html.AntiForgeryToken()
    @Html.Hidden("PaymentSheetModelJson")
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-offset-0-5 col-md-11">
                <div class="Head_h4">
                    <div class="row">
                        <div class="col-md-12">
                            <h4>Add FCL To LCL Conversion</h4>
                            <input type="hidden" id="ViewContainerList" name="ContainerList" value="" />
                            @if (ViewBag.RightsList != null)
                            {
                                <input type="hidden" id="hdnRights" value="@ViewBag.RightsList" />
                            }
                            else
                            {
                                <input type="hidden" id="hdnRights" value="" />
                            }
                        </div>
                    </div>
                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2">
                                <label class="InputLabel" for="ContainerNo">Container / CBT No. :</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.HiddenFor(m => m.FCLtoLCLConversionId, new { @value = "0" })
                                @Html.HiddenFor(m => m.ContainerId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.ContainerNo, new { @class = "form-control input-sm", @readonly = true })
                                <span class="search" id="ContainerSearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#ContainerModal"></i></span>
                                @*@Html.ValidationMessageFor(m => m.ShippingLineName)*@
                            </div>
                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                @Html.LabelFor(m => m.CFSCode, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBoxFor(m => m.CFSCode, new { @class = "form-control input-sm", @readonly = true })
                                @Html.ValidationMessageFor(m => m.CFSCode)
                            </div>
                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                @Html.LabelFor(m => m.Size, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBoxFor(m => m.Size, new { @class = "form-control input-sm", @readonly = true })
                                @*@Html.ValidationMessageFor(m => m.VesselName)*@
                            </div>
                            <div class="col-md-offset-0-5 col-md-1-5 col_cus_2 padding_rt">
                                @Html.LabelFor(m => m.GateInDate, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2 col_cus_2 Date_Img">
                                @*@Html.TextBox("GateInDate", "", new { @class = "form-control input-sm", placeholder = "dd/mm/yyyy", @readonly = true, @onfocus = "hideMsg(this);" })*@
                                @Html.TextBoxFor(m => m.GateInDate, new { @class = "InputLabel", @readonly = true })
                                @*@Html.ValidationMessageFor(m => m.VesselName)*@
                            </div>
                            <div class="col-md-offset-0-5 col-md-1-5 col_cus_2 padding_rt"><label class="InputLabel">SLA :</label></div>
                            <div class="col-md-2">
                                @Html.HiddenFor(m => m.SALId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.SAL, new { @class = "form-control input-sm", @readOnly = true })
                                <span class="search" id="SLASearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#SLAModal"></i></span>
                                @*@Html.ValidationMessageFor(m => m.PortCharge)*@
                            </div>
                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2">Cargo Type<span class="LabelColon">:</span></div>
                            <div class="col-md-2-5 col_cus_2_5">
                                @Html.DropDownListFor(m => m.ContainerClassId, new List<SelectListItem>
                                {
                                new SelectListItem { Text="Haz",Value="1"},
                                new SelectListItem { Text="Non-Haz",Value="2"},
                                }, "----Select----", new { @class = "form-control input-sm" })
                            </div>
                            <div class="col-md-offset-0-5 col-md-1-5 col_cus_2">
                                @Html.LabelFor(m => m.OldOBLType, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2 col_cus_2_5">
                                @Html.DropDownListFor(m => m.OldOBLType, new List<SelectListItem>
                                {
                                new SelectListItem { Text="FCL",Value="FCL",Selected=true},
                                }, "----Select----", new { @class = "form-control input-sm", @disabled = true })
                            </div>
                            <div class="col-md-offset-0-5 col-md-1-5 col_cus_2">
                                @Html.LabelFor(m => m.NewOBLType, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2 col_cus_2">
                                @Html.DropDownListFor(m => m.NewOBLType, new List<SelectListItem>
                                {
                                new SelectListItem { Text="LCL",Value="LCL",Selected=true},
                                }, "----Select----", new { @class = "form-control input-sm", @disabled = true })
                            </div>
                        </div>
                    </div>
                </div>

                <div class="Form_Space_top"></div>

                <div class="Head_h4">
                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                @Html.LabelFor(m => m.PartyPdaCode, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2-5">
                                @Html.HiddenFor(m => m.PartyPdaId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.PartyPdaCode, new { @class = "form-control input-sm", @readOnly = true })
                                <span class="search" id="CHAShippingLineSearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#CHAShippingLineModal"></i></span>
                                @*@Html.ValidationMessageFor(m => m.PortCharge)*@
                            </div>
                        </div>
                    </div>
                    @*<div class="row Form_Space_top">
                            <div class="form-group Form_Input">
                                <div class="col-md-1-5 col_cus_2 padding_rt">
                                    <label> DSTF Charge:</label>
                                </div>
                                <div class="col-md-2-5">
                                    @Html.TextBoxFor(m => m.DSTFCharge, new { @class = "form-control input-sm" })
                                    @Html.ValidationMessageFor(m => m.DSTFCharge)
                                </div>

                                <div class="col-md-1 col_cus_2">
                                    @Html.LabelFor(m => m.AmmendCharge, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-2-5">
                                    @Html.TextBoxFor(m => m.AmmendCharge, new { @class = "form-control input-sm" })
                                    @Html.ValidationMessageFor(m => m.AmmendCharge)
                                </div>
                            </div>
                        </div>
                        <div class="row Form_Space_top">
                            <div class="form-group Form_Input">

                                <div class="clearfix"></div>
                                <div class="Form_Space_top"></div>
                                <div class="col-md-1-5 col_cus_2">
                                    @Html.LabelFor(m => m.CGSTCharge, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                    @Html.HiddenFor(m => m.IGSTPer, new { @value = "0" })
                                    @Html.HiddenFor(m => m.CGSTPer, new { @value = "0" })
                                    @Html.HiddenFor(m => m.SGSTPer, new { @value = "0" })

                                    @Html.HiddenFor(m => m.DSTFOperationId, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFChargeType, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFCharge, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFIGSTPer, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFCGSTPer, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFSGSTPer, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFIGSTCharge, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFCGSTCharge, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFSGSTCharge, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFAmount, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFTaxable, new { @value = "0" })
                                    @Html.HiddenFor(m => m.DSTFTotalAmount, new { @value = "0" })

                                    @Html.HiddenFor(m => m.AmmendOperationId, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendChargeType, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendCharge, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendIGSTPer, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendCGSTPer, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendSGSTPer, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendIGSTCharge, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendCGSTCharge, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendSGSTCharge, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendAmount, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendTaxable, new { @value = "0" })
                                    @Html.HiddenFor(m => m.AmmendTotalAmount, new { @value = "0" })

                                </div>
                                <div class="col-md-2-5">
                                    @Html.TextBoxFor(m => m.CGSTCharge, new { @class = "form-control input-sm" })
                                    @Html.ValidationMessageFor(m => m.CGSTCharge)
                                </div>

                                <div class="col-md-1 col_cus_2">
                                    @Html.LabelFor(m => m.SGSTCharge, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-1-5">
                                    @Html.TextBoxFor(m => m.SGSTCharge, new { @class = "form-control input-sm" })
                                    @Html.ValidationMessageFor(m => m.SGSTCharge)
                                </div>

                                <div class="col-md-1 col_cus_2">
                                    @Html.LabelFor(m => m.IGSTCharge, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-1-5">
                                    @Html.TextBoxFor(m => m.IGSTCharge, new { @class = "form-control input-sm" })
                                    @Html.ValidationMessageFor(m => m.IGSTCharge)
                                </div>

                                <div class="col-md-1-5 col_cus_2">
                                    @Html.LabelFor(m => m.TotalAmount, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-1-5">
                                    @Html.TextBoxFor(m => m.TotalAmount, new { @class = "form-control input-sm" })
                                    @Html.ValidationMessageFor(m => m.TotalAmount)
                                </div>
                                <div class="clearfix"></div>
                                <div class="Form_Space_top"></div>

                            </div>
                        </div>*@

                    <div class="Head_h5">
                        <div class="row">
                            <div class="col-md-12">
                                <h5>Charges</h5>
                            </div>
                        </div>
                        <div class="row Form_Space_top">
                            <div class="col-md-12">
                                <table id="tblCWCCharges" class="table table-bordered table-striped dataTable Table_center">
                                    <thead>
                                        <tr>
                                            <th rowspan="2">Charges</th>
                                            <th rowspan="2">Value</th>
                                            <th colspan="2" class="text-center">IGST</th>
                                            <th colspan="2" class="text-center">CGST</th>
                                            <th colspan="2" class="text-center">SGST</th>
                                            <th rowspan="2" style="width:15%;">Total</th>
                                        </tr>
                                        <tr>
                                            <th>%</th>
                                            <th>Amt</th>
                                            <th>%</th>
                                            <th>Amt</th>
                                            <th>%</th>
                                            <th style="border-right:1px solid #ddd;">Amt</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            @Html.HiddenFor(m => m.DSTFOperationId, new { @value = "0" })
                                            @Html.HiddenFor(m => m.DSTFChargeType, new { @value = "0" })
                                            @Html.HiddenFor(m => m.DSTFSACCode, new { @value = "0" })
                                            <td>@Html.TextBoxFor(m => m.DSTFChargeName, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.DSTFCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.DSTFIGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.DSTFIGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.DSTFCGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.DSTFCGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.DSTFSGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.DSTFSGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.DSTFTotalAmount, new { @class = "form-control input-sm", @readonly = true })</td>
                                        </tr>
                                        <tr>
                                            @Html.HiddenFor(m => m.AmmendOperationId, new { @value = "0" })
                                            @Html.HiddenFor(m => m.AmmendChargeType, new { @value = "0" })
                                            @Html.HiddenFor(m => m.AmmendSACCode, new { @value = "0" })
                                            <td>@Html.TextBoxFor(m => m.AmmendChargeName, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.AmmendCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.AmmendIGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.AmmendIGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.AmmendCGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.AmmendCGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.AmmendSGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.AmmendSGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                            <td>@Html.TextBoxFor(m => m.AmmendTotalAmount, new { @class = "form-control input-sm", @readonly = true })</td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td colspan="8" class="text-right">Total:</td>
                                            <td style="font-weight:bold;color:#ff0000;text-align:right;">
                                                @Html.TextBoxFor(m => m.TotalAmount, new { @class = "form-control input-sm", @readonly = true })
                                            </td>
                                        </tr>
                                        @*<tr>
                                                <td colspan="8" style="text-align:right;">TDS:</td>
                                                <td><input type="text" id="TOTCWCTDS" value="0" onblur="CalcInvoice()"></td>
                                            </tr>*@
                                    </tfoot>
                                </table>
                            </div>
                        </div>

                    </div>
                    <div class="Form_Space_top"></div>
                </div>

                <div class="row">
                    <div class="stoke SignUp_space_bottom2 SignUp_space_top2"></div>
                </div>

                <div class="row">
                    <div class="col-md-offset-4 col-md-2 SignUp_space_bottom">
                        <input type="button" id="btnSave" class="btn log_Btn_sm" value="Save" />
                    </div>
                    <div class="col-md-2">
                        <input type="button" id="btnReset" class="btn log_Btn_sm" value="Reset" onclick="ResetAllFields()" />
                    </div>
                </div>
                <div class="logSuccMsg" id="DivMsg" style="background-color:transparent"></div>
                <div class="row">
                    <div class="col-md-12" id="DivScList">
                    </div>
                </div>


                <div class="row">
                    <div class="col-md-12">
                        <div id="divFormOneList"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="SLAModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content popup_modal">
                <div class="modal-header popup_header">
                    <button type="button" class="close" onclick="LoadCloseEximTrader()"><i class="fa fa-times" aria-hidden="true"></i></button>
                    <h4 class="modal-title">List of SLA</h4>
                </div>
                <div class="modal-body popup_body" style="position:relative;">
                    <input placeholder="Search By SLA Or Party Code" id="ShpngLinebox" type="text" />
                    <span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick="SearchByPartyCode()"></i></span>
                    
                    <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                        <thead>
                            <tr>
                                <th colspan="8" width="80%">Shipping Line Name</th>
                                <th colspan="4" width="20%">Party Code</th>
                            </tr>
                        </thead>
                    </table>
                    <div id="slim_scroll">
                        <table class="table dataTable table-bordered table-striped slim_tble" id="tbleSline">
                            @{
                                if (ViewBag.lstShippingLine != null)
                                {
                                    foreach (var item in ViewBag.lstShippingLine)
                                    {
                                        <tr onclick="SelectShippingLine(@item.ShippingLineId,'@item.ShippingLineName')">
                                            <td colspan="8" width="80%" class="txt_wrp">@item.ShippingLineName</td>
                                            <td colspan="4" width="20%" class="txt_wrp">@item.PartyCode</td>
                                        </tr>
                                    }
                                }
                            }
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-6">
                            @if (ViewBag.State != null && Convert.ToBoolean(ViewBag.State) == true)
                            {
                                <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreEximTrader()" class="btn log_Btn_sm" id="btnLoadMore">Load More Data</button>
                            }
                            else
                            {
                                <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreEximTrader()" class="btn log_Btn_sm" id="btnLoadMore" disabled>Load More Data</button>
                            }
                        </div>
                        <div class="col-md-6">
                            <button type="button" class="btn log_Btn_sm" onclick="LoadCloseEximTrader()" id="btnClose">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="PODModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content popup_modal">
                <div class="modal-header popup_header">
                    <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                    <h4 class="modal-title">List of Port</h4>
                </div>
                <div class="modal-body popup_body">
                    <input placeholder="Search Me" id="PODbox" type="text" />
                    <ul class="navList" id="lstPOD">
                        @if (ViewBag.Godownist != null)
                        {
                            foreach (var item in ViewBag.Godownist)
                            {
                                <li id="@item.GodownId">@item.GodownName</li>
                            }
                        }
                    </ul>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-offset-6 col-md-6">
                            <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="ContainerModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content popup_modal">
                <div class="modal-header popup_header">
                    <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                    <h4 class="modal-title">List of Container / CBT</h4>
                </div>
                <div class="modal-body popup_body">
                    <input placeholder="Search Me" id="Containerbox" type="text" />
                    <ul class="navList" id="lstContainer">
                        @*@if (ViewBag.ContainerList != null)
                            {
                                foreach (var item in ViewBag.ContainerList)
                                {
                                    <li id="@item.ContainerId">@item.ContainerName</li>
                                }
                            }*@
                    </ul>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-offset-6 col-md-6">
                            <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

                <div class="modal fade" id="CHAShippingLineModal" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content popup_modal">
                            <div class="modal-header popup_header">
                                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                <h4 class="modal-title">List of CHA/Shipping Line</h4>
                            </div>
                            <div class="modal-body popup_body">
                                <input placeholder="Search Me" id="CHAShippingLinebox" type="text" />
                                <ul class="navList" id="lstCHAShippingLine">
                                    @*@{
                                            foreach (var item in Model.lstCHA)
                                            {
                                                <li id="@item.CHAId">@item.CHAName</li>
                                            }
                                        }*@
                                </ul>
                            </div>
                            <div class="modal-footer">
                                <div class="row">
                                    <div class="col-md-offset-6 col-md-6">
                                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                            }
@Scripts.Render("~/bundles/jqueryval")
<script type="text/javascript" src="/scripts/jquery.nicescroll.min.js"></script>
<script type="text/javascript">
    $(function () {
        $('#slim_scroll').slimScroll({
            allowPageScroll: true
        });
    });
</script>
<script>
    var TimeInSeconds;
    var ViewContainerList = [];
    var ViewForwarderList = [];
    $(document).ready(function () {
        debugger;
        //FillListByContainer();
        //ResetAllFields();
        GetConversionList();
        TimeInSeconds = 5000;
        $("#TransactionDate").datepicker({
            dateFormat: "dd/mm/yy",
            showOn: "button",
            buttonImage: "/Content/images/calendar.png",
            buttonImageOnly: true,
            buttonText: "Select date",
            changeMonth: true,
            changeYear: true,
            showAnima: "fadein",
            onClose: function () {
                $(".Date_Img .Error_Msg").text("");
                $('[data-valmsg-for="Data"]').html('<span></span>');
            }
        });

        r2 = JSON.parse($("#hdnRights").val());
        if (r2.CanAdd == 0) {
            $('#btnSave').prop('disabled', true);
        }
    });

    $('#btnSave').on('click', function () {
        if (confirm("Are You Sure You Want To Save?")) {
            $('#btnSave').attr('disabled', true);
            $('#btnSave').submit();
        }
    });


    $('#Containerbox').keyup(function () {
        var val = $(this).val().toLowerCase();
        if (val == "")
            $('#lstContainer > li').show();
        else {
            $('#lstContainer > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
            });
        }
    });

    $('#ContainerSearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("ListOfContainerFCLtoLCL", "Wfld_CWCImport", new { Area = "Import" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;
                ViewContainerList = data;
                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.ContainerId + '" " onclick="GetContainerSize(this)">' + item.ContainerNo + '</li>';
                });
                $('#lstContainer').html(html);
            }
        });
        $("#ContainerModal").modal("show");
    });
    function GetContainerSize(elem) {
        $('#ContainerNo').val($(elem).text());
        $('#ContainerId').val($(elem).attr('id'));
        debugger;
        var parties = ViewContainerList; //JSON.parse($('#ViewContainerList').val());
        var payby = $.grep(parties, function (item) { return item.ContainerNo == $('#ContainerNo').val(); })[0];

        $('#Size').val(payby.Size);
        $('#GateInDate').val(payby.GateInDate);
        $('#CFSCode').val(payby.CFSCode);
        $('#ContainerClassId').val(payby.ContainerClassId);
        $('#SAL').val(payby.SAL);
        $('#SALId').val(payby.SALId);
        ResetChargeFields(payby.CFSCode);
        $("#ContainerModal").modal("hide");
    }
    function CalculateFCLtoLCL() {

        var Size = $('#Size').val();
        var PartyPdaId = $('#PartyPdaId').val();
        var ContainerClassId = $('#ContainerClassId').val();
        var CFSCd = $('#CFSCode').val();
        $.ajax({
            url: '/Import/Wfld_CWCImport/GetPartyPdaDetailsForFCLtoLCL',
            type: 'GET',
            data: {
                Size: Size, PartyPdaId: PartyPdaId, ContainerClassId: ContainerClassId, CFSCode: CFSCd
            },
            success: function (data) {
                debugger;
                if (data != null || data != undefined) {
                    debugger;
                    $('#PaymentSheetModelJson').val(JSON.stringify(data));
                    $('#DSTFOperationId').val(data.DSTFOperationId);
                    $('#DSTFChargeType').val(data.DSTFChargeType);
                    $('#DSTFChargeName').val(data.DSTFChargeName);
                    $('#DSTFTaxable').val(data.DSTFTaxable);
                    $('#DSTFCharge').val(data.DSTFCharge);
                    $('#DSTFCGSTCharge').val(data.DSTFCGSTCharge);
                    $('#DSTFSGSTCharge').val(data.DSTFSGSTCharge);
                    $('#DSTFIGSTCharge').val(data.DSTFIGSTCharge);
                    $('#DSTFCGSTPer').val(data.DSTFCGSTPer);
                    $('#DSTFSGSTPer').val(data.DSTFSGSTPer);
                    $('#DSTFIGSTPer').val(data.DSTFIGSTPer);
                    $('#DSTFTotalAmount').val(data.DSTFTotalAmount);
                    $('#DSTFSACCode').val(data.DSTFSACCode);

                    $('#AmmendOperationId').val(data.AmmendOperationId);
                    $('#AmmendChargeType').val(data.AmmendChargeType);
                    $('#AmmendChargeName').val(data.AmmendChargeName);
                    $('#AmmendTaxable').val(data.AmmendTaxable);
                    $('#AmmendCharge').val(data.AmmendCharge);
                    $('#AmmendCGSTCharge').val(data.AmmendCGSTCharge);
                    $('#AmmendSGSTCharge').val(data.AmmendSGSTCharge);
                    $('#AmmendIGSTCharge').val(data.AmmendIGSTCharge);
                    $('#AmmendCGSTPer').val(data.AmmendCGSTPer);
                    $('#AmmendSGSTPer').val(data.AmmendSGSTPer);
                    $('#AmmendIGSTPer').val(data.AmmendIGSTPer);
                    $('#AmmendTotalAmount').val(data.AmmendTotalAmount);
                    $('#AmmendSACCode').val(data.AmmendSACCode);
                    $('#TotalAmount').val(data.DSTFTotalAmount + data.AmmendTotalAmount);
                    var rawJson = JSON.parse($('#PaymentSheetModelJson').val());
                    rawJson.FCLtoLCLConversionId = 0;
                    rawJson.ContainerId = $('#ContainerId').val();
                    rawJson.ContainerNo = $('#ContainerNo').val();
                    rawJson.CFSCode = $('#CFSCode').val();
                    rawJson.Size = $('#Size').val();
                    rawJson.GateInDate = $('#GateInDate').val();
                    rawJson.SALId = $('#SALId').val();

                    rawJson.SAL = $('#SAL').val();
                    rawJson.ContainerClassId = $('#ContainerClassId').val();
                    rawJson.OldOBLType = $('#OldOBLType').val();
                    rawJson.NewOBLType = $('#NewOBLType').val();
                    rawJson.PartyPdaId = $('#PartyPdaId').val();
                    rawJson.PartyPdaCode = $('#PartyPdaCode').val();
                    $('#PaymentSheetModelJson').val(JSON.stringify(rawJson));

                }
            }
        });
    }






    function GetCargo(CFSCD) {

       
        $.ajax({
            url: '/Import/Wfld_CWCImport/GetCargoData',
            type: 'GET',
            data: {
                CFSCode: CFSCD
            },
            success: function (data) {
                debugger;
                $("#ContainerClassId").val(data.DSTFOperationId);
                
                }
            
        });
    }

    function LoadCloseEximTrader() {
        debugger;
        $('#ShpngLinebox').val('');
        $("#SLAModal").modal("hide");
        LoadEximTrader();
    }

    function SearchByPartyCode() {
        debugger;
        if ($('#ShpngLinebox').val() != '') {
            $.ajax({
                url: '/Import/Wfld_CWCImport/SearchByPartyCode',
                type: 'GET',
                data: { PartyCode: $('#ShpngLinebox').val() },
                success: function (data) {
                    if (data.Status == 1) {
                        var html = '';
                        $.each(data.Data.lstShippingLine, function (item, elem) {
                            html += '<tr onclick="SelectShippingLine(' + elem.ShippingLineId + ',&quot;' + elem.ShippingLineName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ShippingLineName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                        });
                        $('#tbleSline tbody').html('');
                        $('#tbleSline tbody').html(html);
                        $('#btnLoadMore').prop('disabled', false);
                        Page = -1;
                    }
                    else {
                        $('#tbleSline tbody').html('');
                        Page = -1;
                        $('#btnLoadMore').prop('disabled', false);
                    }

                }
            });
        }
        else
            LoadEximTrader();
    }

    var Page = 0;
    function LoadMoreEximTrader() {
        debugger;
        $.ajax({
            url: '/Import/Wfld_CWCImport/LoadEximtradeList',
            type: 'GET',
            data: { PartyCode: "", Page: Page + 1 },
            success: function (data) {
                if (data.Status == 1) {
                    debugger;
                    var html = '';
                    $.each(data.Data.lstShippingLine, function (item, elem) {
                        debugger;
                        html += '<tr onclick="SelectShippingLine(' + elem.ShippingLineId + ',&quot;' + elem.ShippingLineName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ShippingLineName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                    });
                    if (Page == -1)
                        $('#tbleSline tbody').html(html);
                    else
                        $('#tbleSline tbody').append(html);
                    Page++;

                    if (data.Data.State == true)
                        $('#btnLoadMore').prop('disabled', false);
                    else $('#btnLoadMore').prop('disabled', true);
                }
            }
        });
    }

    function LoadEximTrader() {
        Page = 0;
        $.ajax({
            url: '/Import/Wfld_CWCImport/LoadEximtradeList',
            type: 'GET',
            data: { PartyCode: "", Page: Page },
            success: function (data) {
                debugger;
                if (data.Status == 1) {
                    debugger;
                    var html = '';
                    $.each(data.Data.lstShippingLine, function (item, elem) {
                        debugger;
                        html += '<tr onclick="SelectShippingLine(' + elem.ShippingLineId + ',&quot;' + elem.ShippingLineName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ShippingLineName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                    });
                    debugger;
                    $('#tbleSline tbody').html(html);

                    if (data.Data.State == true)
                        $('#btnLoadMore').prop('disabled', false);
                    else $('#btnLoadMore').prop('disabled', true);
                }
            }
        });
    }

    function SelectShippingLine(ShippingLineId, ShippingLineName) {
        debugger;
        $('#SAL').val(ShippingLineName);
        $('#SALId').val(ShippingLineId);
        $("#SLAModal").modal("hide");
        $('#ShpngLinebox').val('');
        LoadEximTrader();
    }
    @*$('#SLAbox').keyup(function () {
        var val = $(this).val().toLowerCase();
        if (val == "")
            $('#lstSLA > li').show();
        else {
            $('#lstSLA > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
            });
        }
    });
    $('#SLASearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("GetSLA", "Wfld_CWCImport", new { Area = "Import" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;
                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.SLAId + '" " onclick="GetSLADetail(this)">' + item.SLA + '</li>';
                });
                $('#lstSLA').html(html);
            }
        });
        $("#SLAModal").modal("show");
    @*});
    function GetSLADetail(elem) {
        debugger;
        $('#SAL').val($(elem).text());
        $('#SALId').val($(elem).attr('id'));
        $("#SLAModal").modal("hide");
    }*@

    //$("#Size").on('blur',function () {
    //    ResetChargeFields();
    //});

    $('#ContainerClassId').on("change", function () {
        ResetChargeFields("1");
    });
    function ResetChargeFields(CFSCD) {
        $('#DSTFOperationId').val('');
        $('#DSTFChargeType').val('');
        $('#DSTFChargeName').val('');
        $('#DSTFTaxable').val('');
        $('#DSTFCharge').val('');
        $('#DSTFCGSTCharge').val('');
        $('#DSTFSGSTCharge').val('');
        $('#DSTFIGSTCharge').val('');
        $('#DSTFCGSTPer').val('');
        $('#DSTFSGSTPer').val('');
        $('#DSTFIGSTPer').val('');
        $('#DSTFTotalAmount').val('');
        $('#DSTFSACCode').val('');
        $('#AmmendOperationId').val('');
        $('#AmmendChargeType').val('');
        $('#AmmendChargeName').val('');
        $('#AmmendTaxable').val('');
        $('#AmmendCharge').val('');
        $('#AmmendCGSTCharge').val('');
        $('#AmmendSGSTCharge').val('');
        $('#AmmendIGSTCharge').val('');
        $('#AmmendCGSTPer').val('');
        $('#AmmendSGSTPer').val('');
        $('#AmmendIGSTPer').val('');
        $('#AmmendTotalAmount').val('');
        $('#AmmendSACCode').val('');
        $('#TotalAmount').val('');
        $('#PartyPdaCode').val('');
        $('#PartyPdaId').val('');
        if (CFSCD == "1") {

        }
        else {
            GetCargo(CFSCD);
        }
    }
    function ResetAllFields() {
        $('#DSTFOperationId').val('');
        $('#DSTFChargeType').val('');
        $('#DSTFChargeName').val('');
        $('#DSTFTaxable').val('');
        $('#DSTFCharge').val('');
        $('#DSTFCGSTCharge').val('');
        $('#DSTFSGSTCharge').val('');
        $('#DSTFIGSTCharge').val('');
        $('#DSTFCGSTPer').val('');
        $('#DSTFSGSTPer').val('');
        $('#DSTFIGSTPer').val('');
        $('#DSTFTotalAmount').val('');
        $('#AmmendOperationId').val('');
        $('#AmmendChargeType').val('');
        $('#AmmendChargeName').val('');
        $('#AmmendTaxable').val('');
        $('#AmmendCharge').val('');
        $('#AmmendCGSTCharge').val('');
        $('#AmmendSGSTCharge').val('');
        $('#AmmendIGSTCharge').val('');
        $('#AmmendCGSTPer').val('');
        $('#AmmendSGSTPer').val('');
        $('#AmmendIGSTPer').val('');
        $('#AmmendTotalAmount').val('');
        $('#TotalAmount').val('');
        $('#ContainerNo').val('');
        $('#CustomSealNo').val('');
        $('#CHAShippingLine').val('');
        $('#GroundRent').val('');
        $('#Size').val('');
        $('#GateInDate').val('');
        $('#CFSCode').val('');
        $('#SALId').val('');
        $('#SAL').val('');
        $('#ContainerClassId').val('');
        $('#ContainerNo').val('');
        $('#PartyPdaCode').val('');
        $('#PartyPdaId').val('');

    }
    $('#CHAShippingLinebox').keyup(function () {
        var val = $(this).val().toLowerCase();
        if (val == "")
            $('#lstCHAShippingLine > li').show();
        else {
            $('#lstCHAShippingLine > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
            });
        }
    });
    $('#CHAShippingLineSearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("GetPartyPdaForFCLtoLCL", "Wfld_CWCImport", new { Area = "Import" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;
                ViewForwarderList = data;
                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.PartyPdaId + '" " onclick="GetCHAShippingLine(this)">' + item.PartyPdaCode + '</li>';
                });
                $('#lstCHAShippingLine').html(html);
            }
        });

        $("#CHAShippingLineModal").modal("show");
    });

    function GetCHAShippingLine(elem) {
        debugger;
        $('#PartyPdaCode').val($(elem).text());
        $('#PartyPdaId').val($(elem).attr('id'))
        debugger;
        var parties = ViewForwarderList; //JSON.parse($('#cha').val());
        var payby = $.grep(parties, function (item) { return item.PartyPdaId == $('#PartyPdaId').val(); })[0];
        CalculateFCLtoLCL();
        $("#CHAShippingLineModal").modal("hide");
    }

    function SealCuttingOnSuccess(data) {
        debugger;
        if (data.Status == 1 || data.Status == 2) {
            if ($('#DivMsg').hasClass('logErrMsg'))
                $('#DivMsg').removeClass('logErrMsg').addClass('logSuccMsg');
            $('#DivMsg').html("FCL To LCL Conversion Saved Successfully");
            $('#btnSave').prop('disabled', true);
            setTimeout(GetConversion, TimeInSeconds);
            //ResetAllFields();
            GetConversionList();
        }
        else if (data.Status == 3) {
            if ($('#DivMsg').hasClass('logErrMsg'))
                $('#DivMsg').removeClass('logErrMsg').addClass('logSuccMsg');
            $('#DivMsg').html(data.Data);
            setTimeout(GetConversion, TimeInSeconds);
            //ResetAllFields();
            GetConversionList();
        }
        else {
            if ($('#DivMsg').hasClass('logSuccMsg'))
                $('#DivMsg').removeClass('logSuccMsg').addClass('logErrMsg');
            $('#DivMsg').html("Fail to FCL To LCL Conversion");
            setTimeout(GetConversion, TimeInSeconds);
        }
    }

    function SealCuttingeOnFailure(data) {
        if ($('#DivMsg').hasClass('logErrMsg'))
            $('#DivMsg').removeClass('logErrMsg').addClass('logSuccMsg');
        $('#DivMsg').html("Fail to Save FCL To LCL Conversion");
    }

    function GetConversionList() {
        debugger;
        $('#DivScList').load('/Import/Wfld_CWCImport/GetListOfFCLToLCLConversionDtl');
    }
    function GetConversion() {
        debugger;
        $('#DivBody').load('/Import/Wfld_CWCImport/AddFCLtoLCLConversion');
    }

</script>
@*<script>

        function FillListByContainer()
        {
            var ContainerName = $('#searchContainer').val();
            //alert(ContainerName);
            if (ContainerName == "") {
                GetFormOneList();

            }
            else {
                GetFormOneListByContainerNumber(ContainerName);
            }

        }
        function GetFormOneListByContainerNumber(ContainerName) {
            debugger;
            $('#divFormOneList').load('/Import/Kol_CWCImport/Kol_GetFormOneList?ContainerName=' + ContainerName);
        }

        function GetFormOneList() {
            debugger;
            $('#divFormOneList').load( '/Import/Kol_CWCImport/Kol_GetFormOneList');
        }
        $('#Shippingbox').keyup(function () {
            var val = $(this).val().toLowerCase();
            if (val == "")
                $('#lstShipping > li').show();
            else {
                $('#lstShipping > li').each(function () {
                    var text = $(this).text().toLowerCase();
                    (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
                });
            }
        });
        $('#lstShipping > li').on("click", function () {
            $('#ShippingLineName').val($(this).text());
            $('#ShippingLineId').val($(this).attr('id'));
            $("#ShippingLineModal").modal("hide");
        });
        $('#PODbox').keyup(function () {
            var val = $(this).val().toLowerCase();
            if (val == "")
                $('#lstPOD > li').show();
            else {
                $('#lstPOD > li').each(function () {
                    var text = $(this).text().toLowerCase();
                    (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
                });
            }
        });
        $('#lstPOD > li').on("click", function () {
            $('#PortName').val($(this).text());
            $('#PortOfDischargeId').val($(this).attr('id'));
            $("#PODModal").modal("hide");
        });
        $('#CHAbox').keyup(function () {
            var val = $(this).val().toLowerCase();
            if (val == "")
                $('#lstCHA > li').show();
            else {
                $('#lstCHA > li').each(function () {
                    var text = $(this).text().toLowerCase();
                    (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
                });
            }
        });
        $('#lstCHA > li').on("click", function () {
            $('#txtCHAName').val($(this).text());
            $('#CHAId').val($(this).attr('id'));
            $("#CHAModal").modal("hide");
        });
        $('#Impbox').keyup(function () {
            var val = $(this).val().toLowerCase();
            if (val == "")
                $('#lstImp > li').show();
            else {
                $('#lstImp > li').each(function () {
                    var text = $(this).text().toLowerCase();
                    (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
                });
            }
        });
        $('#lstImp > li').on("click", function () {
            $('#txtImporterName').val($(this).text());
            $('#ImporterId').val($(this).attr('id'));
            $("#ImporterModal").modal("hide");
        });
        $('#Commoditybox').keyup(function () {
            var val = $(this).val().toLowerCase();
            if (val == "")
                $('#lstCommodity > li').show();
            else {
                $('#lstCommodity > li').each(function () {
                    var text = $(this).text().toLowerCase();
                    (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
                });
            }
        });
        $('#lstCommodity > li').on("click", function () {
            $('#txtCommodity').val($(this).text());
            $('#CommodityId').val($(this).attr('id'));
            $("#CommodityModal").modal("hide");
        });
    </script>
    <script>
        var EditIndex = -1;
        var ArrayOfContainerDetails = [];
        function AddFormOneDet() {
            var dateOfLanding=$('#txtDateOfLanding').val();
            if(dateOfLanding =="" || dateOfLanding==undefined)
            {
                dateOfLanding="0";
            }

            if (ValidateFormOneDet()) {
                var ContainerDetails = {
                    "FormOneDetailID": $('#FormOneDetailId').val(),
                    "ContainerNo": $('#txtContainerNo').val(),
                    "ContainerSize": $('#ddlContainerSize option:selected').val(),
                    "Reefer": $('#IsReefer').is(':checked') ? 1 : 0,
                    "FlatReck": $('#IsFlatReck').is(':checked') ? 1 : 0,
                    "SealNo": $('#txtSealNo').val(),
                    "LineNo": $('#txtLineNo').val(),
                    "MarksNo": $('#txtMarksNo').val(),
                    "CHAId": $('#CHAId').val() == null ? 0 : $('#CHAId').val(),     //added.
                    "CHAName": $('#txtCHAName').val(),
                    "ImporterId": $('#ImporterId').val(),
                    "ImporterName": $('#txtImporterName').val(),
                    "CargoDesc": $('#txtCargoDesc').val(),
                    "CommodityId": $('#CommodityId').val(),
                    "CommodityName": $('#txtCommodity').val(),
                    "CargoType": $('#ddlCargoType option:selected').val(),
                    "DateOfLanding":dateOfLanding,
                    "Remarks": $('#txtRemarks').val()
                };
                /*if (EditIndex > -1)
                    ArrayOfContainerDetails.splice(EditIndex, 1, ContainerDetails);
                else*/
                    ArrayOfContainerDetails.push(ContainerDetails);

                $('#tblFormOneDet').html('');
                GenerateTable();
                //ResetFormOneDet();
                ResetFormOneDetPartial();
            }
        }
        function ValidateFormOneDet() {
            debugger;
            var Status = true;
            if ($('#txtContainerNo').val() == "") {
                $('#ErrContainerNo').html('Fill Out This Field');
                Status = false;
            }
            if ($('#ddlContainerSize option:selected').text() == "----Select----") {
                $('#ErrContainerSize').html('Fill Out This Field');
                Status = false;
            }
            if ($('#txtSealNo').val() == "") {
                $('#ErrSealNo').html('Fill Out This Field');
                Status = false;
            }
            if ($('#txtLineNo').val() == "") {
                $('#ErrLineNo').html('Fill Out This Field');
                Status = false;
            }
            //if ($('#txtMarksNo').val() == "") {
            //    $('#ErrMarksNo').html('Fill Out This Field');
            //    Status = false;
            //}
            //if ($('#txtCHAName').val() == "") {
            //    $('#ErrCHAName').html('Fill Out This Field');
            //    Status = false;
            //}
            if ($('#txtImporterName').val() == "") {
                $('#ErrImporterName').html('Fill Out This Field');
                Status = false;
            }
            if ($('#txtCargoDesc').val() == "") {
                $('#ErrCargoDesc').html('Fill Out This Field');
                Status = false;
            }
            if ($('#txtCommodity').val() == "") {
                $('#ErrCommodity').html('Fill Out This Field');
                Status = false;
            }
            if ($('#ddlCargoType option:selected').text() == "----Select----") {
                $('#ErrCargoType').html('Fill Out This Field');
                Status = false;
            }
            //if ($('#txtDateOfLanding').val() == "") {
            //    $('#ErrDateOfLanding').html('Fill Out This Field');
            //    Status = false;
            //}
            //if ($('#txtRemarks').val() == "") {
            //    $('#ErrRemarks').html('Fill Out This Field');
            //    Status = false;
            //}

            //setTimeout(function () { $('span[id*="Err"]').html(''); }, 2000);
            return Status;
        }
        function GenerateTable() {
            var tablehtml = '<table id="tblFormOneDet" class="table table-striped table-bordered dataTable" style="width:100%;">'
                + '<thead><tr><th style="width:8%;text-align:center;">SL No</th><th>Container No</th><th>Container Size</th><th>Line No</th><th>Date of Landing</th><th style="width:10%;text-align:center;">Edit</th><th style="width:10%;text-align:center;">View</th></tr>'
                + '</thead><tbody>';
            $.each(ArrayOfContainerDetails, function (i, data) {
                tablehtml += '<tr><td style="text-align:center;">' + (i + 1) + '</td><td>' + data.ContainerNo + '</td><td>' + data.ContainerSize + '</td><td>' + data.LineNo + '</td><td>' + data.DateOfLanding + '</td>'
                    + '<td style="text-align:center;"><a href="#" onclick="EditFormOneDet(' + i + ')"><i class="fa fa-pencil-square Edit"></i></a></td>'
                    + '<td style="text-align:center;"><a href="#" onclick="ViewFormOneDet(' + i + ')"><i class="fa fa-search-plus Edit"></i></a></td></tr>';
            });
            tablehtml += '</tbody></table>';
            $('#tblFormOneDet').html(tablehtml);

            if (ArrayOfContainerDetails.length > 0) {
                $('#FormOneDetailsJS').val(JSON.stringify(ArrayOfContainerDetails));
            }
            else {
                $('#FormOneDetailsJS').val('');
            }
        }
        function ResetFormOneDetPartial() {
            // removed $('#FormOneDetailId, #CHAId').val('0');
            //addedd
            $('#FormOneDetailId').val('0');
            //
            //removed  $('#txtContainerNo, #txtSealNo, #txtMarksNo, #txtCHAName, #txtCargoDesc, #txtDateOfLanding, #txtRemarks').val('');
            //added
            if ($('input[name=LCLFCL]:checked').val() == 'FCL') {
                $('#txtContainerNo, #txtSealNo, #txtMarksNo, #txtDateOfLanding, #txtRemarks').val('');
            }
            else {
                 $('#txtContainerNo, #txtSealNo, #txtMarksNo, #txtCargoDesc, #txtDateOfLanding, #txtRemarks').val('');
            }

            //
            $('#IsReefer, #IsFlatReck').attr('checked', false)
            $('#ddlContainerSize').prop('selectedIndex', 0);
            $('#btnAddFormOneDet').prop("disabled", false);
        }

        function ResetFormOneDet() {
            $('#FormOneDetailId, #CHAId, #ImporterId, #CommodityId').val('0');
            $('#txtContainerNo, #txtSealNo, #txtLineNo, #txtMarksNo, #txtCHAName, #txtImporterName, #txtCargoDesc, #txtCommodity, #txtDateOfLanding, #txtRemarks').val('');
            $('#IsReefer, #IsFlatReck').attr('checked', false)
            $('#ddlContainerSize, #ddlCargoType').prop('selectedIndex', 0);
            $('#btnAddFormOneDet').prop("disabled", false);
        }

        function EditFormOneDet(i) {
            debugger;
            if ($('#txtContainerNo').val() == '') {
                $('#btnAddFormOneDet').prop("disabled", false);
                $('#FormOneDetailId').val(ArrayOfContainerDetails[i].FormOneDetailID);
                $('#txtContainerNo').val(ArrayOfContainerDetails[i].ContainerNo);
                $('#ddlContainerSize option[value="' + ArrayOfContainerDetails[i].ContainerSize + '"]').prop("selected", true);
                $('#IsReefer').prop('checked', (ArrayOfContainerDetails[i].Reefer == 1 ? true : false));
                $('#IsFlatReck').prop('checked', (ArrayOfContainerDetails[i].FlatReck == 1 ? true : false));
                $('#txtSealNo').val(ArrayOfContainerDetails[i].SealNo);
                $('#txtLineNo').val(ArrayOfContainerDetails[i].LineNo);
                $('#txtMarksNo').val(ArrayOfContainerDetails[i].MarksNo);
                $('#CHAId').val(ArrayOfContainerDetails[i].CHAId);
                $('#txtCHAName').val(ArrayOfContainerDetails[i].CHAName);
                $('#ImporterId').val(ArrayOfContainerDetails[i].ImporterId);
                $('#txtImporterName').val(ArrayOfContainerDetails[i].ImporterName);
                $('#txtCargoDesc').val(ArrayOfContainerDetails[i].CargoDesc);
                $('#CommodityId').val(ArrayOfContainerDetails[i].CommodityId);
                $('#txtCommodity').val(ArrayOfContainerDetails[i].CommodityName);
                $('#ddlCargoType option[value="' + ArrayOfContainerDetails[i].CargoType + '"]').prop("selected", true);
                $('#txtDateOfLanding').val(ArrayOfContainerDetails[i].DateOfLanding);
                $('#txtRemarks').val(ArrayOfContainerDetails[i].Remarks);
                ArrayOfContainerDetails.splice(i, 1);
                GenerateTable();
            }
            else
                alert('Please add the earlier record to edit');
        }
        function ViewFormOneDet(i) {
            $('#FormOneDetailId').val(ArrayOfContainerDetails[i].FormOneDetailID);
            $('#txtContainerNo').val(ArrayOfContainerDetails[i].ContainerNo);
            $('#ddlContainerSize option[value="' + ArrayOfContainerDetails[i].ContainerSize + '"]').attr("selected", "selected");
            $('#IsReefer').attr('checked', ArrayOfContainerDetails[i].Reefer == 1 ? true : false);
            $('#IsFlatReck').attr('checked', ArrayOfContainerDetails[i].FlatReck == 1 ? true : false);
            $('#txtSealNo').val(ArrayOfContainerDetails[i].SealNo);
            $('#txtLineNo').val(ArrayOfContainerDetails[i].LineNo);
            $('#txtMarksNo').val(ArrayOfContainerDetails[i].MarksNo);
            $('#CHAId').val(ArrayOfContainerDetails[i].CHAId);
            $('#txtCHAName').val(ArrayOfContainerDetails[i].CHAName);
            $('#ImporterId').val(ArrayOfContainerDetails[i].ImporterId);
            $('#txtImporterName').val(ArrayOfContainerDetails[i].ImporterName);
            $('#txtCargoDesc').val(ArrayOfContainerDetails[i].CargoDesc);
            $('#CommodityId').val(ArrayOfContainerDetails[i].CommodityId);
            $('#txtCommodity').val(ArrayOfContainerDetails[i].CommodityName);
            $('#ddlCargoType option[value="' + ArrayOfContainerDetails[i].CargoType + '"]').attr("selected", "selected");
            $('#txtDateOfLanding').val(ArrayOfContainerDetails[i].DateOfLanding);
            $('#txtRemarks').val(ArrayOfContainerDetails[i].Remarks);

            $('#btnAddFormOneDet').prop("disabled", true);
        }


        function FormOneOnSuccess(data) {
            debugger;
            if (data.Status == 1 || data.Status == 2) {
                if ($('#DivFormOneMsg').hasClass('logErrMsg'))
                    $('#DivFormOneMsg').removeClass('logErrMsg').addClass('logSuccMsg');
                $('#DivFormOneMsg').html(data.Message);
                setTimeout(GetFormOne, TimeInSeconds);
                //ResetAllFields();
                GetFormOneList();
            }
            else {
                if ($('#DivFormOneMsg').hasClass('logSuccMsg'))
                    $('#DivFormOneMsg').removeClass('logSuccMsg').addClass('logErrMsg');
                $('#DivFormOneMsg').html(data.Message);
            }
        }
        function FormOneOnFailure() {
            alert("Error");
        }
        function ValidateGrid() {
            if ($('#FormOneDetailsJS').val() == '') {
                alert('Container Details Must Have Data.');
                return false;
            }
            //else if ($('#FormOneDetailsJS').val()) {

            //}
            else {
                var flag = false;
                var ContainerJArray = JSON.parse($('#FormOneDetailsJS').val());
                $.each(ContainerJArray, function (i, item) {
                    if (item.DateOfLanding == '') {
                        flag = true;
                        return false;
                    }
                });
                //if (flag) {
                //    alert('Container Details Must Have Date Of Landing.');
                //    return false;
                //}
                //else {
                //    return true;
                //}
            }
        }
    </script>
    <script>
        function ValidateData(evt) {
            var CharCode;
            if (window.event) {
                CharCode = window.event.keyCode;
            }
            else {
                CharCode = evt.which;
            }
            if (CharCode == 32) {
                return true;
            }
            if ((CharCode > 31 & CharCode < 48) || (CharCode > 57 & CharCode < 65) || (CharCode > 90 & CharCode < 97) || (CharCode > 122)) {
                evt.preventDefault();
                return false;
            }
            return true;
        }
        function AllowOnlyDecimal(evt) {
            var CharCode;
            if (window.event) {
                CharCode = window.event.keyCode;
            }
            else {
                CharCode = evt.which;
            }
            if ((CharCode > 47 & CharCode < 58) || (CharCode == 46) || CharCode == 8) {
                return true;
            }
            else {
                evt.preventDefault;
                return false;
            }
        }
        function AllowOnlyInteger(evt) {
            var CharCode;
            if (window.event) {
                CharCode = window.event.keyCode;
            }
            else {
                CharCode = evt.which;
            }
            if ((CharCode > 47 & CharCode < 58) || CharCode == 8) {
                return true;
            }
            else {
                evt.preventDefault;
                return false;
            }
        }

        function hideMsg(elem) {
            $(elem).parent().find(".field-validation-error").html(" ");
        }
    </script>*@

@*<script type="text/javascript">
        function FillListByContainer()
        {
            var ContainerName = $('#searchContainer').val();
            //alert(ContainerName);
            if (ContainerName == "") {
                GetFormOneList();

            }
            else {
                GetFormOneListByContainerNumber(ContainerName);
            }

        }
        function GetFormOneListByContainerNumber(ContainerName) {
            debugger;
            $('#divFormOneList').load('/Import/Kol_CWCImport/Kol_GetFormOneList?ContainerName=' + ContainerName);
        }

    </script>*@
