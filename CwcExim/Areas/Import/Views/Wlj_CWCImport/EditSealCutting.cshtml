@model CwcExim.Areas.Import.Models.Wlj_SealCutting

@using (Ajax.BeginForm("AddEditSealCutting", "Wlj_CWCImport", new AjaxOptions { Confirm = "Are You Sure You Want To Save?", HttpMethod = "POST", OnSuccess = "SealCuttingOnSuccess", OnFailure = "SealCuttingeOnFailure" }))
{
    @Html.AntiForgeryToken()

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-offset-0-5 col-md-11">
                <div class="Head_h4">
                    <div class="row">
                        <div class="col-md-12">
                            <h4>Seal Cutting</h4>
                            @if (ViewBag.BLList != null)
                {
                                <input type="hidden" id="ViewBLList" name="BLList" value=@ViewBag.BLList.ToString() />
                            }
                            else
                            {
                                <input type="hidden" id="ViewBLList" name="BLList" value="" />
                            }

                            <input type="hidden" id="ViewContainerList" name="ContainerList" value="" />


                            @if (ViewBag.GodownList != null)
                {
                                <input type="hidden" id="ViewGodownList" name="GodownList" value=@ViewBag.GodownList.ToString() />
                            }
                            else
                            {
                                <input type="hidden" id="ViewGodownList" name="GodownList" value="" />
                            }

                            @*@if (ViewBag.CHAShippingLineList != null)
                                {
                                    <input type="hidden" id="cha" value="@ViewBag.CHAShippingLineList.ToString()" />
                                }
                                else
                                {*@
                            <input type="hidden" id="ViewCHAShippingLine" value="" />
                            @*}*@



                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2">
                                @Html.HiddenFor(m => m.SealCuttingId, new { @value = "0" })
                                @Html.LabelFor(m => m.SealCuttingNo, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBoxFor(m => m.SealCuttingNo, new { @class = "form-control input-sm", @readonly = true })
                            </div>
                            <div class="col-md-offset-0-5 col-md-1-5 col_cus_2 padding_rt">
                                @Html.LabelFor(m => m.TransactionDate, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2 col_cus_2 Date_Img">
                                @Html.TextBoxFor(m => m.TransactionDate, new { @size = 10, @maxlength = 10, @onkeyup = "check()", @onblur = "checkdate()" })
                                <div class="field-validation-error" id="DivMsgs" style="background-color:transparent"></div>
                            </div>
                            <div class="col-md-offset-0-5 col-md-1-5 col_cus_2">
                                @*@Html.LabelFor(m => m.ContainerNo, new { @class = "InputLabel" })*@
                                <label class="InputLabel" for="ContainerNo">Container / CBT No</label>
                            </div>
                            <div class="col-md-2">
                                @Html.HiddenFor(m => m.ContainerId, new { @value = "0" })
                                @Html.HiddenFor(m => m.OBLId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.ContainerNo, new { @class = "form-control input-sm", @readonly = true })
                                @*<span class="search" id="ContainerNoSearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#ContainerModal"></i></span>*@
                                @*@Html.ValidationMessageFor(m => m.ShippingLineName)*@
                            </div>
                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                Size<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBoxFor(m => m.size, new { @class = "form-control input-sm", @readonly = true })
                                @*@Html.ValidationMessageFor(m => m.VesselName)*@
                            </div>
                            <div class="col-md-offset-0-5 col-md-1-5 col_cus_2 padding_rt">
                                @Html.LabelFor(m => m.GateInDate, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2 col_cus_2 Date_Img">
                                @*@Html.TextBox("GateInDate", "", new { @class = "form-control input-sm", placeholder = "dd/mm/yyyy", @readonly = true, @onfocus = "hideMsg(this);" })*@
                                @Html.TextBoxFor(m => m.GateInDate, new { @class = "InputLabel", @readonly = true })<span class="LabelColon"></span>
                                @*@Html.ValidationMessageFor(m => m.VesselName)*@
                            </div>
                            <div class="col-md-offset-0-5 col-md-1-5 col_cus_2 padding_rt">
                                <label>CFS Code:</label>
                            </div>
                            <div class="col-md-2">
                                @Html.TextBoxFor(m => m.CFSCode, new { @class = "form-control input-sm", @readonly = true })
                                @Html.ValidationMessageFor(m => m.CFSCode)
                                @*@Html.TextBoxFor(m=>m.LCLFCL)*@
                            </div>
                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                LCL/FCL<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBoxFor(m => m.LCLFCL, new { @class = "form-control input-sm", @readonly = true })
                            </div>
                            <div class="col-md-offset-4-5 col-md-1-5 col_cus_2 padding_rt">
                                @Html.LabelFor(m => m.CustomSealNo, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2 col_cus_2">
                                @Html.HiddenFor(m => m.CustomSealId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.CustomSealNo, new { @class = "form-control input-sm", @readonly = true })
                                @*@Html.ValidationMessageFor(m => m.CustomSealNo)*@
                            </div>
                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                @Html.LabelFor(m => m.GodownNo, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                            </div>
                            <div class="col-md-2-5">
                                @Html.HiddenFor(m => m.GodownId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.GodownNo, new { @class = "form-control input-sm", @readonly = true })
                                <span class="search" id="GodownSearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#GodownModal"></i></span>
                                @*@if (Model.LCLFCL == "LCL") {
                                        @Html.ValidationMessageFor(m => m.GodownNo)
                                    }*@
                            </div>
                            <div class="col-md-offset-0-5 col-md-1-5 col_cus_2">
                                @Html.LabelFor(m => m.CHAShippingLine, new { @class = "InputLabel" })
                            </div>
                            <div class="col-md-2">
                                @Html.HiddenFor(m => m.CHAShippingLineId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.CHAShippingLine, new { @class = "form-control input-sm", @readOnly = true })
                                <span class="search" id="CHAShippingLineSearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#CHAShippingLineModal"></i></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="Form_Space_top"></div>

                @*<div class="Head_h4">
                    <div class="row">
                        <div class="col-md-12">
                            <h4>Payment Information (For LCL)</h4>
                        </div>
                    </div>

                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2">
                                @Html.LabelFor(m => m.CHAShippingLine, new { @class = "InputLabel" })
                            </div>
                            <div class="col-md-2-5">
                                @Html.HiddenFor(m => m.CHAShippingLineId, new { @value = "0" })
                                @Html.TextBoxFor(m => m.CHAShippingLine, new { @class = "form-control input-sm", @readOnly = true })
                                <span class="search" id="CHAShippingLineSearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#CHAShippingLineModal"></i></span>
                                @*if (Model.LCLFCL == "LCL")
                        {
                            @Html.ValidationMessageFor(m => m.CHAShippingLine)
                        }*@
                @*</div>
                        </div>
                    </div>*@

                @* <div class="row Form_Space_top">
                            <div class="form-group Form_Input">
                                <div class="col-md-1-5 col_cus_2 padding_rt">
                                    <label> SD Details : Folio No.:</label>
                                </div>
                                <div class="col-md-2-5">
                                    @Html.TextBoxFor(m => m.FolioNo, new { @class = "form-control input-sm", @readonly = true })
                                    @Html.ValidationMessageFor(m => m.FolioNo)
                                </div>
                                <div class="col-md-offset-4-5 col-md-1-5 col_cus_2 padding_rt">
                                    @Html.LabelFor(m => m.Balance, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-2">
                                    @Html.TextBoxFor(m => m.Balance, new { @class = "form-control input-sm", @readOnly = true })
                                    @Html.ValidationMessageFor(m => m.Balance)
                                </div>
                            </div>
                        </div>

                        <div class="row Form_Space_top">
                            <div class="form-group Form_Input">
                                <div class="col-md-1-5 col_cus_2">
                                    @Html.LabelFor(m => m.InvoiceNo, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-2-5">
                                    @Html.HiddenFor(m => m.InvoiceId, new { @value = "0" })
                                    @Html.TextBoxFor(m => m.InvoiceNo, new { @class = "form-control input-sm", @readOnly = true })
                                    @Html.ValidationMessageFor(m => m.InvoiceNo)
                                </div>
                            </div>
                        </div>

                        <div class="row Form_Space_top">
                            <div class="form-group Form_Input">
                                <div class="col-md-1-5 col_cus_2">
                                    @Html.LabelFor(m => m.GroundRent, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-2-5">
                                    @Html.TextBoxFor(m => m.GroundRent, new { @class = "form-control input-sm", @readonly = true })
                                    @Html.ValidationMessageFor(m => m.GroundRent)
                                </div>
                            </div>
                        </div>

                        <div class="row Form_Space_top">
                            <div class="form-group Form_Input">
                                <div class="col-md-1-5 col_cus_2">
                                    @Html.LabelFor(m => m.CGST, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-1">
                                    @Html.TextBoxFor(m => m.CGSTPer, new { @value = "0", @readonly = true })
                                </div>
                                <div class="col-md-1 padding_lt">
                                    @Html.TextBoxFor(m => m.CGST, new { @class = "form-control input-sm", @readonly = true })
                                    @Html.ValidationMessageFor(m => m.CGST)
                                </div>
                                <div class="col-md-1 col_cus_2">
                                    @Html.LabelFor(m => m.SGST, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-1">
                                    @Html.TextBoxFor(m => m.SGSTPer, new { @value = "0", @readonly = true })

                                    @Html.ValidationMessageFor(m => m.SGST)
                                </div>
                                <div class="col-md-1 padding_lt">
                                    @Html.TextBoxFor(m => m.SGST, new { @class = "form-control input-sm", @readonly = true })
                                </div>
                                <div class="col-md-1 col_cus_2">
                                    @Html.LabelFor(m => m.IGST, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-1">
                                    @Html.TextBoxFor(m => m.IGSTPer, new { @value = "0", @readonly = true })
                                    @Html.ValidationMessageFor(m => m.IGST)
                                </div>
                                <div class="col-md-1 padding_lt">
                                    @Html.TextBoxFor(m => m.IGST, new { @class = "form-control input-sm", @readonly = true })
                                </div>
                                <div class="col-md-1-5 col_cus_2">
                                    @Html.LabelFor(m => m.TotalAmount, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                </div>
                                <div class="col-md-1 padding_lt">
                                    @Html.TextBoxFor(m => m.TotalAmount, new { @class = "form-control input-sm", @readonly = true })
                                    @Html.ValidationMessageFor(m => m.TotalAmount)
                                </div>
                            </div>
                        </div>
                    </div>*@

                <div class="Form_Space_top"></div>

                <div class="Head_h4">
                    <div class="row">
                        <div class="col-md-12">
                            <h4>OBL/HBL Details</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="Form_Space_top"></div>
                        <div class="col-md-12" id="DivOBLList">
                            <table class="table table-bordered table-hover dataTable Table_center" id="tblOBLList">
                                <thead>
                                    <tr>
                                        <th class="text-center">@Html.DisplayName("SL No")</th>
                                        <th>OBL/HBL No.</th>
                                        <th>OBL/HBL Date</th>
                                        <th>Cargo Type</th>
                                        <th>No Of Package</th>
                                        <th>Gross Wt.</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        var Serial = 1;
                                        if (Model.lstObldt != null)
                                        {
                                            foreach (var item in Model.lstObldt)
                                            {
                                                <tr>
                                                    <td class="text-center">@Serial</td>
                                                    <td class="text-center">@item.BLNo</td>
                                                    <td class="text-center">@item.BLDate</td>
                                                    <td class="text-center">@item.CargoType</td>
                                                    <td class="text-center">@item.NO_PKG</td>
                                                    <td class="text-center">@item.GR_WT</td>
                                                </tr>
                                                Serial++;
                                            }
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                        <div class="Form_Space_top"></div>
                    </div>
                </div>

                <div class="row">
                    <div class="stoke SignUp_space_bottom2 SignUp_space_top2"></div>
                </div>
                <div class="row">
                    <div class="col-md-offset-4 col-md-2 SignUp_space_bottom">
                        <input type="submit" id="btnSave" class="btn log_Btn_sm" value="Save" />
                    </div>
                    <div class="col-md-2">
                        <input type="button" id="btnBack" class="btn log_Btn_sm" value="Back" onclick="Back()" />
                    </div>
                </div>
                <div class="logSuccMsg" id="DivMsg" style="background-color:transparent"></div>
                <div class="row">
                    <div class="col-md-12" id="DivScList">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div id="divFormOneList"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="ShippingLineModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content popup_modal">
                <div class="modal-header popup_header">
                    <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                    <h4 class="modal-title">List of Shipping Line</h4>
                </div>
                <div class="modal-body popup_body">
                    <input placeholder="Search Me" id="Shippingbox" type="text" />
                    <ul class="navList" id="lstShipping">
                        @*@{
                                foreach (var item in Model.lstShippingLine)
                                {
                                    <li id="@item.ShippingLineId">@item.ShippingLineName</li>
                                }
                            }*@
                    </ul>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-offset-6 col-md-6">
                            <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="PODModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content popup_modal">
                <div class="modal-header popup_header">
                    <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                    <h4 class="modal-title">List of Port</h4>
                </div>
                <div class="modal-body popup_body">
                    <input placeholder="Search Me" id="PODbox" type="text" />
                    <ul class="navList" id="lstPOD">
                        @if (ViewBag.Godownist != null)
                        {
                            foreach (var item in ViewBag.Godownist)
                            {
                                <li id="@item.GodownId">@item.GodownName</li>
                            }
                        }
                    </ul>
                </div>
                <div class="modal-footer">
                    <div class="row">
                        <div class="col-md-offset-6 col-md-6">
                            <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
                <div class="modal fade" id="BLModal" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content popup_modal">
                            <div class="modal-header popup_header">
                                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                <h4 class="modal-title">List of B/L</h4>
                            </div>
                            <div class="modal-body popup_body">
                                <input placeholder="Search Me" id="BLbox" type="text" />
                                <ul class="navList" id="lstBL">
                                    @*@if (ViewBag.BLList != null)
                                        {
                                            foreach (var item in ViewBag.BLList)
                                            {
                                                <li id="@item.BLId">@item.BLNo</li>
                                            }
                                        }*@
                                </ul>
                            </div>
                            <div class="modal-footer">
                                <div class="row">
                                    <div class="col-md-offset-6 col-md-6">
                                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="ContainerModal" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content popup_modal">
                            <div class="modal-header popup_header">
                                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                <h4 class="modal-title">List of Container / CBT</h4>
                            </div>
                            <div class="modal-body popup_body">
                                <input placeholder="Search Me" id="Containerbox" type="text" />
                                <ul class="navList" id="lstContainer">
                                    @*@if (ViewBag.ContainerList != null)
                                        {
                                            foreach (var item in ViewBag.ContainerList)
                                            {
                                                <li id="@item.ContainerId">@item.ContainerName</li>
                                            }
                                        }*@
                                </ul>
                            </div>
                            <div class="modal-footer">
                                <div class="row">
                                    <div class="col-md-offset-6 col-md-6">
                                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="GodownModal" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content popup_modal">
                            <div class="modal-header popup_header">
                                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                <h4 class="modal-title">List of Godown</h4>
                            </div>
                            <div class="modal-body popup_body">
                                <input placeholder="Search Me" id="Godownbox" type="text" />
                                <ul class="navList" id="lstGodown">
                                    @if (ViewBag.GodownList != null)
                                    {
                                        foreach (var item in ViewBag.GodownList)
                                        {
                                            <li id="@item.GodownId">@item.GodownNo</li>
                                        }
                                    }
                                </ul>
                            </div>
                            <div class="modal-footer">
                                <div class="row">
                                    <div class="col-md-offset-6 col-md-6">
                                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="CHAShippingLineModal" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content popup_modal">
                            <div class="modal-header popup_header">
                                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                <h4 class="modal-title">List of CHA/Shipping Line</h4>
                            </div>
                            <div class="modal-body popup_body">
                                <input placeholder="Search Me" id="CHAShippingLinebox" type="text" />
                                <ul class="navList" id="lstCHAShippingLine">
                                    @*@{
                                            foreach (var item in Model.lstCHA)
                                            {
                                                <li id="@item.CHAId">@item.CHAName</li>
                                            }
                                        }*@
                                </ul>
                            </div>
                            <div class="modal-footer">
                                <div class="row">
                                    <div class="col-md-offset-6 col-md-6">
                                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="ImporterModal" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content popup_modal">
                            <div class="modal-header popup_header">
                                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                <h4 class="modal-title">List of Importer</h4>
                            </div>
                            <div class="modal-body popup_body">
                                <input placeholder="Search Me" id="Impbox" type="text" />
                                <ul class="navList" id="lstImp">
                                    @*@{
                                            foreach (var item in Model.lstImporter)
                                            {
                                                <li id="@item.ImporterId">@item.ImporterName</li>
                                            }
                                        }*@
                                </ul>
                            </div>
                            <div class="modal-footer">
                                <div class="row">
                                    <div class="col-md-offset-6 col-md-6">
                                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="CommodityModal" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content popup_modal">
                            <div class="modal-header popup_header">
                                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                <h4 class="modal-title">List of Commodity</h4>
                            </div>
                            <div class="modal-body popup_body">
                                <input placeholder="Search Me" id="Commoditybox" type="text" />
                                <ul class="navList" id="lstCommodity">
                                    @*@{
                                            foreach (var item in Model.lstCommodity)
                                            {
                                                <li id="@item.CommodityId">@item.CommodityName</li>
                                            }
                                        }*@
                                </ul>
                            </div>
                            <div class="modal-footer">
                                <div class="row">
                                    <div class="col-md-offset-6 col-md-6">
                                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                                        }
@Scripts.Render("~/bundles/jqueryval")
<script>
    var TimeInSeconds;
    var ViewContainerList = [];
    var ViewBLList = [];
    var ViewCHAShippingLine = [];
    $(document).ready(function () {
        debugger;
        //GetFormOne();
        //FillListByContainer();
        //ResetAllFields();
        //GetSCList();
        TimeInSeconds = 5000;
        $("#TransactionDate").datepicker({
            dateFormat: "dd/mm/yy",
            showOn: "button",
            buttonImage: "/Content/images/calendar.png",
            buttonImageOnly: true,
            buttonText: "Select date",
            changeMonth: true,
            changeYear: true,
            showAnima: "fadein",
            onClose: function () {
                $(".Date_Img .Error_Msg").text("");
                $('[data-valmsg-for="Data"]').html('<span></span>');
            }
        });
        GetMinDateinBlDates();
        //$("#BLDate").datepicker({
        //    dateFormat: "dd/mm/yy",
        //    showOn: "button",
        //    buttonImage: "/Content/images/calendar.png",
        //    buttonImageOnly: true,
        //    buttonText: "Select date",
        //    changeMonth: true,
        //    changeYear: true,
        //    showAnima: "fadein",
        //    onClose: function () {
        //        $(".Date_Img .Error_Msg").text("");
        //        $('[data-valmsg-for="Data"]').html('<span></span>');
        //    }
        //});
    });


    var dates = [];
    function GetMinDateinBlDates() {
        var lstObldt=@Html.Raw(Json.Encode(Model.lstObldt));
        $.each(lstObldt,function(i,item){
            dates.push(new Date(item.BLDate.split('/')[2], item.BLDate.split('/')[1]-1, item.BLDate.split('/')[0]));
        });
        debugger;
        var min = dates[0];
        for (var i = 1; i <= dates.length - 1; i++) {
            if (dates[i] < min)
                min = dates[i];
        }
        $("#TransactionDate").datepicker("option", "minDate", min);
    }
    $('#btnSave').on('click', function () {
        var x = $('#LCLFCL').val();

        if (x == 'LCL') {
            if ($('#GodownId').val() == '0') {
                alert('Select Godown.');
                return false;
            }
            if ($('#CHAShippingLineId').val() == '0') {
                alert('Select CHA/Shipping Line.');
                return false;
            }
            $('#btnSave').prop('disabled', true);
            $('#btnSave').submit();
            return true;
        }
        else {
            $('#btnSave').prop('disabled', true);
            $('#btnSave').submit();
            return true;
        }
    });

    $('#Godownbox').keyup(function () {
        var val = $(this).val().toLowerCase();
        if (val == "")
            $('#lstGodown > li').show();
        else {
            $('#lstGodown > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
            });
        }
    });

    $('#GodownSearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("ListOfGodownData", "Wlj_CWCImport", new { Area = "Import" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;
                //$('#ViewContainerList').val(data);
                ViewBLList = data;
                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.GodownId + '" " onclick="GodownHide(this)">' + item.GodownNo + '</li>';
                });
                $('#lstGodown').html(html);
            }
        });

    });


    /* $('#lstGodown > li').on("click", function () {
         $('#GodownNo').val($(this).text());
         $('#GodownId').val($(this).attr('id'));
         $("#GodownModal").modal("hide");
     });*/

    $('#BLbox').keyup(function () {
        var val = $(this).val().toLowerCase();
        if (val == "")
            $('#lstBL > li').show();
        else {
            $('#lstBL > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
            });
        }
    });
    //GenerateLstBL();
    $('#BLNoSearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("ListOfBLData", "Wlj_CWCImport", new { Area = "Import" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;
                //$('#ViewContainerList').val(data);
                ViewBLList = data;
                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.BLId + '" " onclick="GetBLDate(this)">' + item.BLNo + '</li>';
                });
                $('#lstBL').html(html);
            }
        });

    });
    function GetBLDate(elem) {
        $('#BLNo').val($(elem).text());
        $('#BLId').val($(elem).attr('id'));
        debugger;
        var parties = ViewBLList; //JSON.parse($('#ViewBLList').val());
        var payby = $.grep(parties, function (item) { return item.BLId == $('#BLId').val(); })[0];

        $('#BLDate').val(payby.BLDate);
        $('#BlDetailId').val(payby.BlDetailId);

        $('#ContainerId').val(0);
        $('#ContainerNo').val('');
        $('#size').val('');
        $('#GateInDate').val('');
        $('#CFSCode').val('');
        $('#CustomSealNo').val('');

        GenerateLstContainer($('#BLId').val());
        $("#BLModal").modal("hide");
    }
    $('#Containerbox').keyup(function () {
        var val = $(this).val().toLowerCase();
        if (val == "")
            $('#lstContainer > li').show();
        else {
            $('#lstContainer > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
            });
        }
    });
    function GenerateLstContainer(BLId) {
        debugger;
        if (BLId == null || BLId == '' || BLId == 0) {
            if ($('#DivMsg').hasClass('logErrMsg'))
                $('#DivMsg').removeClass('logErrMsg').addClass('logSuccMsg');
            $('#DivMsg').html("Pease Select BL No.");
        }
        else {
            $.ajax({
                url: '@Url.Action("ListOfContainer", "Wlj_CWCImport", new { Area = "Import" })',
                dataType: 'JSON',
                type: 'GET',
                data: { BLId: BLId },
                success: function (data) {
                    debugger;
                    //$('#ViewContainerList').val(data);
                    ViewContainerList = data;
                    var html = '';
                    $.each(data, function (i, item) {
                        html += '<li id="' + item.ContainerId + '" " onclick="GetContainerSize(this)">' + item.ContainerNo + '</li>';
                    });
                    $('#lstContainer').html(html);
                }
            });
        }

    }
    function GetContainerSize(elem) {
        $('#ContainerNo').val($(elem).text());
        $('#ContainerId').val($(elem).attr('id'));
        debugger;
        var parties = ViewContainerList; //JSON.parse($('#ViewContainerList').val());
        var payby = $.grep(parties, function (item) { return item.ContainerNo == $('#ContainerNo').val(); })[0];
        $('#OBLId').val(payby.OBLId);
        $('#size').val(payby.size);
        $('#GateInDate').val(payby.GateInDate);
        $('#CFSCode').val(payby.CFSCode);
        $('#CustomSealNo').val(payby.CustomSealNo);
        $('#LCLFCL').val(payby.LCLFCL);

        $("#ContainerModal").modal("hide");
    }
    function CalculateGroundRent() {
        var TransactionDate = $('#TransactionDate').val();
        var GateInDate = $('#GateInDate').val();
        var ContainerNo = $('#ContainerNo').val();
        var size = $('#size').val();
        var CHAShippingLineId = $('#CHAShippingLineId').val();
        var OBLType = $('#OBLType').val();
        if (GateInDate == '' || GateInDate == null || ContainerNo == '' || ContainerNo == null || size == '' || size == null) {
            if ($('#DivMsg').hasClass('logErrMsg'))
                $('#DivMsg').removeClass('logErrMsg').addClass('logSuccMsg');
            $('#DivMsg').html("Please Fill Up Gate In Date,Container / CBT No and Size");
        }
        else {
            $.ajax({
                url: '/Import/Wlj_CWCImport/GetInvoiceDtlForSealCutting',
                type: 'GET',
                data: {
                    TransactionDate: TransactionDate, GateInDate: GateInDate, ContainerNo: ContainerNo, size: size,
                    CHAShippingLineId: CHAShippingLineId, OBLType: 2
                },
                success: function (data) {
                    debugger;
                    if (data != null || data != undefined) {
                        debugger;
                        $('#Balance').val(data.Balance);
                        $('#GroundRent').val(data.GroundRent);
                        $('#CGST').val(data.CGST);
                        $('#SGST').val(data.SGST);
                        $('#IGST').val(data.IGST);
                        $('#CGSTPer').val(data.CGSTPer);
                        $('#SGSTPer').val(data.SGSTPer);
                        $('#IGSTPer').val(data.IGSTPer);
                        $('#TotalAmount').val(data.TotalAmount);
                    }
                }
            });
        }
    }

    function Back() {
        $('#DivBody').load('/Import/Wlj_CWCImport/AddSealCuting');
        //$('#DivScList').load('/Import/Wfld_CWCImport/GetListOfSealCuttingDetails');
    }
    //GenerateLstGodown();
    //function GenerateLstGodown() {
    //    debugger;
    //    if ($('#ViewGodownList').val() != null && $('#ViewGodownList').val() != "") {
    //        $('#ViewGodownList').val();
    //        var parties = JSON.parse($('#ViewGodownList').val());
    //        if (parties != null) {
    //            var html = '';
    //            $.each(parties, function (i, item) {
    //                html += '<li id="' + item.GodownId + '" " onclick="GodownHide(this)">' + item.GodownNo + '</li>';
    //            });
    //            $('#lstGodown').html(html);
    //        }
    //        else {
    //            alert("No Data Found");
    //            $('#GodownNo').val('');

    //        }

    //    }

    //}
    function GodownHide(elem) {
        $('#GodownNo').val($(elem).text());
        $('#GodownId').val($(elem).attr('id'))
        debugger;

        $("#GodownModal").modal("hide");
    }
    $('#CHAShippingLinebox').keyup(function () {
        var val = $(this).val().toLowerCase();
        if (val == "")
            $('#lstCHAShippingLine > li').show();
        else {
            $('#lstCHAShippingLine > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(val) >= 0 ? $(this).show() : $(this).hide());
            });
        }
    });
    //GenerateLstCHAShippingLine();
    //function GenerateLstCHAShippingLine() {

    //    if ($('#cha').val() != null && $('#cha').val() != "") {
    //        var j = JSON.stringify($('#cha').val());
    //        var conertedJson = JSON.parse(j);
    //        var parties = JSON.parse($('#cha').val());
    //        if (parties != null) {
    //            var html = '';
    //            $.each(parties, function (i, item) {
    //                html += '<li id="' + item.CHAShippingLineId + '" " onclick="GetCHAShippingLine(this)">' + item.CHAShippingLine + '</li>';
    //            });
    //            $('#lstCHAShippingLine').html(html);
    //        }
    //        else {
    //            alert("No Data Found");
    //            $('#CHAShippingLineNo').val('');
    //        }
    //    }
    //}
    $('#CHAShippingLineSearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("ListOfCHAShippingLineData", "Wlj_CWCImport", new { Area = "Import" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;
                //$('#ViewContainerList').val(data);
                ViewCHAShippingLine = data;
                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.CHAShippingLineId + '" " onclick="GetCHAShippingLine(this)">' + item.CHAShippingLine + '</li>';
                });
                $('#lstCHAShippingLine').html(html);
            }
        });

    });
    function GetCHAShippingLine(elem) {

        $('#CHAShippingLine').val($(elem).text());
        $('#CHAShippingLineId').val($(elem).attr('id'))
        debugger;
        var parties = ViewCHAShippingLine;//JSON.parse($('#cha').val());
        var payby = $.grep(parties, function (item) { return item.CHAShippingLineId == $('#CHAShippingLineId').val(); })[0];


        $('#FolioNo').val(payby.FolioNo);
        CalculateGroundRent();
        $("#CHAShippingLineModal").modal("hide");
    }

    function SealCuttingOnSuccess(data) {
        debugger;
        if (data.Status == 1) {
            ResetAllFields();

            if ($('#DivMsg').hasClass('logErrMsg'))
                $('#DivMsg').removeClass('logErrMsg').addClass('logSuccMsg');
            $('#DivMsg').html(data.Message);
            //$('#btnSave').prop('disabled', true);
            setTimeout(Back, TimeInSeconds);
            //GetSCList();

        }
        else if (data.Status == 2) {
            if ($('#DivMsg').hasClass('logSuccMsg'))
                $('#DivMsg').removeClass('logSuccMsg').addClass('logErrMsg');
            $('#DivMsg').html(data.Message);
            //$('#btnSave').prop('disabled', true);
            setTimeout(Back, TimeInSeconds);
        }
        else if (data.Status == 3) {
            if ($('#DivMsg').hasClass('logSuccMsg'))
                $('#DivMsg').removeClass('logSuccMsg').addClass('logErrMsg');
            $('#DivMsg').html(data.Message);
        }
        else {
            if ($('#DivMsg').hasClass('logSuccMsg'))
                $('#DivMsg').removeClass('logSuccMsg').addClass('logErrMsg');
            $('#DivMsg').html(data.Message);
        }
    }

    function SealCuttingeOnFailure(data) {
        debugger;
        if ($('#DivMsg').hasClass('logErrMsg'))
            $('#DivMsg').removeClass('logErrMsg').addClass('logSuccMsg');
        $('#DivMsg').html("Fail to Save Seal Cutting ");
    }

    function GetSCList() {
        debugger;
        $('#DivScList').load('/Import/Wlj_CWCImport/GetListOfSealCuttingDetails');
    }
    function checkdate() {
        debugger;
        var result = moment($('#TransactionDate').val(), "DD/MM/YYYY", true).isValid();
        if (!result) {
            $('#DivMsgs').html('Incorrect Date');
            setTimeout(function () { $('#DivMsgs').html(''); }, 5000);
            $('#TransactionDate').val('');
        }
    }
    function check() {
        debugger;
        //alert(elm);
        $('#TransactionDate').val($('#TransactionDate').val().replace(/^(\d\d)(\d)$/g, '$1/$2').replace(/^(\d\d\/\d\d)(\d+)$/g, '$1/$2').replace(/[^\d\/]/g, ''));
        //  elm = elm.replace(/^(\d\d)(\d)$/g, '$1/$2').replace(/^(\d\d\/\d\d)(\d+)$/g, '$1/$2').replace(/[^\d\/]/g, '');
    }


</script>


