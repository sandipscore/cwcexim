@model CwcExim.Areas.Export.Models.Dnd_ContainerStuffing
@* @if (ViewBag.ListOfPortOfDischarge != null)
    {
        <input type="hidden" id="txtListOfPortOfDischarge" value="@ViewBag.ListOfPortOfDischarge" />
    }
    else
    {
        <input type="hidden" id="txtListOfPortOfDischarge" value="" />
    }*@

<style>
    #tbleCommodity.dataTable tbody > tr > td {
        cursor: pointer;
    }

    #tbleCha.dataTable tbody > tr > td {
        cursor: pointer;
    }

    #tbleSline.dataTable tbody > tr > td {
        cursor: pointer;
    }

    #tbleExp.dataTable tbody > tr > td {
        cursor: pointer;
    }

    #tblePODis.dataTable tbody > tr > td {
        cursor: pointer;
    }

    .slimScrollDiv {
        height: 300px;
    }

    .table.tblhd {
        border-bottom: 0;
    }
</style>
<script type="text/javascript" src="/scripts/jquery.nicescroll.min.js"></script>
<script>
    var ArrayOfContainerStuff = [];
    var TimeInSeconds;
    var ArrayOfContainer = [];
    $(function () {
        TimeInSeconds = 5000;
        // GetContainerStuffList();
        //GetPortOfDischagelist()
        $('#TblContainerStuffing').hide();
        $('#SearchContainerNo').css("display", "none");
        //$('#BtnPrint').prop("disabled", true);

    });

    $('#StuffingDate').datetimepicker({
        showOn: "button",
        buttonImage: "/Content/images/calendar.png",
        buttonImageOnly: true,
        dateFormat: "dd/mm/yy",
        altField: "#slider_example_4andHalf_alt",
        altFieldTimeOnly: false,
        onClose: function () {
            $(".Date_Img .Error_Msg").text("");
            $('[data-valmsg-for="StuffingDate"]').html('<span></span>');
        }
    });
    //$('#ShippingDate').datepicker({
    //    dateFormat: "dd/mm/yy",
    //    showOn: "button",
    //    buttonImage: "/Content/images/calendar.png",
    //    buttonImageOnly: true,
    //    buttonText: "Select date",
    //    changeMonth: true,
    //    changeYear: true,
    //    showAnima: "fadein",
    //    onClose: function () {
    //        $("[data-valmsg-for='StuffingDate']").html('');
    //    }
    //});


    $(function () {
        $('#slim_scroll_2').slimScroll({
            allowPageScroll: true
        });
    });

    $(function () {
        $('#slim_scroll_1').slimScroll({
            allowPageScroll: true
        });
    });

    $(function () {
        $('#slim_scroll').slimScroll({
            allowPageScroll: true
        });
    });
    $(function () {
        $('#slim_scroll_3').slimScroll({
            allowPageScroll: true
        });
    });


    function ShowList() {
        $('#DivContainerStuffingList').load('/Export/Dnd_CWCExport/GetContainerStuffingListITP');
    }
    function LoadContainerStuffing() {
        $('#DivBody').load('/Export/Dnd_CWCExport/CreateContainerStuffingITP');
    }
    function ResetAllFields() {
        ArrayOfContainerStuff = [];
        ArrayOfContainer = [];
        $('#DivAddContainerStuffing').find('input:text,textarea,select').val('');
        $('#DivAddContainerStuffing #DivContainerStuffingMsg').html('');
        $('#DivAddContainerStuffing #DivContainerStuffingErrMsg').html('');
        $('[data-valmsg-for]').html('<span><span>');
        $('#DivAddContainerStuffing #TblContainerStuffing >tbody').html('');
        $('#TblContainerStuffing').hide();
        $('#DivContainerStuffingMsg').html('');
        $('#DivContainerStuffingErrMsg').html('');
        $('#DivContainerStuffingTblErrMsg').html('');
        $('#ContainerList').html('');
    }

    //---------------------------------------
    $('#SearchReqNo').keyup(function () {
        debugger;
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#DivModalStuffingReqNo .navList > li').show();
        }
        else {
            $('#DivModalStuffingReqNo .navList > li').each(function () {
                debugger;
                var Text = $(this).text().toLowerCase();
                (Text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });
    function StuffRequest(StuffingReqNo, StuffingReqId, RequestDate) {

        debugger;
        @*ArrayOfContainerStuff = [];
        $('#DivAddContainerStuffing').find('input:text,textarea,select').val('');
        $('#DivAddContainerStuffing #DivContainerStuffingMsg').html('');
        $('#DivAddContainerStuffing #DivContainerStuffingErrMsg').html('');
        $('[data-valmsg-for]').html('<span><span>');
        $('#DivAddContainerStuffing #TblContainerStuffing >tbody').html('');
        $('#TblContainerStuffing').hide();
        $('#DivContainerStuffingMsg').html('');
        $('#DivContainerStuffingErrMsg').html('');
        $('#DivContainerStuffingTblErrMsg').html('');
        $('#ContainerList li').html('');
        $('#StuffingDate').val('@Model.StuffingDate');
        var StuffingReqNo = $(this).text();
        var StuffingReqId = $(this).attr('id');
        $('#StuffingReqNo').val(StuffingReqNo);
        $('#StuffingReqId').val(StuffingReqId);
        $('#DivModalStuffingReqNo').modal("hide");*@
        //var StuffingReqNo = $(this).text();
        //var StuffingReqId = $(this).attr('id');
        $('#StuffingReqNo').val(StuffingReqNo);
        $('#StuffingReqId').val(StuffingReqId);
        $('#RequestDate').val(RequestDate);
        $('#DivModalStuffingReqNo').modal("hide");
        GetStuffingDetails(StuffingReqId);
        $('#BtnAddContainerStuff').prop("disabled", true);
        // GetCartingDetails(CartingAppId);
    }
    function AllowOnlyInteger(evt) {
        var CharCode;
        if (window.event) {
            CharCode = window.event.keyCode;
        }
        else {
            CharCode = evt.which;
        }
        if ((CharCode > 47 & CharCode < 58) || CharCode == 8) {
            return true;
        }
        else {
            evt.preventDefault;
            return false;
        }
    }
    function AllowOnlyDecimal(evt) {
        var CharCode;
        if (window.event) {
            CharCode = window.event.keyCode;
        }
        else {
            CharCode = evt.which;
        }
        if ((CharCode > 47 & CharCode < 58) || (CharCode == 46) || CharCode == 8) {
            return true;
        }
        else {
            evt.preventDefault;
            return false;
        }
    }
    function GetStuffingDetails(StuffingReqId) {
        debugger;
        ArrayOfContainerStuff = [];
        $.ajax({
            url: '/Export/Dnd_CWCExport/GetContainerDetOfStuffingReqITP',
            type: 'GET',
            dataType: 'JSON',
            data: { StuffingReqId: StuffingReqId },
            success: function (data) {
                debugger;
                if (data.Status == 1) {
                    $('#ContPOL').val(data.Data.PortId == 0 ? "" : data.Data.PortId);
                    $('#POD').val(data.Data.POD);
                    $.each(data.Data.LstStuffing, function (i, item) {
                        ArrayOfContainerStuff.push(item);
                    });
                    GenerateContainerStuffTable();
                    $('#TblContainerStuffing').show();
                }
            }
        });
    }


    $('#ContainerBox').keyup(function () {
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#ContainerModal .navList > li').show();
        } else {
            $('#ContainerModal .navList > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });
    // $('#ContainerList  li').on("click", function () {
    function FillContainerTxtBox(StuffingReqDtlId, CFSCode, ContainerNo) {
        debugger;
        ContainerNo = ContainerNo.split('-');
        ContainerNo = ContainerNo[0];
        // $('[data-valmsg-for="ContainerNo"]').html('<span></span>');
        $('#DivContainerStuffingTblErrMsg').html('');
        $('#BtnAddContainerStuff').prop("disabled", false);
        $('#ContainerNo').val(ContainerNo);
        $('#CFSCode').val(CFSCode);
        $("#ContainerModal").modal("hide");
        GetContainerDet(StuffingReqDtlId, CFSCode);
    }

    //  });

    function GetContainerNoList(StuffingReqId) {
        $.ajax({
            url: '/Export/Dnd_CWCExport/GetContainerNoOfStuffingReqITP',
            type: 'GET',
            dataType: 'JSON',
            data: { StuffingReqId: StuffingReqId },
            success: function (data) {
                if (data.Status == 1) {
                    var Html = '';
                    $.each(data.Data, function (i, item) {
                        // Html += '<li onclick="FillContainerTxtBox(\'' + item.ContainerNo + '\')">' + item.ContainerNo + '</li>'
                        Html += '<li onclick="FillContainerTxtBox(' + item.StuffingReqDtlId + ',&quot;' + item.CFSCode + '&quot;,&quot;' + item.ContainerNo + '&quot;)">' + item.ContainerNo + '</li>';
                    });
                    $('#ContainerList').html(Html);
                }
            }
        });
    }

    function GetContainerDet(StuffingReqDtlId, CFSCode) {
        debugger;
        var StuffingReqId = $('#StuffingReqId').val();

        $.ajax({
            url: '/Export/Dnd_CWCExport/GetContainerDetOfStuffingReq',
            type: 'GET',
            dataType: 'JSON',
            data: { StuffingReqDtlId: StuffingReqDtlId, CFSCode: CFSCode },
            success: function (data) {
                debugger;
                if (data.Status == 1) {
                    $('#StuffingReqDtlId').val(data.Data.StuffingReqDtlId),
                    $('#ContainerNo').val(data.Data.ContainerNo),
                    $('#CFSCode').val(data.Data.CFSCode),
                    $('#Size').val(data.Data.Size),
                    $('#ShippingLineId').val(data.Data.ShippingLineId),
                    $('#ShippingLine').val(data.Data.ShippingLine),
                    //$('#ShippingSeal').val(data.Data.ShippingSeal),
                    $('#CustomSeal').val(data.Data.CustomSeal),
                    $('#' + data.Data.StuffingType + '').prop("checked", true);
                    // $('#'+Data.StuffingType+').val(data.Data.StuffingType),
                    $('#ShippingBillNo').val(data.Data.ShippingBillNo),
                    $('#ShippingDate').val(data.Data.ShippingDate),
                    $('#CHAId').val(data.Data.CHAId),
                    $('#ExporterId').val(data.Data.ExporterId),
                    $('#CHA').val(data.Data.CHA),
                    $('#Exporter').val(data.Data.Exporter),
                    $('#CargoDescription').val(data.Data.CargoDescription),
                    $('#Consignee').val(data.Data.Consignee),
                     $('#MarksNo').val(data.Data.MarksNo),
                     $('#Fob').val(data.Data.Fob),
                     $('#StuffQuantity').val(data.Data.StuffQuantity),
                     $('#StuffWeight').val(data.Data.StuffWeight),
                    $('#StuffingReqDtlId').val(data.Data.StuffingReqDtlId),
                    $('#RequestDate').val(data.Data.RequestDate),
                    $('#SQM').val(data.Data.SQM),
                    $('#spacetype').val(data.Data.spacetype),
                    $('#RefType').val(data.Data.RefType)
                    //$('#ContainerList #' + $('#ShippingBillNo').val()).remove();

                }
            }
        });
    }

    function SaveContainerStuffingDtl() {
        debugger;
        $('#DivContainerStuffingTblErrMsg').html('');
        var c = 0;
        $.each(ArrayOfContainerStuff, function (i, item) {
            debugger;
            if (item.ContainerNo == $('#ContainerNo').val() && item.ShippingBillNo == $('#ShippingBillNo').val()) {
                c = 1;
            }

            //Html += '<tr><td class="text-center">' + (i + 1) + '</td><td>' + item.ContainerNo + '</td><td>' + item.ShippingBillNo + '</td><td>' + item.ShippingDate + '</td><td>' + item.Exporter + '</td><td>' + item.StuffQuantity + '</td><td>' + item.StuffWeight + '</td><td class="text-center"><a href="#" onclick="EditContainerStuff(' + i + ')"><i class="fa fa fa-pencil-square Edit" aria-hidden="true"></i></a></td><td class="text-center"><a href="#" onclick="ViewContainerStuff(' + i + ')"><i class="fa fa-search-plus" aria-hidden="true"></i></a></td><td class="text-center"><a href="#" onclick="DeleteContainerStuff(' + i + ')"><i class="fa fa-window-close-o Delete" aria-hidden="true"></i></a></td></tr>';
        });
        if (c == 1) {
            alert("Container /CBT No Already Added.");
            ResetConatinerStuffDet();
            return false;
        }
        if ($('#ContainerNo').val() != "") {
            if ($('#Fob').val() == "") {
                $('#ErrFob').html('Fill Out This Field');
                return false;
            }
            if ($('#ShippingBillNo').val() == "") {
                $('#ErrBill').html('Fill Out This Field');
                return false;
            }
            if ($('#CHA').val() == "") {
                $('#ErrCHA').html('Fill Out This Field');
                return false;
            }
            if ($('#Exporter').val() == "") {
                $('#ErrExporter').html('Fill Out This Field');
                return false;
            }
            if ($('#Consignee').val() == "") {
                $('#ErrConsignee').html('Fill Out This Field');
                return false;
            }
            if ($('#StuffQuantity').val() == "") {
                $('#ErrQuantity').html('Fill Out This Field');
                return false;
            }
            if ($('#StuffWeight').val() == "") {
                $('#ErrWeight').html('Fill Out This Field');
                return false;
            }
            debugger;
            var StuffingType = $('#FCL').prop("checked") == true ? "FCL" : "LCL"
            var ContainerStuffingDtl = {
                "ContainerNo": $('#ContainerNo').val(),
                "CFSCode": $('#CFSCode').val(),
                "Size": $('#Size').val(),
                "ShippingLineId": $('#ShippingLineId').val(),
                "ShippingLine": $('#ShippingLine').val(),
                "ShippingSeal": $('#ShippingSeal').val(),
                "CustomSeal": $('#CustomSeal').val(),
                "StuffingType": StuffingType,
                "ShippingBillNo": $('#ShippingBillNo').val(),
                "ShippingDate": $('#ShippingDate').val(),
                "CHAId": $('#CHAId').val(),
                "ExporterId": $('#ExporterId').val(),
                "CHA": $('#CHA').val(),
                "Exporter": $('#Exporter').val(),
                "CargoDescription": $('#CargoDescription').val(),
                "Consignee": $('#Consignee').val(),
                "MarksNo": $('#MarksNo').val() == "" ? 0 : $('#MarksNo').val(),
                "Fob": $('#Fob').val() == "" ? 0 : $('#Fob').val(),
                "StuffQuantity": $('#StuffQuantity').val() == "" ? 0 : $('#StuffQuantity').val(),
                "StuffWeight": $('#StuffWeight').val() == "" ? 0 : $('#StuffWeight').val(),
                "StuffingReqDtlId": $('#StuffingReqDtlId').val(),
                "Insured": $('#Insured').is(':checked') == true ? 1 : 0,
                "Refer": $('#Refer').is(':checked') == true ? 1 : 0,
                "IsOdc": $('#IsOdc').is(':checked') == true ? 1 : 0,
                "SQM": $('#SQM').val() == "" ? 0 : $('#SQM').val(),
                "RefType": $('#RefType').val()
            }


            ArrayOfContainerStuff.push(ContainerStuffingDtl);

            var ContainerDtl = {
                "ContainerNo": $('#ContainerNo').val(),
                "CFSCode": $('#CFSCode').val(),
                "ShippingBillNo": $('#ShippingBillNo').val(),
                "ShippingBillDate": $('#ShippingDate').val(),
                "Size": $('#Size').val(),
                "Fob": $('#Fob').val(),
                "StuffingReqId": $('#StuffingReqId').val(),
                "StuffWeight": $('#StuffWeight').val(),
                "Insured": $('#Insured').is(':checked') == true ? 1 : 0,
                "Refer": $('#Refer').is(':checked') == true ? 1 : 0,
                "IsOdc": $('#IsOdc').is(':checked') == true ? 1 : 0,


                "SQM": $('#SQM').val(),
                "spacetype": $('#spacetype').val()
            }
            ArrayOfContainer.push(ContainerDtl);
            $.each(ArrayOfContainerStuff, function (i, item) {
                debugger;
                if (item.ContainerNo == $('#ContainerNo').val()) {
                    item.ShippingSeal = $('#ShippingSeal').val();
                    item.CustomSeal = $('#CustomSeal').val();
                    item.Refer = $('#Refer').is(':checked') == true ? 1 : 0;
                    item.IsOdc = $('#IsOdc').is(':checked') == true ? 1 : 0
                }
            });
            GenerateContainerStuffTable();
            ResetConatinerStuffDet();
            $('#BtnAddContainerStuff').prop("disabled", true);
        }

        else {
            $('#DivContainerStuffingTblErrMsg').html('Please Select A Container No In Order To Add Details');
            // $('[data-valmsg-for="ContainerNo"]').html('<span>Fill Out This Field</span>');

        }
    }

    function ResetConatinerStuffDet() {
        debugger;
        var POD = $('#POD').val();
        var PODischarge = $('#PODischarge').val();
        $('#DivContainerStuffingDetails').find('input:text,textarea').val('');
        $('#DivAddContainerStuffing #Size').val('');
        $('#FCL').prop("checked", false);
        $('#LCL').prop("checked", false);
        $('#DivContainerStuffingDetails #Insured').prop("checked", false);
        $('#DivContainerStuffingDetails #Refer').prop("checked", false);
        $('#DivContainerStuffingDetails #IsOdc').prop("checked", false);
        $('#DivContainerNo').find('input:text').val('');
        $('#DivContainerSize').find('input:text').val('');
        $('#DivShippingLine').find('input:text').val('');
        $('#DivShippingSeal').find('input:text').val('');
        $('#SearchContainerNo').css("display", "none");
        $('#TblShippingIns>tbody').html('');
        $('#TblShippingGen>tbody').html('');
        $('#POD').val(POD);
        $('#PODischarge').val(PODischarge);
    }

    function GenerateContainerStuffTable() {
        debugger;
        $('#TblContainerStuffing').hide();
        var Html = '';
        var contNo = '';
        if (ArrayOfContainerStuff.length != 0) {
            $.each(ArrayOfContainerStuff, function (i, item) {
                debugger;
                Html += '<tr><td class="text-center">' + (i + 1) + '</td><td>' + item.ContainerNo + '</td><td>' + item.ShippingBillNo + '</td><td>' + item.ShippingDate + '</td><td>' + item.Exporter + '</td><td>' + item.StuffQuantity + '</td><td>' + item.StuffWeight + '</td><td class="text-center"><a href="#" onclick="EditContainerStuff(' + i + ')"><i class="fa fa fa-pencil-square Edit" aria-hidden="true"></i></a></td><td class="text-center"><a href="#" onclick="ViewContainerStuff(' + i + ')"><i class="fa fa-search-plus" aria-hidden="true"></i></a></td></tr>';
                contNo = item.ContainerNo;
            });
            //if ($('#TblContainerStuffing>tbody').find('td').eq(1).text() != contNo)
            //{
            //    $('#TblContainerStuffing>tbody').html(Html);
            //}
            //else {
            //    alert("Container No already added.");
            //}



            $('#TblContainerStuffing>tbody').html(Html);
            $('#TblContainerStuffing').show();
        }
    }

    function EditContainerStuff(Index) {
        debugger;
        //if ($('#BtnAddContainerStuff').prop("disabled") == true) {
        $('#SearchContainerNo').css("display", "block");
        $('#BtnAddContainerStuff').prop("disabled", false);
        $('#ContainerNo').val(ArrayOfContainerStuff[Index].ContainerNo);
        $('#CFSCode').val(ArrayOfContainerStuff[Index].CFSCode);
        $('#Size').val(ArrayOfContainerStuff[Index].Size);
        $('#ShippingLineId').val(ArrayOfContainerStuff[Index].ShippingLineId);
        $('#ShippingLine').val(ArrayOfContainerStuff[Index].ShippingLine);
        $('#ShippingSeal').val(ArrayOfContainerStuff[Index].ShippingSeal);
        $('#CustomSeal').val(ArrayOfContainerStuff[Index].CustomSeal);
        $('#' + ArrayOfContainerStuff[Index].StuffingType + '').prop("checked", true);
        $('#ShippingBillNo').val(ArrayOfContainerStuff[Index].ShippingBillNo);
        $('#ShippingDate').val(ArrayOfContainerStuff[Index].ShippingDate);
        $('#CHAId').val(ArrayOfContainerStuff[Index].CHAId);
        $('#ExporterId').val(ArrayOfContainerStuff[Index].ExporterId);
        $('#CHA').val(ArrayOfContainerStuff[Index].CHA);
        $('#Exporter').val(ArrayOfContainerStuff[Index].Exporter);
        $('#CargoDescription').val(ArrayOfContainerStuff[Index].CargoDescription);
        $('#Consignee').val(ArrayOfContainerStuff[Index].Consignee);
        $('#MarksNo').val(ArrayOfContainerStuff[Index].MarksNo);
        $('#Fob').val(ArrayOfContainerStuff[Index].Fob);
        $('#StuffQuantity').val(ArrayOfContainerStuff[Index].StuffQuantity);
        $('#StuffWeight').val(ArrayOfContainerStuff[Index].StuffWeight);
        $('#StuffingReqDtlId').val(ArrayOfContainerStuff[Index].StuffingReqDtlId);
        $('#SQM').val(ArrayOfContainerStuff[Index].SQM);
        $('#RefType').val(ArrayOfContainerStuff[Index].RefType);
        $('#Remarks').val(ArrayOfContainerStuff[Index].Remarks);
        ArrayOfContainerStuff[Index].Insured == 1 ? $('#Insured').prop("checked", true) : $('#Insured').prop("checked", false);
        ArrayOfContainerStuff[Index].Refer == 1 ? $('#Refer').prop("checked", true) : $('#Refer').prop("checked", false);
        ArrayOfContainerStuff[Index].IsOdc == 1 ? $('#IsOdc').prop("checked", true) : $('#IsOdc').prop("checked", false);
        ArrayOfContainerStuff.splice(Index, 1);
        ArrayOfContainer.splice(Index, 1);
        GenerateContainerStuffTable();
        // ResetAllInvoiceFields();
        //}
        //else {
        //    $('#DivContainerStuffingTblErrMsg').html('Please Add The Above Records');
        //}
    }

    function DeleteContainerStuff(Index) {
        debugger;
        ArrayOfContainerStuff.splice(Index, 1);
        ArrayOfContainer.splice(Index, 1);
        GenerateContainerStuffTable();
        //ResetAllInvoiceFields();

    }

    function ViewContainerStuff(Index) {
        debugger;
        // if ($('#BtnAddContainerStuff').prop("disabled") == true) {
        $('#BtnAddContainerStuff').prop("disabled", true);
        // if ($('#DivShippingDetails #Exporter').val() == '' || $('#DivShippingDetails #Exporter').prop("disabled") == true) {
        //$('#DivShippingDetails').find('input').prop("disabled", true);
        $('#SearchContainerNo').css("display", "none");
        $('#ContainerNo').val(ArrayOfContainerStuff[Index].ContainerNo);
        $('#CFSCode').val(ArrayOfContainerStuff[Index].CFSCode);
        $('#Size').val(ArrayOfContainerStuff[Index].Size);
        $('#ShippingLineId').val(ArrayOfContainerStuff[Index].ShippingLineId);
        $('#ShippingLine').val(ArrayOfContainerStuff[Index].ShippingLine);
        $('#ShippingSeal').val(ArrayOfContainerStuff[Index].ShippingSeal);
        $('#CustomSeal').val(ArrayOfContainerStuff[Index].CustomSeal);
        $('#' + ArrayOfContainerStuff[Index].StuffingType + '').prop("checked", true);
        // $('#StuffingType').val(ArrayOfCartingRegDtl[Index].StuffingType);
        $('#ShippingBillNo').val(ArrayOfContainerStuff[Index].ShippingBillNo);
        $('#ShippingDate').val(ArrayOfContainerStuff[Index].ShippingDate);
        $('#CHAId').val(ArrayOfContainerStuff[Index].CHAId);
        $('#ExporterId').val(ArrayOfContainerStuff[Index].ExporterId);
        $('#CHA').val(ArrayOfContainerStuff[Index].CHA);
        $('#Exporter').val(ArrayOfContainerStuff[Index].Exporter);
        $('#CargoDescription').val(ArrayOfContainerStuff[Index].CargoDescription);
        $('#Consignee').val(ArrayOfContainerStuff[Index].Consignee);
        $('#MarksNo').val(ArrayOfContainerStuff[Index].MarksNo);
        $('#Fob').val(ArrayOfContainerStuff[Index].Fob);
        $('#StuffQuantity').val(ArrayOfContainerStuff[Index].StuffQuantity);
        $('#StuffWeight').val(ArrayOfContainerStuff[Index].StuffWeight);
        $('#StuffingReqDtlId').val(ArrayOfContainerStuff[Index].StuffingReqDtlId);
        $('#SQM').val(ArrayOfContainerStuff[Index].SQM);
        $('#RefType').val(ArrayOfContainerStuff[Index].RefType);
        $('#Remarks').val(ArrayOfContainerStuff[Index].Remarks);
        // $('#Insured').val(ArrayOfContainerStuff[Index].Insured);
        ArrayOfContainerStuff[Index].Insured == 1 ? $('#Insured').prop("checked", true) : $('#Insured').prop("checked", false);
        ArrayOfContainerStuff[Index].Refer == 1 ? $('#Refer').prop("checked", true) : $('#Refer').prop("checked", false);
        ArrayOfContainerStuff[Index].IsOdc == 1 ? $('#IsOdc').prop("checked", true) : $('#IsOdc').prop("checked", false);

        // }
        //else {
        //    $('#DivContainerStuffingTblErrMsg').html('Please Add The Above Records');
        //}

    }

    $('#BtnSaveContainerStuff').on("click", function () {
        debugger;
        $('#BtnSaveContainerStuff').prop("disabled", true);
        $("#GENSPPartyCode").removeAttr('required');
        var Radio = $('input[name=Mode]:checked').val();
        if (Radio == "By Road") {
            $('#TransportMode').val(2);
            //document.getElementById("Road").checked = true;
        }
        else {
            $('#TransportMode').val(1);
            //document.getElementById("Train").checked = true;
        }

        $('#DivContainerStuffingTblErrMsg').html('');
        if ($('#ContainerNo').val() == "" && $('#TblContainerStuffing >tbody').html() != "") {
            if (ArrayOfContainerStuff.length != 0) {
                $('#StuffingXML').val(JSON.stringify(ArrayOfContainerStuff));
            }
        }
        else if ($('#ContainerNo').val() != "" && $('#BtnAddContainerStuff').prop("disabled") == true) {
            if (ArrayOfContainerStuff.length != 0) {
                $('#StuffingXML').val(JSON.stringify(ArrayOfContainerStuff));
            }
        }

        else {
            $('#DivContainerStuffingTblErrMsg').html('Please Add The Above Records');
            $('#BtnSaveContainerStuff').prop("disabled", false);
            return false;
        }

        var jsonCon = [];
        $('#ContOrigin').val($('#Origin').val());
        $('#ContVia').val($('#Via').val());
        $('#TblContainerStuffing tbody tr').each(function () {
            var ContainerNo = $(this).find("td").eq(1).text();
            jsonCon.push({ 'Con': ContainerNo });


        });
        for (var i = 0; i < jsonCon.length; i++) {
            debugger;
            if (jsonCon[0].Con != jsonCon[i].Con) {
                alert("Only Single Container can be stuffed for a single request");
                return false;
            }
        }
        var isValid = $('#frmContainerStuffing').valid();
        if (isValid) {
            var Status = confirm("Are you sure you want to Save?");
            if (Status == true) {
                $('#frmContainerStuffing').submit();
            }
            else {
                $('#BtnSaveContainerStuff').prop("disabled", false);
                return false;
            }

        }
        else {
            $('#BtnSaveContainerStuff').prop("disabled", false);
            alert("Select Port Of Discharge");
        }
    });
    //if (jsonCon.ContainerNo)

    // var InvoiceNoGRE = '';
    // var InvoiceNoINS = '';
    // var InvoiceNoSTO = '';
    // var InvoiceNoHND = '';
    // var InvoiceNoGENSP = '';
    function ContainerStuffingOnSuccess(data) {
        debugger;
        if (data.Status == 1) {

            $('#BtnSaveContainerStuff').prop("disabled", true);
            //setTimeout(LoadContainerStuffing, TimeInSeconds);
            alert("Container Stuffing Saved Succesfully");
            LoadContainerStuffing();
            $('#TblShippingIns>tbody').html('');
            $('#TblShippingGen>tbody').html('');
        }
        else if (data.Status == 2 || data.Status == 3) {

            alert(data.Message);
            //setTimeout(LoadContainerStuffing, TimeInSeconds);
            //GetContainerStuffList();
        }
        else {
            $('#DivContainerStuffingErrMsg').html(data.Message);
        }
    }

    function ContainerStuffingOnFailure() { }
    $('#StuffingDate').on("change", function () {
        //ResetAllInvoiceFields();
    });
    function TransPortModeFunc() {
        var Radio = $('input[name=Mode]:checked').val();
        if (Radio == "By Road") {
            $('#TransportMode').val(2);
            document.getElementById("Road").checked = true;
        }
        else {
            //$('#TransportMode').val(1);
            //document.getElementById("Train").checked = true;
        }
    }



    function SelectCHA(CHAId, CHAName) {
        debugger;
        $('#CHA').val(CHAName);
        $('#CHAId').val(CHAId);
        $("#CHAModal").modal("hide");
        $('#Chabox').val('');
        LoadCHA();
    }

    var Page = 0;

    function LoadMoreCHA() {
        debugger;
        $.ajax({
            url: '/Export/Dnd_CWCExport/LoadCHAList',
            type: 'GET',
            data: { PartyCode: "", Page: Page + 1 },
            success: function (data) {
                if (data.Status == 1) {
                    debugger;
                    var html = '';
                    $.each(data.Data.lstCHA, function (item, elem) {
                        debugger;
                        html += '<tr onclick="SelectCHA(' + elem.CHAId + ',&quot;' + elem.CHAName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.CHAName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                    });
                    if (Page == -1)
                        $('#tbleCha tbody').html(html);
                    else
                        $('#tbleCha tbody').append(html);
                    Page++;

                    debugger;
                    if (data.Data.State == true)
                        $('#btnLoadCHA').prop('disabled', false);
                    else $('#btnLoadCHA').prop('disabled', true);
                }
            }
        });
    }

    function LoadCHA() {
        debugger;
        Page = 0;
        $.ajax({
            url: '/Export/Dnd_CWCExport/LoadCHAList',
            type: 'GET',
            data: { PartyCode: "", Page: Page },
            success: function (data) {
                if (data.Status == 1) {
                    debugger;
                    var html = '';
                    $.each(data.Data.lstCHA, function (item, elem) {
                        debugger;
                        html += '<tr onclick="SelectCHA(' + elem.CHAId + ',&quot;' + elem.CHAName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.CHAName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                    });

                    $('#tbleCha tbody').html(html);

                    if (data.Data.State == true)
                        $('#btnLoadCHA').prop('disabled', false);
                    else $('#btnLoadCHA').prop('disabled', true);
                }
            }
        });
    }

    function SearchChaByPartyCode() {
        debugger;
        if ($('#Chabox').val() != '') {
            $.ajax({
                url: '/Export/Dnd_CWCExport/CHASearchByPartyCode',
                type: 'GET',
                data: { PartyCode: $('#Chabox').val() },
                success: function (data) {
                    debugger;
                    if (data.Status == 1) {
                        var html = '';
                        $.each(data.Data.lstCHA, function (item, elem) {
                            html += '<tr onclick="SelectCHA(' + elem.CHAId + ',&quot;' + elem.CHAName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.CHAName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                        });
                        $('#tbleCha tbody').html('');
                        $('#tbleCha tbody').html(html);
                        $('#btnLoadCHA').prop('disabled', false);
                        Page = -1;
                    }
                    else {
                        $('#tbleCha tbody').html('');
                        Page = -1;
                        $('#btnLoadCHA').prop('disabled', false);
                    }

                }
            });
        }
        else
            LoadCHA();
    }

    function CloseCHA() {
        $('#Chabox').val('');
        $("#CHAModal").modal("hide");
        LoadCHA();
    }


    var Page = 0;
    function LoadMoreEximTrader() {
        debugger;
        $.ajax({
            url: '/Export/Dnd_CWCExport/LoadShippingLineList',
            type: 'GET',
            data: { PartyCode: "", Page: Page + 1 },
            success: function (data) {
                if (data.Status == 1) {
                    debugger;
                    var html = '';
                    $.each(data.Data.lstShippingLine, function (item, elem) {
                        debugger;
                        html += '<tr onclick="SelectShippingLine(' + elem.ShippingLineId + ',&quot;' + elem.ShippingLineName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ShippingLineName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                    });
                    if (Page == -1)
                        $('#tbleSline tbody').html(html);
                    else
                        $('#tbleSline tbody').append(html);
                    Page++;

                    if (data.Data.State == true)
                        $('#btnLoadMore').prop('disabled', false);
                    else $('#btnLoadMore').prop('disabled', true);
                }
            }
        });
    }

    function SearchByPartyCode() {
        if ($('#ShpngLinebox').val() != '') {
            $.ajax({
                url: '/Export/Dnd_CWCExport/SearchShippingLineByPartyCode',
                type: 'GET',
                data: { PartyCode: $('#ShpngLinebox').val() },
                success: function (data) {
                    if (data.Status == 1) {
                        var html = '';
                        $.each(data.Data.lstShippingLine, function (item, elem) {
                            html += '<tr onclick="SelectShippingLine(' + elem.ShippingLineId + ',&quot;' + elem.ShippingLineName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ShippingLineName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                        });
                        $('#tbleSline tbody').html('');
                        $('#tbleSline tbody').html(html);
                        $('#btnLoadMore').prop('disabled', false);
                        Page = -1;
                    }
                    else {
                        $('#tbleSline tbody').html('');
                        Page = -1;
                        $('#btnLoadMore').prop('disabled', false);
                    }

                }
            });
        }
        else
            LoadEximTrader();
    }

    function SelectShippingLine(ShippingLineId, ShippingLineName) {
        debugger;
        $('#ShippingLine').val(ShippingLineName);
        $('#ShippingLineId').val(ShippingLineId);
        $("#ShippingLineModal").modal("hide");
        $('#ShpngLinebox').val('');
        LoadEximTrader();
    }


    function LoadEximTrader() {
        Page = 0;
        $.ajax({
            url: '/Export/Dnd_CWCExport/LoadShippingLineList',
            type: 'GET',
            data: { PartyCode: "", Page: Page },
            success: function (data) {
                if (data.Status == 1) {
                    debugger;
                    var html = '';
                    $.each(data.Data.lstShippingLine, function (item, elem) {
                        debugger;
                        html += '<tr onclick="SelectShippingLine(' + elem.ShippingLineId + ',&quot;' + elem.ShippingLineName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ShippingLineName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                    });
                    $('#tbleSline tbody').html(html);

                    if (data.Data.State == true)
                        $('#btnLoadMore').prop('disabled', false);
                    else $('#btnLoadMore').prop('disabled', true);
                }
            }
        });
    }

    function CloseEximTrader() {
        $('#ShpngLinebox').val('');
        $("#ShippingLineModal").modal("hide");
        LoadEximTrader();
    }



    function SelectExporter(ExporterId, ExporterName) {
        debugger;
        $('#Exporter').val(ExporterName);
        $('#ExporterId').val(ExporterId);
        $("#ExporterModal").modal("hide");
        $('#Expbox').val('');
        LoadExporter();
    }


    var Page = 0;

    function LoadMoreExp() {
        debugger;
        $.ajax({
            url: '/Export/Dnd_CWCExport/LoadExporterList',
            type: 'GET',
            data: { PartyCode: "", Page: Page + 1 },
            success: function (data) {
                if (data.Status == 1) {
                    debugger;
                    var html = '';
                    $.each(data.Data.lstExp, function (item, elem) {
                        debugger;
                        html += '<tr onclick="SelectExporter(' + elem.ExporterId + ',&quot;' + elem.ExporterName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ExporterName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                    });
                    if (Page == -1)
                        $('#tbleExp tbody').html(html);
                    else
                        $('#tbleExp tbody').append(html);
                    Page++;

                    debugger;
                    if (data.Data.State == true)
                        $('#btnLoadExp').prop('disabled', false);
                    else $('#btnLoadExp').prop('disabled', true);
                }
            }
        });
    }

    function LoadExporter() {
        debugger;
        Page = 0;
        $.ajax({
            url: '/Export/Dnd_CWCExport/LoadExporterList',
            type: 'GET',
            data: { PartyCode: "", Page: Page },
            success: function (data) {
                if (data.Status == 1) {
                    debugger;
                    var html = '';
                    $.each(data.Data.lstExp, function (item, elem) {
                        debugger;
                        html += '<tr onclick="SelectExporter(' + elem.ExporterId + ',&quot;' + elem.ExporterName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ExporterName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                    });

                    $('#tbleExp tbody').html(html);

                    if (data.Data.State == true)
                        $('#btnLoadExp').prop('disabled', false);
                    else $('#btnLoadExp').prop('disabled', true);
                }
            }
        });
    }

    function SearchExpByPartyCode() {
        debugger;
        if ($('#Expbox').val() != '') {
            $.ajax({
                url: '/Export/Dnd_CWCExport/SearchExporterByPartyCode',
                type: 'GET',
                data: { PartyCode: $('#Expbox').val() },
                success: function (data) {
                    debugger;
                    if (data.Status == 1) {
                        var html = '';
                        $.each(data.Data.lstExp, function (item, elem) {
                            html += '<tr onclick="SelectExporter(' + elem.ExporterId + ',&quot;' + elem.ExporterName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ExporterName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                        });
                        $('#tbleExp tbody').html('');
                        $('#tbleExp tbody').html(html);
                        $('#btnLoadExp').prop('disabled', false);
                        Page = -1;
                    }
                    else {
                        $('#tbleExp tbody').html('');
                        Page = -1;
                        $('#btnLoadExp').prop('disabled', false);
                    }

                }
            });
        }
        else
            LoadExporter();
    }

    function CloseExporter() {
        $('#Expbox').val('');
        $("#ExporterModal").modal("hide");
        LoadExporter();
    }

    function SelectPortOfDischarge(PODId, PODName) {
        debugger;
        $('#PODischarge').val(PODName);
        $('#PODischargeID').val(PODId);
        $("#PODisModal").modal("hide");
        $('#PODisbox').val('');
        LoadPortOfDischarge();
    }

    var Page = 0;

    function LoadMorePortOfDischarge() {
        debugger;
        $.ajax({
            url: '/Export/Dnd_CWCExport/LoadPortOfDischargeList',
            type: 'GET',
            data: { PortName: "", Page: Page + 1 },
            success: function (data) {
                if (data.Status == 1) {
                    debugger;
                    var html = '';
                    $.each(data.Data.lstPODischarge, function (item, elem) {
                        debugger;
                        html += '<tr onclick="SelectPortOfDischarge(' + elem.PODId + ',&quot;' + elem.PODName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.PODName + '</td></tr>';
                    });
                    if (Page == -1)
                        $('#tblePODis tbody').html(html);
                    else
                        $('#tblePODis tbody').append(html);
                    Page++;

                    debugger;
                    if (data.Data.State == true)
                        $('#btnLoadPODis').prop('disabled', false);
                    else $('#btnLoadPODis').prop('disabled', true);
                }
            }
        });
    }

    function LoadPortOfDischarge() {
        debugger;
        Page = 0;
        $.ajax({
            url: '/Export/Dnd_CWCExport/LoadPortOfDischargeList',
            type: 'GET',
            data: { PortName: "", Page: Page },
            success: function (data) {
                if (data.Status == 1) {
                    debugger;
                    var html = '';
                    $.each(data.Data.lstPODischarge, function (item, elem) {
                        debugger;
                        html += '<tr onclick="SelectPortOfDischarge(' + elem.PODId + ',&quot;' + elem.PODName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.PODName + '</td></tr>';
                    });

                    $('#tblePODis tbody').html(html);

                    if (data.Data.State == true)
                        $('#btnLoadPODis').prop('disabled', false);
                    else $('#btnLoadPODis').prop('disabled', true);
                }
            }
        });
    }

    function SearchPortOfDischarge() {
        debugger;
        if ($('#PODisbox').val() != '') {
            $.ajax({
                url: '/Export/Dnd_CWCExport/PortOfDischargeSearchByPortName',
                type: 'GET',
                data: { PortName: $('#PODisbox').val() },
                success: function (data) {
                    debugger;
                    if (data.Status == 1) {
                        var html = '';
                        $.each(data.Data.lstPODischarge, function (item, elem) {
                            html += '<tr onclick="SelectPortOfDischarge(' + elem.PODId + ',&quot;' + elem.PODName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.PODName + '</td></tr>';
                        });
                        $('#tblePODis tbody').html('');
                        $('#tblePODis tbody').html(html);
                        $('#btnLoadPODis').prop('disabled', false);
                        Page = -1;
                    }
                    else {
                        $('#tblePODis tbody').html('');
                        Page = -1;
                        $('#btnLoadPODis').prop('disabled', false);
                    }

                }
            });
        }
        else
            LoadPortOfDischarge();
    }

    function ClosePortOfDischarge() {
        $('#PODisbox').val('');
        $("#PODisModal").modal("hide");
        LoadPortOfDischarge();
    }

    function debounce(func, wait, immediate) {
        var timeout;
        return function () {
            var context = this, args = arguments;
            var later = function () {
                timeout = null;
                if (!immediate) func.apply(context, args);
            };
            var callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) func.apply(context, args);
        };
    };
    document.getElementById('ShpngLinebox').addEventListener('keyup', debounce(function () {
        SearchByPartyCode();
    }, 800));

    document.getElementById('Chabox').addEventListener('keyup', debounce(function () {
        SearchChaByPartyCode();
    }, 800));

    document.getElementById('Expbox').addEventListener('keyup', debounce(function () {
        SearchExpByPartyCode();
    }, 800));
    document.getElementById('PODisbox').addEventListener('keyup', debounce(function () {
        SearchPortOfDischarge();
    }, 800));


    function SearchStuffing() {
        debugger;
        if ($('#ContSearch').val().trim() == "" || $('#ContSearch').val().trim() == null) {
            ShowList();
        }
        else {
            $('#DivContainerStuffingList').load('/Export/Dnd_CWCExport/SearchContainerStuffingITP?ContNo=' + $('#ContSearch').val().trim());

        }
    }

</script>

@{
    AjaxOptions options = new AjaxOptions();
    //options.Confirm = "Are You Sure You Want To Save?";
    options.OnSuccess = "ContainerStuffingOnSuccess";
    options.OnFailure = "ContainerStuffingOnFailure";
    options.InsertionMode = InsertionMode.InsertAfter;
}


<div class="container-fluid">
    <div style="width:90%;margin-left:auto;margin-right:auto;">
        <div class="row clearfix">
            @using (Ajax.BeginForm("AddEditContainerStuffingDetITP", "Dnd_CWCExport", options, new { @id = "frmContainerStuffing" }))
            {
                @Html.AntiForgeryToken()

                <div class="panel with-nav-tabs panel-primary cwc_panel">
                    <div class="panel-heading cwc_panel_heading">
                        <ul class="nav nav-tabs" id="DivTabs">
                            <li class="active"><a href="#DivContainerStuffing" data-toggle="tab">Container /CBT Stuffing</a></li>
                            @*<li><a href="#DivInvoice" data-toggle="tab">Invoice</a></li>*@
                        </ul>
                    </div>

                    <div class="panel-body">
                        <div class="tab-content">
                            <div class="tab-pane fade in active" id="DivContainerStuffing">
                                <div id="DivAddContainerStuffing">
                                    @Html.HiddenFor(m => m.StuffingXML)
                                    @Html.HiddenFor(m => m.StuffingReqId)
                                    @Html.Hidden("StuffingReqDtlId")
                                    @Html.Hidden("RefType")
                                    @Html.HiddenFor(m => m.TransportMode)
                                    @Html.HiddenFor(m => m.ContOrigin)
                                    @Html.HiddenFor(m => m.ContVia)
                                    @Html.HiddenFor(m => m.SQM)
                                    @Html.HiddenFor(m => m.spacetype)
                                    @*@Html.HiddenFor(m=>m.PODischargeID)*@
                                    @*<input id="txtListOfPortOfDischarge" type="text" class="hidden" style="display:none;" value="@ViewBag.ListOfPortOfDischarge" />*@
                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Transport Mode:</label>
                                            </div>
                                            <div class="col-md-1-5">
                                                <div class="boolean-container">
                                                    @Html.RadioButton("Mode", "By Road", new { @id = "Road", @checked = true, @onclick = "TransPortModeFunc();" })
                                                    <label for="Road"><i class="circle"></i><span>By Road</span></label>
                                                    @*@Html.RadioButton("Mode", "By Train", new { @id = "Train", @onclick = "TransPortModeFunc();" })
                                                        <label for="Train"><i class="circle"></i><span>By Train</span></label>*@
                                                </div>
                                            </div>
                                            <div class="col-md-1-5">
                                                <div class="boolean-container">
                                                    @*@Html.RadioButton("Mode", "By Road", new { @id = "Road", @checked = true, @onclick = "TransPortModeFunc();" })
                                                        <label for="Road"><i class="circle"></i><span>By Road</span></label>*@
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Request No:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <span class="ReQSimbol">*</span>
                                                @Html.TextBoxFor(m => m.StuffingReqNo, new { @class = "form-control input-sm", @readonly = true })
                                                <span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#DivModalStuffingReqNo"></i></span>
                                                @Html.ValidationMessageFor(m => m.StuffingReqNo, "", new { @class = "Error_Msg" })
                                            </div>
                                            <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                <label>Request Date:</label>
                                            </div>
                                            <div class="col-md-2 col_cus_2_5 Date_Img">
                                                @Html.TextBoxFor(m => m.RequestDate, new { @class = "form-control input-sm", @readonly = true })
                                                @Html.ValidationMessageFor(m => m.RequestDate, "", new { @class = "Error_Msg" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Stuffing No:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                @Html.TextBoxFor(m => m.StuffingNo, new { @class = "form-control input-sm", @readonly = true })
                                                @Html.ValidationMessageFor(m => m.StuffingNo, "", new { @class = "Error_Msg" })
                                            </div>
                                            <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                <label>Stuffing Date:</label>
                                            </div>
                                            <div class="col-md-2 col_cus_2_5 Date_Img">
                                                @Html.TextBoxFor(m => m.StuffingDate, new { @class = "form-control input-sm", @readonly = true, Value = DateTime.Now.ToString("dd/MM/yyyy HH:mm") })
                                                @Html.ValidationMessageFor(m => m.StuffingDate, "", new { @class = "Error_Msg" })
                                            </div>
                                        </div>
                                    </div>
                                    <div id="DivContainerNo" class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Container / CBT No:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                @Html.TextBox("ContainerNo", "", new { @class = "form-control input-sm", @readonly = true })
                                                @*<span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#ContainerModal"></i></span>*@
                                                @Html.ValidationMessage("ContainerNo", "", new { @class = "Error_Msg" })
                                            </div>
                                            <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                <label>CFS Code:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                @Html.TextBox("CFSCode", "", new
                                           {
                                               @class = "form-control input-sm",
                                               @readonly = true@*, maxlength = "11", @onkeypress = "return AllowOnlyDecimal()"*@ })
                                                @Html.ValidationMessage("CFSCode", new { @class = "Error_Msg" })
                                            </div>
                                        </div>
                                    </div>
                                    <div id="DivContainerSize" class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Container / CBT Size:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                @Html.DropDownList("Size", new List<SelectListItem>
                                        {
                                            new SelectListItem { Text="20",Value="20"},
                                            new SelectListItem { Text="40",Value="40"},
                                            new SelectListItem { Text="45",Value="45"},

                                        }, "----Select----", new { @class = "form-control input-sm dropdown" })
                                                @Html.ValidationMessage("Size", new { @class = "Error_Msg" })
                                            </div>
                                            <div class="col-md-1 padding_rt">
                                                <div class="boolean-container">
                                                    @Html.RadioButton("StuffingType", "FCL", new { @class = "", @id = "FCL" })
                                                    <label for="FCL"><i class="circle"></i><span>FCL</span></label>
                                                </div>
                                            </div>
                                            <div class="col-md-1 padding_rt">
                                                <div class="boolean-container">
                                                    @Html.RadioButton("StuffingType", "LCL", new { @class = "", @id = "LCL" })
                                                    <label for="LCL"><i class="circle"></i><span>LCL</span></label>
                                                </div>
                                            </div>
                                            <div class="col-md-offset-0-5 col-md-3" style="display:none">
                                                <div class="boolean-container">
                                                    @Html.CheckBoxFor(m => m.DirectStuffing, new { @id = "chkDS" })
                                                    <label for="chkDS"><i class="square"></i><span>Direct Stuffing</span></label>
                                                </div>
                                            </div>
                                            <div class="col-md-offset-2 col-md-1-5 col_cus_5">
                                                <label>Port Of Discharge:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <span class="ReQSimbol">*</span>
                                                @Html.TextBox("PODischarge", "", new { @class = "form-control input-sm", @readonly = true })
                                                <span class="search"><i class="fa fa-search" aria-hidden="true" onclick="LoadPortOfDischarge()" data-toggle="modal" data-target="#PODisModal"></i></span>
                                                @Html.ValidationMessage("PODischarge", new { @class = "Error_Msg" })
                                                @Html.Hidden("PortId")
                                            </div>
                                        </div>
                                    </div>

                                    <div id="DivContainerSize" class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            @*<div class="col-md-1-5 col_cus_2">
                                                    <label>Origin:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.DropDownList("Origin", new List<SelectListItem>
                                                        {
                                                            new SelectListItem { Text="FAC",Value="FAC"},
                                                            new SelectListItem { Text="NON FAC",Value="NON FAC"},

                                                        }, "----Select----", new { @class = "form-control input-sm dropdown" })
                                                    @Html.ValidationMessage("Origin", new { @class = "Error_Msg" })
                                                </div>*@
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>POL:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                @Html.DropDownListFor(m => m.ContPOL, new SelectList(ViewBag.ListOfPOD, "Value", "Text"), "----Select----")

                                            </div>


                                            <div class="col-md-offset-1 col-md-1 col_cus_2" style="display:none">
                                                <label>Via:</label>
                                            </div>
                                            <div class="col-md-2-5" style="display:none">
                                                @Html.DropDownList("Via", new List<SelectListItem>
                                        {
                                            new SelectListItem { Text="LONI",Value="LONI"},
                                            new SelectListItem { Text="TKD",Value="TKD"},
                                              new SelectListItem { Text="ROAD",Value="ROAD"},

                                        }, "----Select----", new { @class = "form-control input-sm dropdown" })
                                                @Html.ValidationMessage("Via", new { @class = "Error_Msg" })
                                            </div>
                                            <div class="col-md-offset-4 col-md-1-5 col_cus_5">
                                                <label>Port Of Destination:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                @Html.TextBoxFor(m => m.POD, new { @class = "form-control input_sm", @readonly = true })
                                            </div>
                                        </div>
                                    </div>

                                    <div id="DivShippingLine" class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Shipping Line:</label>
                                            </div>
                                            <div class="col-md-10-5 col_cus_10">
                                                @Html.TextBox("ShippingLine", "", new { @class = "form-control input-sm", @readonly = true })
                                                @*<span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" onclick="LoadEximTrader()" data-target="#ShippingLineModal"></i></span>*@
                                                @Html.Hidden("ShippingLineId")
                                            </div>
                                        </div>
                                    </div>
                                    <div id="DivShippingSeal" class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Shipping Seal:</label>
                                            </div>
                                            <div class="col-md-4">
                                                @Html.TextBox("ShippingSeal", "", new
                                           {
                                               @class = "form-control input-sm",
                                               @maxlength = "30" @*, @readonly = true*@ })
                                            </div>
                                            <div class="col-md-1-5 col_cus_offset_0_5 col-md-offset-1 padding_rt">
                                                <label>Custom Seal:</label>
                                            </div>
                                            <div class="col-md-4">
                                                @Html.TextBox("CustomSeal", "", new
                                           {
                                               @class = "form-control input-sm",
                                               @maxlength = "30" @*, maxlength = "11", @onkeypress = "return AllowOnlyDecimal()"*@ })
                                                @Html.ValidationMessage("CustomSeal", new { @class = "Error_Msg" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row Form_Space_top Form_Space_bottom">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Remarks:</label>
                                            </div>
                                            <div class="col-md-10-5 col_cus_10">
                                                @Html.TextAreaFor(m => m.Remarks, new { @style = "width:100%;height:100px" })
                                                @Html.ValidationMessageFor(m => m.Remarks, "", new { @class = "Error_Msg", @maxlength = "500" })
                                            </div>
                                        </div>
                                    </div>
                                    <div id="DivContainerStuffingDetails" class="Head_h5">
                                        @*@Html.Hidden("CartingAppDtlId")
                                            @Html.Hidden("LocationDetails")*@
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2 padding_rt">
                                                    <label>Shipping Bill No:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @*<span class="ReQSimbol">*</span>*@
                                                    @Html.TextBox("ShippingBillNo", "", new
                                               {
                                                   @class = "form-control input-sm",
                                                   @maxlength = "30",
                                                   @readonly = true
                                               })
                                                    <span style="color:red" id="ErrBill"></span>
                                                </div>
                                                <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">

                                                    <label>Shipping Bill Date:</label>
                                                </div>
                                                <div class="col-md-2 col_cus_2_5 Date_Img">
                                                    @Html.TextBox("ShippingDate", "", new { @class = "form-control input-sm", @readonly = true })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>CHA:</label>
                                                </div>
                                                <div class="col-md-10-5 col_cus_10">
                                                    @Html.Hidden("CHAId")
                                                    @*<span class="ReQSimbol">*</span>*@
                                                    @Html.TextBox("CHA", "", new { @class = "form-control input-sm", @readonly = true })
                                                    <span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" onclick="LoadCHA()" data-target="#CHAModal"></i></span>
                                                    <span style="color:red" id="ErrCHA"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Exporter:</label>
                                                </div>
                                                <div class="col-md-10-5 col_cus_10">
                                                    @Html.Hidden("ExporterId")
                                                    @*<span class="ReQSimbol">*</span>*@
                                                    @Html.TextBox("Exporter", "", new { @class = "form-control input-sm", @readonly = true })
                                                    @*<span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#ExporterModal"></i></span>*@
                                                    <span style="color:red" id="ErrExporter"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Consignee:</label>
                                                </div>
                                                <div class="col-md-10-5 col_cus_10">
                                                    @*<span class="ReQSimbol">*</span>*@
                                                    @Html.TextBox("Consignee", "", new
                                               {
                                                   @class = "form-control input-sm",
                                                   @maxlength = "30"  @*, @readonly = true*@ })
                                                    <span style="color:red" id="ErrConsignee"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2" style="padding-right:0px;">
                                                    <label>Cargo Description:</label>
                                                </div>
                                                <div class="col-md-10-5 col_cus_10">
                                                    @Html.TextArea("CargoDescription", "", new
                                               {
                                                   @style = "width:100%;height:100px",
                                                   @maxlength = "1000"  @*, @readonly = true*@ })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Marks & No:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.TextBox("MarksNo", "", new
                                               {
                                                   @class = "form-control input-sm" @*, @readonly = true*@ })
                                                </div>
                                                <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                    <label>FOB Value:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @*<span class="ReQSimbol">*</span>*@
                                                    @Html.TextBox("Fob", "", new
                                               {
                                                   @class = "form-control input-sm",
                                                   @onkeypress = "return AllowOnlyDecimal(event)"@*, @readonly = true*@ })
                                                    <span style="color:red" id="ErrFob"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Stuffed Qty:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @*<span class="ReQSimbol">*</span>*@
                                                    @Html.TextBox("StuffQuantity", "", new
                                               {
                                                   @class = "form-control input-sm",
                                                   @onkeypress = "return AllowOnlyInteger(event)"@*, @readonly = true*@ })
                                                    <span style="color:red" id="ErrQuantity"></span>
                                                </div>
                                                <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                    <label>Stuffed Wt (Kg):</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @*<span class="ReQSimbol">*</span>*@
                                                    @Html.TextBox("StuffWeight", "", new
                                               {
                                                   @class = "form-control input-sm",
                                                   @onkeypress = "return AllowOnlyDecimal(event)" @*, maxlength = "11", @onkeypress = "return AllowOnlyDecimal(event)"*@ })
                                                    @*@Html.ValidationMessage("CUM", new { @class = "Error_Msg" })*@
                                                    <span style="color:red" id="ErrWeight"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Insured:</label>

                                                </div>
                                                <div class="col-md-1">
                                                    <div class="boolean-container">
                                                        <input type="checkbox" id="Insured" />
                                                        <label for="Insured"><i class="square"></i></label>
                                                    </div>
                                                </div>
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Reefer:</label>

                                                </div>
                                                <div class="col-md-1">
                                                    <div class="boolean-container">
                                                        <input type="checkbox" id="Refer" />
                                                        <label for="Refer"><i class="square"></i></label>
                                                    </div>
                                                </div>
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>ODC</label>
                                                </div>
                                                <div class="col-md-1">
                                                    <div class="boolean-container">
                                                        @Html.CheckBox("IsOdc")
                                                        <label for="IsOdc"><i class="square"></i></label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="stoke SignUp_space_top SignUp_space_bottom"></div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-offset-4 col-md-2">
                                                <input type="button" id="BtnAddContainerStuff" class="btn log_Btn_sm" value="Add" onclick="SaveContainerStuffingDtl()" />
                                            </div>
                                            <div class="col-md-2">
                                                <input type="button" class="btn log_Btn_sm" value="Reset" />
                                            </div>

                                        </div>
                                        <div id="DivContainerStuffingTblErrMsg" class="logErrMsg Form_Space_top Form_Space_bottom" style="background-color:transparent"></div>
                                        <table class="table table-striped table-bordered dataTable" id="TblContainerStuffing" style="width:100%;">
                                            <thead>
                                                <tr>
                                                    <th class="text-center">@Html.DisplayName("SL No")</th>
                                                    <th>@Html.DisplayName("Container /CBT No")</th>
                                                    <th>@Html.DisplayName("Shipping Bill No")</th>
                                                    <th>@Html.DisplayName("Shipping Bill Date")</th>
                                                    <th>@Html.DisplayName("Exporter")</th>
                                                    <th>@Html.DisplayName("Stuffed Qty")</th>
                                                    <th>@Html.DisplayName("Stuffed Wt")</th>
                                                    <th>@Html.DisplayName("Edit")</th>
                                                    <th class="text-center">@Html.DisplayName("View")</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>

                    <div class="row">
                        <div class="stoke SignUp_space_bottom2 SignUp_space_top2"></div>
                    </div>
                    <div class="row">
                        <div class="col-md-offset-4 col-md-2 SignUp_space_bottom">
                            <input type="button" class="btn log_Btn_sm" value="Save" id="BtnSaveContainerStuff" />
                        </div>
                        <div class="col-md-2">
                            <input type="button" class="btn log_Btn_sm" value="Reset" onclick="ResetAllFields()" />
                        </div>
                    </div>
                    <div class="logSuccMsg" style="background-color:transparent" id="DivContainerStuffingMsg"></div>
                    <div class="logErrMsg Form_Space_bottom" style="background-color:transparent" id="DivContainerStuffingErrMsg"></div>

                    <div class="row Form_Space_top Form_Space_bottom">
                        <div class="form-group Form_Input">
                            <div class="col-md-2">
                                <input type="button" id="btnShowList" value="Show List" onclick="ShowList()" class="btn log_Btn_sm" />
                            </div>
                            <div class="col-md-offset-2-5 col-md-4" style="text-align:right;">
                                <label>Stuffing No/Date/SB No/Container/CBT No :</label>
                            </div>
                            <div class="col-md-3">
                                @Html.TextBox("ContSearch", "", new { placeholder = "Search Here" })
                                <span class="search"><i class="fa fa-search" aria-hidden="true" onclick="SearchStuffing()"></i></span>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div id="DivContainerStuffingList">
                            <table class="table table-bordered table-striped dataTable" style="width:100%; table-layout:fixed; word-break:break-word; overflow:hidden;">
                                <thead>
                                    <tr>
                                        <td>S.No</td>
                                        <td>Stuffing No</td>
                                        <td>Stuffing Date</td>
                                        <td>ShipBill No</td>
                                        <td>Container/CBT No</td>
                                        <td>Edit</td>
                                        <td>View</td>
                                        <td>Delete</td>
                                        <td>Print</td>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            }
            @Scripts.Render("~/bundles/jqueryval")


        </div>
    </div>
</div>

<div class="modal fade" id="DivModalStuffingReqNo" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List Of Request No.</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="SearchReqNo" type="text" />
                <ul class="navList" id="LstRequestNo">
                    @{
                        if (ViewBag.LstRequestNo != null)
                        {
                            foreach (var data in ViewBag.LstRequestNo)
                            {
                                <li id="@data.StuffingReqId" onclick="StuffRequest('@data.StuffingReqNo','@data.StuffingReqId','@data.RequestDate')">@data.StuffingReqNo</li>
                            }
                        }
                    }
                </ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="CHAModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" onclick="CloseCHA()"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List Of CHA</h4>
            </div>
            <div class="modal-body popup_body" style="position:relative;">
                <input placeholder="Search By CHA Name Or Party Code " id="Chabox" type="text" />
                <span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick="SearchChaByPartyCode()"></i></span>

                <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                    <thead>
                        <tr>
                            <th colspan="8" width="80%">CHA Name</th>
                            <th colspan="4" width="20%">Party Code</th>
                        </tr>
                    </thead>
                </table>

                <div id="slim_scroll_1">
                    <table class="table dataTable table-bordered table-striped slim_tble" id="tbleCha">
                        <tbody></tbody>
                        @*@{
                                if (ViewBag.lstCHA != null)
                                {
                                    foreach (var item in ViewBag.lstCHA)
                                    {
                                        <tr onclick="SelectCHA(@item.CHAId,'@item.CHAName')">
                                            <td colspan="8" width="80%" class="txt_wrp">@item.CHAName</td>
                                            <td colspan="4" width="20%" class="txt_wrp">@item.PartyCode</td>
                                        </tr>
                                    }
                                }
                            }*@
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-6">
                        @if (ViewBag.CHAState != null && Convert.ToBoolean(ViewBag.CHAState) == true)
                        {
                            <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreCHA()" class="btn log_Btn_sm" id="btnLoadCHA">Load More Data</button>
                        }
                        else
                        {
                            <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreCHA()" class="btn log_Btn_sm" id="btnLoadCHA" disabled>Load More Data</button>
                        }
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn log_Btn_sm" onclick="CloseCHA()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ExporterModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" onclick="CloseExporter()"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List Of Exporter</h4>
            </div>
            <div class="modal-body popup_body" style="position:relative;">
                <input placeholder="Search By Exporter Name Or Party Code " id="Expbox" type="text" />
                <span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick="SearchExpByPartyCode()"></i></span>

                <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                    <thead>
                        <tr>
                            <th colspan="8" width="80%">Exporter Name</th>
                            <th colspan="4" width="20%">Party Code</th>
                        </tr>
                    </thead>
                </table>

                <div id="slim_scroll_3">
                    <table class="table dataTable table-bordered table-striped slim_tble" id="tbleExp">
                        <tbody></tbody>
                        @*@{
                                if (ViewBag.lstExp != null)
                                {
                                    foreach (var item in ViewBag.lstExp)
                                    {
                                        <tr onclick="SelectExporter(@item.ExporterId,'@item.ExporterName')">
                                            <td colspan="8" width="80%" class="txt_wrp">@item.ExporterName</td>
                                            <td colspan="4" width="20%" class="txt_wrp">@item.PartyCode</td>
                                        </tr>
                                    }
                                }
                            }*@
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-6">
                        @if (ViewBag.ExpState != null && Convert.ToBoolean(ViewBag.ExpState) == true)
                        {
                            <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreExp()" class="btn log_Btn_sm" id="btnLoadExp">Load More Data</button>
                        }
                        else
                        {
                            <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreExp()" class="btn log_Btn_sm" id="btnLoadExp" disabled>Load More Data</button>
                        }
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn log_Btn_sm" onclick="CloseExporter()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="ShippingLineModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" onclick="CloseEximTrader()"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Shipping Line</h4>
            </div>
            <div class="modal-body popup_body" style="position:relative;">
                <input placeholder="Search By Shipping Line Name Or Party Code" id="ShpngLinebox" type="text" />
                <span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick="SearchByPartyCode()"></i></span>

                <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                    <thead>
                        <tr>
                            <th colspan="8" width="80%">Shipping Line Name</th>
                            <th colspan="4" width="20%">Party Code</th>
                        </tr>
                    </thead>
                </table>

                <div id="slim_scroll">
                    <table class="table dataTable table-bordered table-striped slim_tble" id="tbleSline">
                        @*<tbody></tbody>
                            @{
                                if (ViewBag.lstShippingLine != null)
                                {
                                    foreach (var item in ViewBag.lstShippingLine)
                                    {
                                        <tr onclick="SelectShippingLine(@item.ShippingLineId,'@item.ShippingLineName')">
                                            <td colspan="8" width="80%" class="txt_wrp">@item.ShippingLineName</td>
                                            <td colspan="4" width="20%" class="txt_wrp">@item.PartyCode</td>
                                        </tr>
                                    }
                                }
                            }*@
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-6">
                        @if (ViewBag.State != null && Convert.ToBoolean(ViewBag.State) == true)
                        {
                            <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreEximTrader()" class="btn log_Btn_sm" id="btnLoadMore">Load More Data</button>
                        }
                        else
                        {
                            <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreEximTrader()" class="btn log_Btn_sm" id="btnLoadMore" disabled>Load More Data</button>
                        }
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn log_Btn_sm" onclick="CloseEximTrader()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ContainerModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Container /CBT No</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="ContainerBox" type="text" />
                <ul class="navList" id="ContainerList">
                    @*<li></li>*@
                    @*@{
                            if (ViewBag.ContainerList != null)
                            {
                                foreach (var item in ViewBag.ContainerList)
                                {
                                    <li id="@item.Value">@item.Text</li>
                                }
                            }
                        }*@
                </ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="PODisModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" onclick="ClosePortOfDischarge()"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List Of Port</h4>
            </div>
            <div class="modal-body popup_body" style="position:relative;">
                <input placeholder="Search By Port Name " id="PODisbox" type="text" />
                <span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick="SearchPortOfDischarge()"></i></span>

                <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                    <thead>
                        <tr>
                            <th colspan="8" width="80%">Port Name</th>
                        </tr>
                    </thead>
                </table>

                <div id="slim_scroll_2">
                    <table class="table dataTable table-bordered table-striped slim_tble" id="tblePODis">
                        <tbody></tbody>
                        @*@{
                                if (ViewBag.lstCHA != null)
                                {
                                    foreach (var item in ViewBag.lstCHA)
                                    {
                                        <tr onclick="SelectCHA(@item.CHAId,'@item.CHAName')">
                                            <td colspan="8" width="80%" class="txt_wrp">@item.CHAName</td>
                                            <td colspan="4" width="20%" class="txt_wrp">@item.PartyCode</td>
                                        </tr>
                                    }
                                }
                            }*@
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-6">
                        @if (ViewBag.PODischargeState != null && Convert.ToBoolean(ViewBag.PODischargeState) == true)
                        {
                            <button type="button" style="width:100%; margin-left:0;" onclick="LoadMorePortOfDischarge()" class="btn log_Btn_sm" id="btnLoadPODis">Load More Data</button>
                        }
                        else
                        {
                            <button type="button" style="width:100%; margin-left:0;" onclick="LoadMorePortOfDischarge()" class="btn log_Btn_sm" id="btnLoadPODis" disabled>Load More Data</button>
                        }
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn log_Btn_sm" onclick="ClosePortOfDischarge()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>