@model CwcExim.Areas.Export.Models.Dnd_AmendmentViewModel
<style>
    #tbleCommodity.dataTable tbody > tr > td {
        cursor: pointer;
    }

    .slimScrollDiv {
        height: 300px;
    }

    .table.tblhd {
        border-bottom: 0;
    }

    .ship_bill_wrp {
        margin: 15px 10px;
    }

    .srch_fld {
        position: relative;
    }

        .srch_fld input[type='text'] {
            padding: 0 21px 0 5px !important;
        }

        .srch_fld .search {
            top: 6px;
            right: 12px;
            font-size: 13px;
        }

    .Date_Img img {
        right: 7px;
        top: 6px;
    }

    .Date_Img1 img {
        display: block;
        position: absolute;
        right: 17px;
        top: 2px;
        width: 20px;
    }

    .Date_Img2 img {
        display: block;
        position: absolute;
        right: 15px;
        top: 0px;
    }
    .table > caption + thead > tr:first-child > th, .table > colgroup + thead > tr:first-child > th, .table > thead:first-child > tr:first-child > th, .table > caption + thead > tr:first-child > td, .table > colgroup + thead > tr:first-child > td, .table > thead:first-child > tr:first-child > td {
    padding: 4px 13px;
    font-size: 11px;
}
</style>
<script src="~/Areas/Export/Scripts/App/Services/Dnd_AmendmentService.js"></script>
<script src="~/Areas/Export/Scripts/App/Controllers/Dnd_AmendmentCtrl.js"></script>
<script>
    angular.bootstrap(document.getElementById('DndAmendmentAppDiv'), ['CWCApp']);

</script>
<div class="container-fluid" id="DndAmendmentAppDiv">
    <div class="row" ng-controller="Dnd_AmendmentCtrl" id="Dnd_AmendmentCtrl">
        <div class="col-md-offset-0-5 col-md-11">
            <div class="Head_h4">
                <div class="row">
                    <div class="col-md-12">
                        <h4>Shipping Bill Amendment</h4>
                    </div>
                </div>
                <div class="row clearfix">
                    <div class="panel with-nav-tabs panel-primary cwc_panel ship_bill_wrp">
                        <div class="panel-heading cwc_panel_heading">
                            <ul class="nav nav-tabs" id="DivTabs">
                                <li class="active"><a href="#DivShipBillMerger" data-toggle="tab">Ship Bill Split & Merger</a></li>
                                <li><a href="#DivShipBillAmendment" data-toggle="tab">Ship Bill Amendment</a></li>
                            </ul>
                        </div>
                        <div class="panel-body">
                            <div class="tab-content">
                                <div class="tab-pane fade in active" id="DivShipBillMerger">
                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-2 col-md-offset-1-5 col_cus_offset_2 col_cus_2">
                                                <div class="boolean-container">
                                                    <input id="Merger" name="Amendment" ng-click="OnClickSpace('Merger')" type="radio" checked value="Merger">
                                                    <label for="Merger"><i class="circle"></i><span>Merger</span></label>
                                                </div>
                                            </div>
                                            <div class="col-md-2 col_cus_3">
                                                <div class="boolean-container">
                                                    <input id="Split" name="Amendment" ng-click="OnClickSpace('Split')" type="radio" value="Split">
                                                    <label for="Split"><i class="circle"></i><span>Split</span></label>
                                                </div>
                                                <input class="form-control input-sm" id="FlagMerger" name="FlagMerger" ng-model="FlagMerger" readonly="True" type="hidden" value="">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Amendment No:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <input type="text" ng-model="AmendmentNO" ng-disabled="true" class="form-control" />
                                            </div>
                                            <div class="col-md-offset-4 col-md-1-5 col_cus_2">
                                                <label>Invoice No:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <span class="ReQSimbol">*</span>
                                                <input type="text" ng-model="InvoiceNo" ng-disabled="true" class="form-control" />
                                                <span class="search" id="InvoiceNoSerach"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#InvoiceModal"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_offset_3 col_cus_2 padding_rt">
                                                <label>Date:</label>
                                            </div>
                                            <div class="col-md-2-5 col_cus_2_5 Date_Img1 ">
                                                <input type="text" class="form-control" ng-model="AmendDate" id="AmendDate" readonly />
                                                <span ng-show="Flag" style="color:red;">*Required</span>
                                            </div>
                                            <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                <label>Invoice Date:</label>
                                            </div>
                                            <div class="col-md-2-5 col_cus_2_5 Date_Img1 ">
                                                <input type="text" class="form-control" ng-model="InvoiceDate" id="InvoiceDate" readonly />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="Head_h4" style="margin-top:10px!important;">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <h4 style="font-size: 16px;">Old Ship Bill Information</h4>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group Form_Input">

                                                <div class="col-lg-12">
                                                    <table class="table table-bordered table-striped dataTable" style="width:100%; margin-top:10px!important;">
                                                        <thead>
                                                            <tr>
                                                                <th style="width:8%;" class="text-center"><span class="ReQSimbol">*</span> Ship Bill No</th>
                                                                <th style="width:8%;">Ship Bill Date</th>
                                                                <th style="width:15%;">Party</th>
                                                                <th style="width:10%;">Commodity</th>
                                                                <th style="width:7%;">Weight</th>
                                                                <th style="width:7%;">Pkg</th>
                                                                <th style="width:6%;">Area</th>
                                                                <th style="width:7%;">FOB</th>
                                                                <th style="width:2%;">Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td style="vertical-align: top;" class="text-center srch_fld"><input type="text" id="txtix" ng-model="txtShipBillNo" readonly class="form-control" /><span class="search" id="ShippingLineSerach"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#SBNoModal"></i></span></td>
                                                                <td style="vertical-align: top;">{{ShipBillDate}}</td>
                                                                <td style="vertical-align: top;">{{Party}}</td>
                                                                <td style="vertical-align: top;">{{Cargo}}</td>
                                                                <td style="vertical-align: top;">{{Weight}}</td>
                                                                <td style="vertical-align: top;">{{Pkg}}</td>
                                                                <td style="vertical-align: top;">{{Area}}</td>
                                                                <td style="vertical-align: top;">{{FOB}}</td>
                                                                <td style="vertical-align: top;"><a href="javascript:void(0);" class="btn" style="color: #000;" title="Add" ng-click="PushValueArray()"><i class="fa fa-plus-square" aria-hidden="true"></i></a></td>
                                                            </tr>
                                                            <tr ng-repeat="i in OldData">
                                                                <td style="vertical-align: top;">{{i.OldShipBillNo}}</td>
                                                                <td style="vertical-align: top;">{{i.OldShipBillDate}}</td>
                                                                <td style="vertical-align: top;">{{i.OldParty}}</td>
                                                                <td style="vertical-align: top;">{{i.OldCargo}}</td>
                                                                <td style="vertical-align: top;">{{i.OldWeight}}</td>
                                                                <td style="vertical-align: top;">{{i.OldPkg}}</td>
                                                                <td style="vertical-align: top;">{{i.OldArea}}</td>
                                                                <td style="vertical-align: top;">{{i.OldFOB}}</td>
                                                                <td style="vertical-align: top;"><a href="#" ng-click="DeleteOldShip($index)"><i class="fa fa-window-close-o Delete" aria-hidden="true"></i></a></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="Head_h4" style="margin-top:10px!important;">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <h4 style="font-size: 16px;">New Ship Bill Information</h4>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group Form_Input">
                                                <div class="col-lg-12">
                                                    <table class="table table-bordered table-striped dataTable" style="width:100%; margin-top:10px!important;">
                                                        <thead>
                                                            <tr>
                                                                <th style="width:8%;" class="text-center"><span class="ReQSimbol">*</span> Ship Bill No</th>
                                                                <th style="width:8%;">Ship Bill Date</th>
                                                                <th style="width:15%;"><span class="ReQSimbol">*</span> Party </th>
                                                                <th style="width:10%;"><span class="ReQSimbol">*</span> Commodity</th>
                                                                <th style="width:7%;"><span class="ReQSimbol">*</span> Weight</th>
                                                                <th style="width:7%;"><span class="ReQSimbol">*</span> Pkg</th>
                                                                <th style="width:6%;"><span class="ReQSimbol">*</span> Area</th>
                                                                <th style="width:7%;"><span class="ReQSimbol">*</span> FOB</th>
                                                                <th style="width:2%;">Action</th>
                                                            </tr>
                                                        </thead>

                                                        <tbody>
                                                            <tr>
                                                                <td><input type="text" id="txtNewShipBillNo" ng-model="txtNewShipBillNo" class="form-control" /></td>
                                                                <td class="Date_Img" style="position:relative;"><input type="text" id="txtNewShipBillDate" ng-model="txtNewShipBillDate" readonly class="form-control" /></td>
                                                                <td class="srch_fld"><input type="text" id="txtNewPartyName" ng-model="txtNewPartyName" readonly class="form-control" /><span class="search" id="ShippingLineSerach"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#PartyModal"></i></span></td>
                                                                <td class="srch_fld"><input type="text" id="txtix" ng-model="txtCommodity" readonly class="form-control" /><span class="search" id="ShippingLineSerach"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#CommodityModal"></i></span></td>
                                                                <td><input type="number" ng-model="txtWeight" class="form-control" min="0" /></td>
                                                                <td><input type="number" ng-model="txtPkg" class="form-control" min="0" /></td>
                                                                <td><input type="number" ng-model="txtArea" class="form-control" min="0" /></td>
                                                                <td><input type="number" ng-model="txtFOB" class="form-control" min="0" /></td>
                                                                <td><a href="javascript:void(0);" class="btn" style="color: #000;" title="Add" ng-click="PushValueArrayNewInfo()"><i class="fa fa-plus-square" aria-hidden="true"></i></a></td>
                                                            </tr>
                                                            <tr ng-repeat="i in NewData">
                                                                <td style="vertical-align: top;">{{i.NewInfoSBNo}}</td>
                                                                <td style="vertical-align: top;">{{i.NewInfoSBDate | date:'MM/dd/yyyy'}}</td>
                                                                <td style="vertical-align: top;">{{i.NewInfoPartyName}}</td>
                                                                <td style="vertical-align: top;">{{i.NewCommodityName}}</td>
                                                                <td style="vertical-align: top;">{{i.NewInfoWeight}}</td>
                                                                <td style="vertical-align: top;">{{i.NewInfoPkg}}</td>
                                                                <td style="vertical-align: top;">{{i.NewInfoArea}}</td>
                                                                <td style="vertical-align: top;">{{i.NewInfoFOB}}</td>
                                                                <td style="vertical-align: top;" style="text-align:center;"><a href="#" ng-click="DeleteNewInfoShip($index)"><i class="fa fa-window-close-o Delete" aria-hidden="true"></i></a></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <div class="row SignUp_space_top2">
                                        <div class="col-md-offset-3 col-md-2">
                                            <input type="submit" id="btnSave" class="btn log_Btn_sm" ng-click="saveAmendment()" value="Save" />
                                        </div>
                                        <div class="col-md-2">
                                            <input type="button" id="btnReset" class="btn log_Btn_sm" value="Reset" onclick="LoadView('Export/Dnd_CWCExport/Amendment','209')" />
                                        </div>
                                        <div class="col-md-2">
                                            <input type="button" class="btn log_Btn_sm" onclick="ShowSplitMergerAmendmentList()" value="Show List" />
                                        </div>
                                    </div>
                                    <div class="row SignUp_space_top2" style="text-align:center;">
                                        <span ng-model="saveinfo" style="font-size: 18px;font-weight: bolder;color: olive;">{{Saveinfo}}</span>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12" id="tblAmendmentSplit">
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="DivShipBillAmendment">
                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Invoice No:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <span class="ReQSimbol">*</span>
                                                <input type="text" class="form-control" readonly ng-model="tabInvoiceNo" />
                                                <span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#tabInvoiceModal"></i></span>
                                            </div>
                                            <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                <label>Invoice Date:</label>
                                            </div>
                                            <div class="col-md-2-5 col_cus_2_5">
                                                <input type="text" class="form-control" readonly ng-model="tabInvoiceDate" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Ship Bill No:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <span class="ReQSimbol">*</span>
                                                <input type="text" class="form-control" readonly ng-model="tabtxtShipBillNo" />
                                                <span ng-show="tabtxtShipBillNoFlag" style="color:red;" class="ng-hide">*Required</span>
                                                <span class="search" id="ShippingLineSerach"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#SBNoModalTab"></i></span>
                                            </div>
                                            <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                <label>Date:</label>
                                            </div>
                                            <div class="col-md-2-5 col_cus_2_5 Date_Img2">
                                                <input type="text" class="form-control" id="tabtxtShipbillDate" ng-model="tabtxtShipbillDate" readonly />
                                                <span ng-show="tabDateFlag" style="color:red;" class="ng-hide">*Required</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="stoke SignUp_space_bottom SignUp_space_top"></div>
                                    </div>

                                    @*<div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Exporter:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <input type="text" class="form-control" readonly ng-model="tabtxtExporterName" />
                                                <span class="search" id="spExporterName"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#tabPartyModal"></i></span>
                                                <span ng-show="tabExporterFlag" style="color:red;" class="ng-hide">*Required</span>
                                            </div>
                                        </div>
                                    </div>*@
                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                                <label>Exporter:</label>
                                            </div>
                                            <div class="col-md-10">
                                                @Html.HiddenFor(m => m.ExporterID)
                                                @Html.TextBoxFor(m => m.ExporterName, new { @class = "form-control input_sm", @readonly = true })
                                                @*@Html.ValidationMessageFor(m => m.ExporterName, "", new { @class = "Error_Msg" })*@
                                                <span class="search" id="ShippingLineSerach"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#ExporterModal"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Commodity:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <input type="text" class="form-control" readonly id="txttabCargo" ng-model="txttabCargo" />
                                                <span class="search" id="spCargo"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#tabCommodityModal"></i></span>
                                                <span ng-show="tabCargoFlag" style="color:red;" class="ng-hide">*Required</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Weight:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <input type="number" class="form-control" id="txttabWeight" ng-model="txttabWeight" />
                                                <span ng-show="tabWeightFlag" style="color:red;" class="ng-hide">*Required</span>
                                            </div>
                                            <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                <label>Pkg:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <input type="number" class="form-control" id="txttabPkg" ng-model="txttabPkg" />
                                                <span ng-show="tabPkgFlag" style="color:red;" class="ng-hide">*Required</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Ship Bill No:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <input type="text" id="NewShipBillNo" class="form-control" ng-model="NewShipBillNo" />
                                                <span ng-show="tabNewShipBillNoFlag" style="color:red;" class="ng-hide">*Required</span>

                                            </div>
                                            <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                <label>Date:</label>
                                            </div>
                                            <div class="col-md-2-5 Date_Img2">
                                                <input type="text" class="form-control" ng-model="tabShipBillDate" id="txttabNewShipbillDate" readonly />
                                                <span ng-show="tabShipbillDateFlag" style="color:red;" class="ng-hide">*Required</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>FOB Value:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <input type="number" class="form-control" ng-model="txttabFOB" id="txttabFOB" />
                                                <span ng-show="tabtabFOBFlag" style="color:red;" class="ng-hide">*Required</span>
                                            </div>
                                            <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                @Html.LabelFor(m => m.CHAName, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                            </div>
                                            <div class="col-md-2-5">
                                                @Html.HiddenFor(m => m.CHAId)
                                                @Html.TextBoxFor(m => m.CHAName, new { @class = "form-control input-sm", @readonly = true })
                                                <span class="search" id="CHASearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#CHAModal"></i></span>
                                                @Html.ValidationMessageFor(m => m.CHAId, "", new { @class = "Error_Msg" })
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Shipping Line:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                @Html.HiddenFor(m => m.ShippingLineId)
                                                @Html.TextBoxFor(m => m.ShippingLineName, new { @class = "form-control input_sm", @readonly = true })
                                                <span class="search" id="ShippingLineSerach"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#ShippingLineModal"></i></span>
                                            </div>
                                            <div class="col-md-1 col_cus_offset_0_5 col_cus_1_5 padding_rt">
                                                @Html.LabelFor(m => m.Country)
                                            </div>
                                            <div class="col-md-2-5">
                                                @if (ViewBag.Country != null)
                                                {
                                                    @Html.DropDownListFor(m => m.CountryId, new SelectList(ViewBag.Country, "CountryId", "CountryName"), "---Select---", new { @class = "form-control input-sm", @onchange = "GetPortList()" })
                                                }
                                                else
                                                {
                                                    @Html.DropDownListFor(m => m.CountryId, new SelectList("", "Value", "Text"), "---Select---", new { @class = "form-control input-sm dropdown" })
                                                }
                                                @Html.ValidationMessageFor(m => m.CountryId, "", new { @class = "Error_Msg" })
                                            </div>
                                            <div class="col-md-1-5 col-md-offset-0-5">
                                                @Html.LabelFor(m => m.POD)
                                            </div>
                                            <div class="col-md-2-5">
                                                @Html.HiddenFor(m => m.PortOfDestId)
                                                @Html.TextBoxFor(m => m.PortOfDestName, new { @class = "form-control input_sm", @readonly = true })
                                                <span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#PortDestModal"></i></span>
                                            </div>
                                        </div>
                                    </div>

                                    @*<div class="col-md-1-5 col_cus_2">
                                        <label>POD:</label>
                                    </div>
                                    <div class="col-md-2-5">
                                        <input class="form-control" id="txttabPOD" ng-model="txttabPOD" readonly />
                                        <span ng-show="tabtabPODFlag" style="color:red;" class="ng-hide">*Required</span>
                                        <span class="search" id="PODSerach"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#PODModalTab"></i></span>
                                    </div>*@


                                    <div class="row Form_Space_top">
                                        <div class="form-group Form_Input">
                                            <div class="col-md-1-5 col_cus_2">
                                                <label>Godown:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <input class="form-control" ng-model="txttabGODOWN" id="txttabGODOWN" readonly />
                                                <span ng-show="tabtabGODOWNFlag" style="color:red;" class="ng-hide">*Required</span>
                                            </div>
                                            <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                <label>Location:</label>
                                            </div>
                                            <div class="col-md-2-5">
                                                <input class="form-control" id="txttabLOCATION" ng-model="txttabLOCATION" readonly />
                                                <span ng-show="tabtabLocationFlag" style="color:red;" class="ng-hide">*Required</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row SignUp_space_top2" style="text-align:center;">
                                        <span style="font-size: 18px;font-weight: bolder;color: olive;">{{TabSaveinfo}}</span>
                                    </div>

                                    <div class="row SignUp_space_bottom SignUp_space_top">
                                        <div class="stoke"></div>
                                    </div>

                                    <div class="row SignUp_space_top2" style="text-align:center;">
                                        <div class="col-md-offset-3 col-md-2">
                                            <input type="submit" id="btnSavee" class="btn log_Btn_sm" ng-click="SubmitTabData()" value="Save" />
                                        </div>
                                        <div class="col-md-2">
                                            <input type="button" id="btnReset" class="btn log_Btn_sm" value="Reset" ng-click="ResetAlltab()" />
                                        </div>
                                        <div class="col-md-2">
                                            <input type="button" class="btn log_Btn_sm" onclick="ShowAmendmentList()" value="Show List" />
                                        </div>
                                    </div>

                                    <div class="row SignUp_space_bottom"></div>

                                    <div class="row">
                                        <div class="col-md-12" id="tblAmendment">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
                        <div id="SBNoModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of SBNo</h4>
                                    </div>
                                    <div class="modal-body popup_body">
                                        <input placeholder="Search Me" id="Partybox" type="text" ng-model="searchSBNo" />
                                        <ul class="navList" id="lstParty">
                                            <li ng-repeat="p in AllSBIList | filter: {ShipBillNo : searchSBNo }" ng-click="GetCBDetailsBySbIdDate(p.ShipBillNo,p.ShipBillDate)">{{p.ShipBillNo}}</li>
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-offset-6 col-md-6">
                                                <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="ShippingLineModal" role="dialog">
                            <div class="modal-dialog">
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" onclick="CloseEximTrader()"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of Shipping Line Names</h4>
                                    </div>
                                    <div class="modal-body popup_body">
                                        <input placeholder="Search By Shipping Line Name Or Party Code" id="ShpngLinebox" type="text" />
                                        <span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick="SearchByPartyCode()"></i></span>

                                        <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                                            <thead>
                                                <tr>
                                                    <th colspan="8" width="80%">Shipping Line Name</th>
                                                    <th colspan="4" width="20%">Party Code</th>
                                                </tr>
                                            </thead>
                                        </table>
                                        <div id="slim_scroll_3">
                                            <table class="table dataTable table-bordered table-striped slim_tble" id="tbleSline">
                                                @{
                                                    if (ViewBag.lstShippingLine != null)
                                                    {
                                                        foreach (var item in ViewBag.lstShippingLine)
                                                        {
                                                            <tr onclick="SelectShippingLine(@item.ShippingLineId,'@item.ShippingLineName')">
                                                                <td colspan="8" width="80%" class="txt_wrp">@item.ShippingLineName</td>
                                                                <td colspan="4" width="20%" class="txt_wrp">@item.PartyCode</td>
                                                            </tr>
                                                        }
                                                    }
                                                }
                                            </table>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-6">
                                                @if (ViewBag.State != null && Convert.ToBoolean(ViewBag.State) == true)
                                                {
                                                    <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreEximTrader()" class="btn log_Btn_sm" id="btnLoadMore">Load More Data</button>
                                                }
                                                else
                                                {
                                                    <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreEximTrader()" class="btn log_Btn_sm" id="btnLoadMore" disabled>Load More Data</button>
                                                }
                                            </div>
                                            <div class="col-md-6">
                                                <button type="button" class="btn log_Btn_sm" onclick="CloseEximTrader()">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="SBNoModalTab" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of SBNo</h4>
                                    </div>
                                    <div class="modal-body popup_body">
                                        <input placeholder="Search Me" id="Partybox" type="text" ng-model="searchSBNo" />
                                        <ul class="navList" id="lstParty">
                                            <li ng-repeat="p in AllSBIList | filter: {ShipBillNo : searchSBNo }" ng-click="tabGetCBDetailsBySbIdDate(p.ShipBillNo,p.ShipBillDate)">{{p.ShipBillNo}}</li>
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-offset-6 col-md-6">
                                                <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="spOldShipBillNo" role="dialog">
                            <div class="modal-dialog">
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of Shipping Line Names</h4>
                                    </div>
                                    <div class="modal-body popup_body">
                                        <input placeholder="Search Me" id="ShippingLinebox" type="text" />
                                        <ul class="navList" id="lstShippingLine">
                                            @*@{
                                            if (ViewBag.ListOfShippingLine != null)
                                            {
                                                foreach (var item in ViewBag.ListOfShippingLine)
                                                {
                                                    <li id="@item.ShippingLineId">@item.ShippingLineName</li>
                                                }
                                            }
                                            else
                                            {
                                                <li></li>
                                            }

                                        }*@
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-offset-6 col-md-6">
                                                <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        
                        
        <div class="modal fade" id="PartyModal" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content popup_modal">
                    <div class="modal-header popup_header">
                        <button type="button" class="close" onclick="CloseMergerExporter()"><i class="fa fa-times" aria-hidden="true"></i></button>
                        <h4 class="modal-title">List Of Exporter</h4>
                    </div>
                    <div class="modal-body popup_body" style="position:relative;">
                        <input placeholder="Search By Party Name Or Party Code " id="MergerExpbox" type="text" />
                        @*<span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick="SearchExpByPartyCode()"></i></span>*@

                        <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                            <thead>
                                <tr>
                                    <th colspan="8" width="80%">Exporter Name</th>
                                    <th colspan="4" width="20%">Party Code</th>
                                </tr>
                            </thead>
                        </table>

                        <div id="slim_scroll_5">
                            <table class="table dataTable table-bordered table-striped slim_tble" id="tbleMergerExp">
                                @{
                                    if (ViewBag.lstExp != null)
                                    {
                                        foreach (var item in ViewBag.lstExp)
                                        {
                                            <tr onclick="SelectMergerExporter(@item.ExporterId,'@item.ExporterName')">
                                                <td colspan="8" width="80%" class="txt_wrp">@item.ExporterName</td>
                                                <td colspan="4" width="20%" class="txt_wrp">@item.PartyCode</td>
                                            </tr>
                                        }
                                    }
                                }
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="row">
                            <div class="col-md-6">
                                @if (ViewBag.ExpState != null && Convert.ToBoolean(ViewBag.ExpState) == true)
                                {
                                    <button type="button" style="width:100%; margin-left:0;" onclick="LoadMergerMoreExp()" class="btn log_Btn_sm" id="btnMergerLoadExp">Load More Data</button>
                                }
                                else
                                {
                                    <button type="button" style="width:100%; margin-left:0;" onclick="LoadMergerMoreExp()" class="btn log_Btn_sm" id="btnMergerLoadExp" disabled>Load More Data</button>
                                }
                            </div>
                            <div class="col-md-6">
                                <button type="button" class="btn log_Btn_sm" onclick="CloseMergerExporter()">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

       
        <input type="hidden" style="display:none;" ng-model="NewPartyId" id="NewPartyId" />









                        <div id="tabPartyModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of Party</h4>
                                    </div>
                                    <div class="modal-body popup_body">
                                        <input placeholder="Search Me" id="Partybox" type="text" ng-model="tabsearchParty" />
                                        <ul class="navList" id="lstParty">
                                            <li ng-repeat="p in AllParty | filter: {ExporterName : tabsearchParty }" ng-click="tabClickParty(p.EXPEximTraderId,p.ExporterName)">{{p.ExporterName}}</li>
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-offset-6 col-md-6">
                                                <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        @*<div id="tabChaModal" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                             Modal content
                            <div class="modal-content popup_modal">
                                <div class="modal-header popup_header">
                                    <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                    <h4 class="modal-title">List of Cha</h4>
                                </div>
                                <div class="modal-body popup_body">
                                    <input placeholder="Search Me" id="Chabox" type="text" ng-model="tabsearchCha" />
                                    <ul class="navList" id="lstCha">
                                        <li ng-repeat="p in AllCha | filter: {CHAName : tabsearchCha }" ng-click="tabClickCha(p.CHAEximTraderId,p.CHAName)">{{p.CHAName}}</li>
                                    </ul>
                                </div>
                                <div class="modal-footer">
                                    <div class="row">
                                        <div class="col-md-offset-6 col-md-6">
                                            <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>*@

                        <div id="tabShippingModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of ShippingLine</h4>
                                    </div>
                                    <div class="modal-body popup_body">
                                        <input placeholder="Search Me" id="Shibox" type="text" ng-model="tabsearchShi" />
                                        <ul class="navList" id="lstShi">
                                            <li ng-repeat="p in AllSha | filter: {ShippingLineName : tabsearchShi }" ng-click="tabClickShip(p.ShippingLineId,p.ShippingLineName)">{{p.ShippingLineName}}</li>
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-offset-6 col-md-6">
                                                <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="CommodityModal" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content popup_modal" style="width:80%;">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" ng-click="CloseCommodity()"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of Commodity</h4>
                                    </div>
                                    <div class="modal-body popup_body" style="position:relative;">
                                        <input placeholder="Search By Commodity Name" ng-model="CommodityBox" type="text" />
                                        <span class="search" style="top: 18px;"><i class="fa fa-search" ng-click="searchCommodity()" aria-hidden="true"></i></span>
                                        <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                                            <thead>
                                                <tr>
                                                    <th colspan="8" width="80%">Commodity Name</th>

                                                </tr>
                                            </thead>
                                        </table>
                                        <div id="slim_scroll">
                                            <table class="table dataTable table-bordered table-striped">
                                                <tr ng-click="SelectCommodity(k.CommodityId,k.CommodityName)" ng-repeat="k in ListOfCommodityForAmendment.LstCommodity | filter:{CommodityName:CommodityBox}">
                                                    <td colspan="8" width="80%">{{k.CommodityName}}</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <button type="button" style="width:100%; margin-left:0;" ng-show="commflag" ng-click="LoadMoreCommodity()" class="btn log_Btn_sm" id="btnLoadMoreCommodity">Load More Data</button>
                                            </div>
                                            <div class="col-md-offset-5 col-md-3">
                                                <button type="button" class="btn log_Btn_sm" ng-click="CloseCommodity()">Close</button>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="tabCommodityModal" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content popup_modal" style="width:80%;">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" ng-click="tabCloseCommodity()"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of Commodity</h4>
                                    </div>
                                    <div class="modal-body popup_body" style="position:relative;">
                                        <input placeholder="Search By Commodity Name" ng-model="tabCommodityBox" type="text" />
                                        <span class="search" style="top: 18px;"><i class="fa fa-search" ng-click="searchCommoditytab()" aria-hidden="true"></i></span>
                                        <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                                            <thead>
                                                <tr>
                                                    <th colspan="8" width="80%">Commodity Name</th>

                                                </tr>
                                            </thead>
                                        </table>
                                        <div id="slim_scroll_1">
                                            <table class="table dataTable table-bordered table-striped">
                                                <tr ng-click="tabSelectCommodity(k.CommodityId,k.CommodityName)" ng-repeat="k in tabListOfCommodityForAmendment.LstCommodity | filter:{CommodityName:tabCommodityBox}">
                                                    <td colspan="8" width="80%">{{k.CommodityName}}</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <button type="button" style="width:100%; margin-left:0;" ng-show="commflag" ng-click="LoadMoreCommoditytab()" class="btn log_Btn_sm" id="btnLoadMoreCommodity">Load More Data</button>

                                            </div>
                                            <div class="col-md-offset-5 col-md-3">
                                                <button type="button" class="btn log_Btn_sm" ng-click="tabCloseCommodity()">Close</button>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="CHAModal" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" onclick="CloseCHA()"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of CHA Name</h4>
                                    </div>
                                    <div class="modal-body popup_body" style="position:relative;">
                                        <input placeholder="Search By CHA Name Or Party Code" id="Chabox" type="text" />
                                        @*<span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick=SearchChaByPartyCode()></i></span>*@
                                        <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                                            <thead>
                                                <tr>
                                                    <th colspan="8" width="80%">CHA Name</th>
                                                    <th colspan="4" width="20%">Party Code</th>
                                                </tr>
                                            </thead>
                                        </table>
                                        <div id="slim_scroll_4">
                                            <table class="table dataTable table-bordered table-striped slim_tble" id="tbleCha">
                                                @{
                                                    if (ViewBag.lstCHA != null)
                                                    {
                                                        foreach (var item in ViewBag.lstCHA)
                                                        {
                                                            <tr onclick="SelectCHA(@item.CHAId,'@item.CHAName')">
                                                                <td colspan="8" width="80%" class="txt_wrp">@item.CHAName</td>
                                                                <td colspan="4" width="20%" class="txt_wrp">@item.PartyCode</td>
                                                            </tr>
                                                        }
                                                    }
                                                }
                                            </table>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-6">
                                                @if (ViewBag.CHAState != null && Convert.ToBoolean(ViewBag.CHAState) == true)
                                                {
                                                    <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreCHA()" class="btn log_Btn_sm" id="btnLoadCHA">Load More Data</button>
                                                }
                                                else
                                                {
                                                    <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreCHA()" class="btn log_Btn_sm" id="btnLoadCHA" disabled>Load More Data</button>
                                                }
                                            </div>
                                            <div class="col-md-6">
                                                <button type="button" class="btn log_Btn_sm" onclick="CloseCHA()">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="PortDestModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of Port Name</h4>
                                    </div>
                                    <div class="modal-body popup_body">
                                        <input placeholder="Search Me" id="PortDestbox" type="text" />
                                        <ul class="navList" id="lstDestPort">
                                            @*@{
                                            if (ViewBag.ListOfPort != null)
                                            {
                                                foreach (var item in ViewBag.ListOfPort)
                                                {
                                                    <li id="@item.PortId">@item.PortName</li>
                                                }
                                            }
                                            else
                                            {
                                                <li></li>
                                            }
                                        }*@
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-offset-6 col-md-6">
                                                <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade" id="ShipModal" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content popup_modal" style="width:80%;">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" ng-click="CloseCha()"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of ShippingLine</h4>
                                    </div>
                                    <div class="modal-body popup_body" style="position:relative;">
                                        <input placeholder="Search By Cha Name" ng-model="ShippingBox" type="text" />
                                        <span class="search" style="top: 18px;"><i class="fa fa-search" ng-click="searchShi()" aria-hidden="true"></i></span>
                                        <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                                            <thead>
                                                <tr>
                                                    <th colspan="8" width="80%">Cha Name</th>

                                                </tr>
                                            </thead>
                                        </table>
                                        <div id="slim_scroll">
                                            <table class="table dataTable table-bordered table-striped">
                                                <tr ng-click="SelectShip(k.ShipId,k.ShipName)" ng-repeat="k in ListOfChaForAmendment.LstShip | filter:{ShipName:ShipBox}">
                                                    <td colspan="8" width="80%">{{k.ShipName}}</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-4">

                                                <button type="button" style="width:100%; margin-left:0;" ng-show="shipflag" ng-click="LoadMoreShip()" class="btn log_Btn_sm" id="btnLoadMoreCommodity">Load More Data</button>


                                            </div>
                                            <div class="col-md-offset-5 col-md-3">
                                                <button type="button" class="btn log_Btn_sm" ng-click="Closeship()">Close</button>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <div id="PODModalTab" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of POD</h4>
                                    </div>
                                    <div class="modal-body popup_body">
                                        <input placeholder="Search Me" id="Podbox" type="text" ng-model="searchPOD" />
                                        <ul class="navList" id="lstParty">
                                            <li ng-repeat="p in AllPODIList | filter: {PortName : searchPOD }" ng-click="tabGetPODDetails(p.PortId,p.PortName)">{{p.PortName}}</li>
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-offset-6 col-md-6">
                                                <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="InvoiceModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of Invoice No.</h4>
                                    </div>
                                    <div class="modal-body popup_body">
                                        <input placeholder="Search Me" id="Partybox" type="text" ng-model="InvNo" />
                                        <ul class="navList">
                                            <li ng-repeat="p in lstInvoice | filter: InvNo" ng-click="SelectInvoice(p)">{{p.InvoiceNo}} - {{p.InvoiceDate}}</li>
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-offset-6 col-md-6">
                                                <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="tabInvoiceModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List of Invoice No.</h4>
                                    </div>
                                    <div class="modal-body popup_body">
                                        <input placeholder="Search Me" id="Partybox" type="text" ng-model="tabInvNo" />
                                        <ul class="navList">
                                            <li ng-repeat="p in lstInvoice | filter: tabInvNo" ng-click="tabSelectInvoice(p)">{{p.InvoiceNo}} - {{p.InvoiceDate}}</li>
                                        </ul>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-offset-6 col-md-6">
                                                <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="ExporterModal" role="dialog">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content popup_modal">
                                    <div class="modal-header popup_header">
                                        <button type="button" class="close" onclick="CloseExporter()"><i class="fa fa-times" aria-hidden="true"></i></button>
                                        <h4 class="modal-title">List Of Exporter</h4>
                                    </div>
                                    <div class="modal-body popup_body" style="position:relative;">
                                        <input placeholder="Search By Party Name Or Party Code " id="Expbox" type="text" />
                                        @*<span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick="SearchExpByPartyCode()"></i></span>*@

                                        <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                                            <thead>
                                                <tr>
                                                    <th colspan="8" width="80%">Exporter Name</th>
                                                    <th colspan="4" width="20%">Party Code</th>
                                                </tr>
                                            </thead>
                                        </table>

                                        <div id="slim_scroll_2">
                                            <table class="table dataTable table-bordered table-striped slim_tble" id="tbleExp">
                                                @{
                                                    if (ViewBag.lstExp != null)
                                                    {
                                                        foreach (var item in ViewBag.lstExp)
                                                        {
                                                            <tr onclick="SelectExporter(@item.ExporterId,'@item.ExporterName')">
                                                                <td colspan="8" width="80%" class="txt_wrp">@item.ExporterName</td>
                                                                <td colspan="4" width="20%" class="txt_wrp">@item.PartyCode</td>
                                                            </tr>
                                                        }
                                                    }
                                                }
                                            </table>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <div class="row">
                                            <div class="col-md-6">
                                                @if (ViewBag.ExpState != null && Convert.ToBoolean(ViewBag.ExpState) == true)
                                                {
                                                    <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreExp()" class="btn log_Btn_sm" id="btnLoadExp">Load More Data</button>
                                                }
                                                else
                                                {
                                                    <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreExp()" class="btn log_Btn_sm" id="btnLoadExp" disabled>Load More Data</button>
                                                }
                                            </div>
                                            <div class="col-md-6">
                                                <button type="button" class="btn log_Btn_sm" onclick="CloseExporter()">Close</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <input type="hidden" style="display:none;" ng-model="txttabCommodityID" value="0" />
                        <input type="hidden" style="display:none;" ng-model="txttabChaID" />
                        <input type="hidden" style="display:none;" ng-model="txttabShiID" />
                        <input type="hidden" style="display:none;" ng-model="txttabPartyID" />
                        <input type="hidden" style="display:none;" ng-model="txttabPodID" />
                        <input type="hidden" style="display:none;" ng-model="txttabCCINID" />
                        <input type="hidden" style="display:none;" ng-model="txtOldShipbilldate" />
                        <input type="hidden" style="display:none;" ng-model="txtGodownId" />
                        <input type="hidden" style="display:none;" ng-model="txtPodId" />

                    </div>
                </div>

                @if (ViewBag.ListOfSBNoAmendment != null)
                {
                    <input type="hidden" id="hdnListOfSBNoAmendment" value="@ViewBag.ListOfSBNoAmendment" />
                }
                else
                {
                    <input type="hidden" id="hdnListOfSBNoAmendment" value="" />
                }
                @if (ViewBag.ListOfExporterForAmendment != null)
                {
                    <input type="hidden" id="hdnListOfExporterForAmendment" value="@ViewBag.ListOfExporterForAmendment" />
                }
                else
                {
                    <input type="hidden" id="hdnListOfExporterForAmendment" value="" />
                }

                @if (ViewBag.ListOfCommodityForAmendment != null)
                {
                    <input type="hidden" id="hdnListOfCommodityForAmendment" value="@ViewBag.ListOfCommodityForAmendment" />
                }
                else
                {
                    <input type="hidden" id="hdnListOfCommodityForAmendment" value="" />
                }
                @if (ViewBag.ListOfInv != null)
                {
                    <input type="hidden" id="hdnListInvoice" value="@ViewBag.ListOfInv" />
                }
                else
                {
                    <input type="hidden" id="hdnListInvoice" value="" />
                }
                @if (ViewBag.ListOfCHAForAmendment != null)
                {
                    <input type="hidden" id="hdnListOfChaForAmendment" value="@ViewBag.ListOfChaForAmendment" />
                }
                else
                {
                    <input type="hidden" id="hdnListOfChaForAmendment" value="" />
                }
                @if (ViewBag.ListOfShiForAmendment != null)
                {
                    <input type="hidden" id="hdnListOfShiForAmendment" value="@ViewBag.ListOfShiForAmendment" />
                }
                else
                {
                    <input type="hidden" id="hdnListOfShiForAmendment" value="" />
                }
                @if (ViewBag.ListOfPODForAmendment != null)
                {
                    <input type="hidden" id="hdnListOfPODForAmendment" value="@ViewBag.ListOfPODForAmendment" />
                }
                else
                {
                    <input type="hidden" id="hdnListOfPODForAmendment" value="" />
                }
                @Scripts.Render("~/bundles/jqueryval")
                <script type="text/javascript" src="/scripts/jquery.nicescroll.min.js"></script>
                <script>
                    $(function () {
                        $('#slim_scroll').slimScroll({
                            allowPageScroll: true
                        });

                        $('#slim_scroll_1').slimScroll({
                            allowPageScroll: true
                        });
                        $('#slim_scroll_2').slimScroll({
                            allowPageScroll: true
                        });
                        $('#slim_scroll_3').slimScroll({
                            allowPageScroll: true
                        });
                        $('#slim_scroll_4').slimScroll({
                            allowPageScroll: true
                        });
                        $('#slim_scroll_5').slimScroll({
                            allowPageScroll: true
                        })
                    });

                    $(document).ready(function () {
                        //ShowAmendmentList();
                        //ShowSplitMergerAmendmentList();
                        $('#AmendDate').datepicker({
                            dateFormat: "dd/mm/yy",
                            showOn: "button",
                            buttonImage: "/Content/images/calendar.png",
                            buttonImageOnly: true,
                            buttonText: "Select date",
                            changeMonth: true,
                            changeYear: true,
                            showAnima: "fadein",
                            defaultDate: new Date(),
                            onClose: function () {
                                $('[data-valmsg-for="AmendDate"]').html('');
                            }
                        });

                        $('#AmendDate').datepicker("setDate", new Date());


                        $('#BillDate').datepicker({
                            dateFormat: "dd/mm/yy",
                            showOn: "button",
                            buttonImage: "/Content/images/calendar.png",
                            buttonImageOnly: true,
                            buttonText: "Select date",
                            changeMonth: true,
                            changeYear: true,
                            showAnima: "fadein",
                            onClose: function () {
                                $('[data-valmsg-for="CCINDate"]').html('');
                            }
                        });




                        $('#txtNewShipBillDate').datepicker({
                            dateFormat: "dd/mm/yy",
                            showOn: "button",
                            buttonImage: "/Content/images/calendar.png",
                            buttonImageOnly: true,
                            buttonText: "Select date",
                            changeMonth: true,
                            changeYear: true,
                            showAnima: "fadein",
                            onClose: function () {
                                $('[data-valmsg-for="txtNewShipBillDate"]').html('');
                            }
                        });

                        $('#txtNewShipBillDate').datepicker("setDate", new Date());


                        $('#ShipBillDate').datepicker({
                            dateFormat: "dd/mm/yy",
                            showOn: "button",
                            buttonImage: "/Content/images/calendar.png",
                            buttonImageOnly: true,
                            buttonText: "Select date",
                            changeMonth: true,
                            changeYear: true,
                            showAnima: "fadein",
                            onClose: function () {
                                $('[data-valmsg-for="CCINDate"]').html('');
                            }
                        });


                        $('#tabtxtShipbillDate').datepicker({
                            dateFormat: "dd/mm/yy",
                            showOn: "button",
                            buttonImage: "/Content/images/calendar.png",
                            buttonImageOnly: true,
                            buttonText: "Select date",
                            changeMonth: true,
                            changeYear: true,
                            showAnima: "fadein",
                            onClose: function () {
                                $('[data-valmsg-for="CCINDate"]').html('');
                            }
                        });

                        $('#tabtxtShipbillDate').datepicker("setDate", new Date());

                        $('#txttabNewShipbillDate').datepicker({
                            dateFormat: "dd/mm/yy",
                            showOn: "button",
                            buttonImage: "/Content/images/calendar.png",
                            buttonImageOnly: true,
                            buttonText: "Select date",
                            changeMonth: true,
                            changeYear: true,
                            showAnima: "fadein",
                            onClose: function () {
                                $('[data-valmsg-for="CCINDate"]').html('');
                            }
                        });


                    });

                    $('#SBNobox').keyup(function () {
                        var valThis = $(this).val().toLowerCase();
                        if (valThis == "") {
                            $('#lstSBNo > li').show();
                        } else {
                            $('#lstSBNo > li').each(function () {
                                var text = $(this).text().toLowerCase();
                                (text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
                            });
                        };
                    });

                    $('#lstSBNo li').on("click", function () {
                        //debugger;
                        $('#SBId').val($(this).attr('id'));
                        var SBid = $(this).attr('id');
                        var SbDate = $(this).attr('data-ttr');
                        if ($('#SBId').val() > 0) {


                        }

                        $("#SBNoModal").modal("hide");
                        $('[data-valmsg-for="SBNo"]').html('<span></span>');
                    });
                    function ShowSplitMergerAmendmentList() {
                        $('#tblAmendmentSplit').load('/Export/Dnd_CWCExport/ListofMergeSplitAmendData');
                    }
                    function ShowAmendmentList() {
                        $('#tblAmendment').load('/Export/Dnd_CWCExport/ListofAmendData');
                    }
                    //function SelectCha(ChaId, ChaName) {
                    //    debugger;
                    //    $('#txttabChaID').val(ChaId);
                    //    $('#txttabCHA').val(ChaName);
                    //    $("#ChaModal").modal("hide");
                    //    $('#Chabox').val('');
                    //    LoadEximTrader();
                    //}


                    //function LoadMoreCha() {
                    //    debugger;
                    //    $.ajax({
                    //        url: '/Export/Dnd_CWCExport/LoadChaAmendmentList',
                    //        type: 'GET',
                    //        data: { PartyCode: "", Page: Page + 1 },
                    //        success: function (data) {
                    //            if (data.Status == 1) {
                    //                debugger;
                    //                var html = '';
                    //                $.each(data.Data.lstCha, function (item, elem) {
                    //                    debugger;
                    //                    //html += '<tr onclick="SelectImporter(' + elem.ImporterId + ',&quot;' + elem.ImporterName + '&quot;)"><td>' + elem.ImporterName + '</td></tr>';
                    //                    html += '<tr onclick="SelectCha(' + elem.txttabChaID + ',&quot;' + elem.txttabCHA.replace(/\r?\n|\r/g, "") + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.txttabCHA + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';

                    //                });
                    //                if (Page == -1)
                    //                    $('#tbleCha tbody').html(html);
                    //                else
                    //                    $('#tbleCha tbody').append(html);
                    //                Page++;

                    //                if (data.Data.State == true)
                    //                    $('#LoadMoreCha').prop('disabled', false);
                    //                else $('#LoadMoreCha').prop('disabled', true);
                    //            }
                    //        }
                    //    });
                    //}

                    //var Page = 0;
                    //function LoadCha() {
                    //    debugger;
                    //    Page = 0;
                    //    $.ajax({
                    //        url: '/Export/Dnd_CWCExport/LoadChaAmendmentList',
                    //        type: 'GET',
                    //        data: { PartyCode: "", Page: Page },
                    //        success: function (data) {
                    //            if (data.Status == 1) {
                    //                debugger;
                    //                var html = '';
                    //                $.each(data.Data.lstCha, function (item, elem) {
                    //                    debugger;
                    //                    html += '<tr onclick="SelectCha(' + elem.ChaId + ',&quot;' + elem.ChaName.replace(/\r?\n|\r/g, "") + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ChaName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                    //                });
                    //                $('#tbleImp tbody').html(html);

                    //                if (data.Data.State == true)
                    //                    $('#LoadMoreCha').prop('disabled', false);
                    //                else $('#LoadMoreCha').prop('disabled', true);
                    //            }
                    //        }
                    //    });
                    //}

                    //function SearchChaByPartyCode() {
                    //    if ($('#Chabox').val() != '') {
                    //        $.ajax({
                    //            url: '/Export/Dnd_CWCExport/SearchChaByPartyCode',
                    //            type: 'GET',
                    //            data: { PartyCode: $('#Chabox').val() },
                    //            success: function (data) {
                    //                if (data.Status == 1) {
                    //                    var html = '';
                    //                    $.each(data.Data.lstCha, function (item, elem) {
                    //                        html += '<tr onclick="SelectCha(' + elem.ChaId + ',&quot;' + elem.ChaName.replace(/\r?\n|\r/g, "") + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ChaName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                    //                    });
                    //                    $('#tbleCha tbody').html('');
                    //                    $('#tbleCha tbody').html(html);
                    //                    $('#LoadMoreCha').prop('disabled', false);
                    //                    Page = -1;
                    //                }
                    //                else {
                    //                    $('#tbleCha tbody').html('');
                    //                    Page = -1;
                    //                    $('#LoadMoreCha').prop('disabled', false);
                    //                }

                    //            }
                    //        });
                    //    }
                    //    else
                    //        LoadCha();
                    //}

                    //function CloseCha() {
                    //    $('#Chabox').val('');
                    //    $("#ChaModal").modal("hide");
                    //    LoadCha();
                    //}
                    function SelectShippingLine(ShippingLineId, ShippingLineName) {
                        $('#ShippingLineName').val(ShippingLineName);
                        $('#ShippingLineId').val(ShippingLineId);
                        $("#ShippingLineModal").modal("hide");
                        $('#ShpngLinebox').val('');
                        LoadEximTrader();
                    }

                    function CloseEximTrader() {
                        debugger;
                        $('#ShpngLinebox').val('');
                        $("#ShippingLineModal").modal("hide");
                        LoadEximTrader();
                    }
                    var Page = 0;
                    function LoadMoreEximTrader() {
                        debugger;
                        $.ajax({
                            url: '/Export/Dnd_CWCExport/LoadEximtradeList',
                            type: 'GET',
                            data: { PartyCode: "", Page: Page + 1 },
                            success: function (data) {
                                if (data.Status == 1) {
                                    debugger;
                                    var html = '';
                                    $.each(data.Data.lstShippingLine, function (item, elem) {
                                        debugger;
                                        html += '<tr onclick="SelectShippingLine(' + elem.ShippingLineId + ',&quot;' + elem.ShippingLineName + ',&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ShippingLineName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                    });
                                    if (Page == -1)
                                        $('#tbleSline tbody').html(html);
                                    else
                                        $('#tbleSline tbody').append(html);
                                    Page++;

                                    if (data.Data.State == true)
                                        $('#btnLoadMore').prop('disabled', false);
                                    else $('#btnLoadMore').prop('disabled', true);
                                }
                            }
                        });
                    }

                    function LoadEximTrader() {
                        Page = 0;
                        $.ajax({
                            url: '/Export/Dnd_CWCExport/LoadEximtradeList',
                            type: 'GET',
                            data: { PartyCode: "", Page: Page },
                            success: function (data) {
                                if (data.Status == 1) {
                                    debugger;
                                    var html = '';
                                    $.each(data.Data.lstShippingLine, function (item, elem) {
                                        debugger;
                                        html += '<tr onclick="SelectShippingLine(' + elem.ShippingLineId + ',&quot;' + elem.ShippingLineName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ShippingLineName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                    });
                                    $('#tbleSline tbody').html(html);

                                    if (data.Data.State == true)
                                        $('#btnLoadMore').prop('disabled', false);
                                    else $('#btnLoadMore').prop('disabled', true);
                                }
                            }
                        });
                    }

                    function SearchByPartyCode() {
                        if ($('#ShpngLinebox').val() != '') {
                            $.ajax({
                                url: '/Export/Dnd_CWCExport/SearchByPartyCode',
                                type: 'GET',
                                data: { PartyCode: $('#ShpngLinebox').val() },
                                success: function (data) {
                                    if (data.Status == 1) {
                                        var html = '';
                                        $.each(data.Data.lstShippingLine, function (item, elem) {
                                            html += '<tr onclick="SelectShippingLine(' + elem.ShippingLineId + ',&quot;' + elem.ShippingLineName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ShippingLineName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                        });
                                        $('#tbleSline tbody').html('');
                                        $('#tbleSline tbody').html(html);
                                        $('#btnLoadMore').prop('disabled', false);
                                        Page = -1;
                                    }
                                    else {
                                        $('#tbleSline tbody').html('');
                                        Page = -1;
                                        $('#btnLoadMore').prop('disabled', false);
                                    }

                                }
                            });
                        }
                        else
                            LoadEximTrader();
                    }
                    //function SelectCHA(CHAId, CHAName) {
                    //    debugger;
                    //    $('#CHAName').val(CHAName);
                    //    $('#CHAId').val(CHAId);
                    //    $("#CHAModal").modal("hide");
                    //    $('#Chabox').val('');
                    //    LoadCHA();
                    //}

                    function SearchChaByPartyCode() {
                        debugger;
                        if ($('#Chabox').val() != '') {
                            $.ajax({
                                url: '/Export/Dnd_CWCExport/CHASearchByPartyCode',
                                type: 'GET',
                                data: { PartyCode: $('#Chabox').val() },
                                success: function (data) {
                                    if (data.Status == 1) {
                                        var html = '';
                                        $.each(data.Data.lstCHA, function (item, elem) {
                                            html += '<tr onclick="SelectCHA(' + elem.CHAId + ',&quot;' + elem.CHAName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.CHAName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                        });
                                        $('#tbleCha tbody').html('');
                                        $('#tbleCha tbody').html(html);
                                        $('#btnLoadCHA').prop('disabled', false);
                                        Page = -1;
                                    }
                                    else {
                                        $('#tbleCha tbody').html('');
                                        Page = -1;
                                        $('#btnLoadCHA').prop('disabled', false);
                                    }

                                }
                            });
                        }
                        else
                            LoadCHA();
                    }

                    function CloseCHA() {
                        $('#Chabox').val('');
                        $("#CHAModal").modal("hide");
                        LoadCHA();
                    }

                    function LoadMoreCHA() {
                        debugger;
                        $.ajax({
                            url: '/Export/Dnd_CWCExport/LoadCHAList',
                            type: 'GET',
                            data: { PartyCode: "", Page: Page + 1 },
                            success: function (data) {
                                if (data.Status == 1) {
                                    debugger;
                                    var html = '';
                                    $.each(data.Data.lstCHA, function (item, elem) {
                                        debugger;
                                        html += '<tr onclick="SelectCHA(' + elem.CHAId + ',&quot;' + elem.CHAName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.CHAName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                    });
                                    if (Page == -1)
                                        $('#tbleCha tbody').html(html);
                                    else
                                        $('#tbleCha tbody').append(html);
                                    Page++;

                                    debugger;
                                    if (data.Data.State == true)
                                        $('#btnLoadCHA').prop('disabled', false);
                                    else $('#btnLoadCHA').prop('disabled', true);
                                }
                            }
                        });
                    }

                    function LoadCHA() {
                        debugger;
                        Page = 0;
                        $.ajax({
                            url: '/Export/Dnd_CWCExport/LoadCHAList',
                            type: 'GET',
                            data: { PartyCode: "", Page: Page },
                            success: function (data) {
                                if (data.Status == 1) {
                                    debugger;
                                    var html = '';
                                    $.each(data.Data.lstCHA, function (item, elem) {
                                        debugger;
                                        html += '<tr onclick="SelectCHA(' + elem.CHAId + ',&quot;' + elem.CHAName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.CHAName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                    });

                                    $('#tbleCha tbody').html(html);

                                    if (data.Data.State == true)
                                        $('#btnLoadCHA').prop('disabled', false);
                                    else $('#btnLoadCHA').prop('disabled', true);
                                }
                            }
                        });
                    }
                    function SelectCHA(CHAId, CHAName) {
                        debugger;
                        $('#CHAName').val(CHAName);
                        $('#CHAId').val(CHAId);
                        $("#CHAModal").modal("hide");
                        $('#Chabox').val('');
                        LoadCHA();
                    }
                    function GetPortList() {
                        debugger;
                        $('#lstDestPort').html('');
                        var CountryId = $('#CountryId').val();
                        if (CountryId != "") {
                            $.ajax({
                                url: '/Export/Dnd_CWCExport/GetPortByCountry',
                                type: 'GET',
                                dataType: 'JSON',
                                data: { CountryId: CountryId },
                                success: function (data) {
                                    debugger;
                                    if (data.Status == 1) {
                                        var Html = '';
                                        $.each(data.Data, function (i, item) {
                                            Html += '<li onclick="FillPortBox(' + item.PortId + ',&quot;' + item.PortName + '&quot;)">' + item.PortName + '</li>';
                                        });
                                        $('#lstDestPort').html(Html);
                                    }
                                }
                            });
                        }
                    }


                    function FillPortBox(PortId, PortName) {
                        debugger;
                        $('#PortOfDestName').val(PortName);
                        $('#PortOfDestId').val(PortId);
                        $("#PortDestModal").modal("hide");
                    }


                    $('#PortDestbox').keyup(function () {
                        debugger;
                        var valThis = $(this).val().toLowerCase();
                        if (valThis == "") {
                            $('#lstDestPort > li').show();
                        } else {
                            $('#lstDestPort > li').each(function () {
                                var text = $(this).text().toLowerCase();
                                (text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
                            });
                        };
                    });
                    function SelectExporter(ExporterId, ExporterName) {
                        debugger;
                        $('#ExporterName').val(ExporterName);
                        $('#ExporterID').val(ExporterId);
                        $("#ExporterModal").modal("hide");
                        $('#Expbox').val('');
                        LoadExporter();
                    }
                    function CloseExporter() {
                        $('#Expbox').val('');
                        $("#ExporterModal").modal("hide");
                        LoadExporter();
                    }
                    var Page = 0;

                    function LoadMoreExp() {
                        debugger;
                        $.ajax({
                            url: '/Export/Dnd_CWCExport/LoadExporterList',
                            type: 'GET',
                            data: { PartyCode: "", Page: Page + 1 },
                            success: function (data) {
                                if (data.Status == 1) {
                                    debugger;
                                    var html = '';
                                    $.each(data.Data.lstExp, function (item, elem) {
                                        debugger;
                                        html += '<tr onclick="SelectExporter(' + elem.ExporterId + ',&quot;' + elem.ExporterName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ExporterName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                    });
                                    if (Page == -1)
                                        $('#tbleExp tbody').html(html);
                                    else
                                        $('#tbleExp tbody').append(html);
                                    Page++;

                                    debugger;
                                    if (data.Data.State == true)
                                        $('#btnLoadExp').prop('disabled', false);
                                    else $('#btnLoadExp').prop('disabled', true);
                                }
                            }
                        });
                    }

                    function LoadExporter() {
                        debugger;
                        Page = 0;
                        $.ajax({
                            url: '/Export/Dnd_CWCExport/LoadExporterList',
                            type: 'GET',
                            data: { PartyCode: "", Page: Page },
                            success: function (data) {
                                if (data.Status == 1) {
                                    debugger;
                                    var html = '';
                                    $.each(data.Data.lstExp, function (item, elem) {
                                        debugger;
                                        html += '<tr onclick="SelectExporter(' + elem.ExporterId + ',&quot;' + elem.ExporterName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ExporterName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                    });

                                    $('#tbleExp tbody').html(html);

                                    if (data.Data.State == true)
                                        $('#btnLoadExp').prop('disabled', false);
                                    else $('#btnLoadExp').prop('disabled', true);
                                }
                            }
                        });
                    }

                    function SearchExpByPartyCode() {
                        debugger;
                        if ($('#Expbox').val() != '') {
                            $.ajax({
                                url: '/Export/Dnd_CWCExport/SearchExporterByPartyCode',
                                type: 'GET',
                                data: { PartyCode: $('#Expbox').val() },
                                success: function (data) {
                                    debugger;
                                    if (data.Status == 1) {
                                        var html = '';
                                        $.each(data.Data.lstExp, function (item, elem) {
                                            html += '<tr onclick="SelectExporter(' + elem.ExporterId + ',&quot;' + elem.ExporterName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ExporterName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                        });
                                        $('#tbleExp tbody').html('');
                                        $('#tbleExp tbody').html(html);
                                        $('#btnLoadExp').prop('disabled', false);
                                        Page = -1;
                                    }
                                    else {
                                        $('#tbleExp tbody').html('');
                                        Page = -1;
                                        $('#btnLoadExp').prop('disabled', false);
                                    }

                                }
                            });
                        }
                        else
                            LoadExporter();
                    }


                    var MergerPage = 0;
                    function SelectMergerExporter(ExporterId, ExporterName) {
                        debugger;
                        $('#txtNewPartyName').val(ExporterName);
                        $('#NewPartyId').val(ExporterId);
                        $("#PartyModal").modal("hide");
                        $('#MergerExpbox').val('');
                        LoadSpiltExporter();
                    }
                    function CloseMergerExporter() {
                        $('#MergerExpbox').val('');
                        $("#PartyModal").modal("hide");
                        LoadSpiltExporter();
                    }
                    function LoadMergerMoreExp() {
                        debugger;
                        $.ajax({
                            url: '/Export/Dnd_CWCExport/LoadExporterList',
                            type: 'GET',
                            data: { PartyCode: "", Page: MergerPage + 1 },
                            success: function (data) {
                                if (data.Status == 1) {
                                    debugger;
                                    var html = '';
                                    $.each(data.Data.lstExp, function (item, elem) {
                                        debugger;
                                        html += '<tr onclick="SelectMergerExporter(' + elem.ExporterId + ',&quot;' + elem.ExporterName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ExporterName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                    });
                                    if (Page == -1)
                                        $('#tbleMergerExp tbody').html(html);
                                    else
                                        $('#tbleMergerExp tbody').append(html);
                                    Page++;

                                    debugger;
                                    if (data.Data.State == true)
                                        $('#btnMergerLoadExp').prop('disabled', false);
                                    else $('#btnMergerLoadExp').prop('disabled', true);
                                }
                            }
                        });
                    }

                    function LoadSpiltExporter() {
                        debugger;
                        Page = 0;
                        $.ajax({
                            url: '/Export/Dnd_CWCExport/LoadExporterList',
                            type: 'GET',
                            data: { PartyCode: "", Page: Page },
                            success: function (data) {
                                if (data.Status == 1) {
                                    debugger;
                                    var html = '';
                                    $.each(data.Data.lstExp, function (item, elem) {
                                        debugger;
                                        html += '<tr onclick="SelectMergerExporter(' + elem.ExporterId + ',&quot;' + elem.ExporterName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ExporterName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                    });

                                    $('#tbleMergerExp tbody').html(html);

                                    if (data.Data.State == true)
                                        $('#btnMergerLoadExp').prop('disabled', false);
                                    else $('#btnMergerLoadExp').prop('disabled', true);
                                }
                            }
                        });
                    }

                    function SearchMergerByPartyCode() {
                        debugger;
                        if ($('#Expbox').val() != '') {
                            $.ajax({
                                url: '/Export/Dnd_CWCExport/SearchExporterByPartyCode',
                                type: 'GET',
                                data: { PartyCode: $('#MergerExpbox').val() },
                                success: function (data) {
                                    debugger;
                                    if (data.Status == 1) {
                                        var html = '';
                                        $.each(data.Data.lstExp, function (item, elem) {
                                            html += '<tr onclick="SelectMergerExporter(' + elem.ExporterId + ',&quot;' + elem.ExporterName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.ExporterName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.PartyCode + '</td></tr>';
                                        });
                                        $('#tbleMergerExp tbody').html('');
                                        $('#tbleMergerExp tbody').html(html);
                                        $('#btnMergerLoadExp').prop('disabled', false);
                                        Page = -1;
                                    }
                                    else {
                                        $('#tbleMergerExp tbody').html('');
                                        Page = -1;
                                        $('#btnMergerLoadExp').prop('disabled', false);
                                    }

                                }
                            });
                        }
                        else
                            LoadExporter();
                    }


                    function debounce(func, wait, immediate) {
                        var timeout;
                        return function () {
                            var context = this, args = arguments;
                            var later = function () {
                                timeout = null;
                                if (!immediate) func.apply(context, args);
                            };
                            var callNow = immediate && !timeout;
                            clearTimeout(timeout);
                            timeout = setTimeout(later, wait);
                            if (callNow) func.apply(context, args);
                        };
                    };
                    document.getElementById('Expbox').addEventListener('keyup', debounce(function () {
                        SearchExpByPartyCode()
                    }, 800));
                    document.getElementById('Chabox').addEventListener('keyup', debounce(function () {
                        debugger;
                        SearchChaByPartyCode()
                    }, 800));
                    document.getElementById('MergerExpbox').addEventListener('keyup', debounce(function () {
                        debugger;
                        SearchMergerByPartyCode()
                    }, 800));
                </script>

