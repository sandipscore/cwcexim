@model CwcExim.Areas.Export.Models.PPG_ContainerStuffingV2

<script>
    var ArrayOfContainerStuff = [];
    var TimeInSeconds;
    var ArrayOfContainer = [];
    $(function () {
        TimeInSeconds = 5000;
        //GetContainerStuffList();

        $('#TblContainerStuffing').hide();
        $('#SearchContainerNo').css("display", "none");
        $('#BtnPrint').prop("disabled", true);
    });

    $('#StuffingDate').datetimepicker({
        dateFormat: "dd-mm-yy",
        showOn: "button",
        buttonImage: "/Content/images/calendar.png",
        buttonImageOnly: true,
        buttonText: "Select date",
        changeMonth: true,
        changeYear: true,
        showAnima: "fadein",
        onClose: function () {
            $("[data-valmsg-for='StuffingDate']").html('');
            ValidationDate();

        }
    });
    /*$('#ShippingDate').datepicker({
        dateFormat: "dd/mm/yy",
        showOn: "button",
        buttonImage: "/Content/images/calendar.png",
        buttonImageOnly: true,
        buttonText: "Select date",
        changeMonth: true,
        changeYear: true,
        showAnima: "fadein",
        onClose: function () {
            $("[data-valmsg-for='StuffingDate']").html('');
        }
    });*/

    function ShowRequestNo() {
        debugger;
        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetRequestNo',
            type: 'GET',
            dataType: 'JSON',
            success: function (data) {
                debugger;
                if (data != '') {

                    var EcJson = JSON.parse(data);
                    var html = '';
                    $.each(EcJson, function (i, item) {
                        html += '<li id="' + item.StuffingReqId + '" onclick="selectRequestNo(' + item.StuffingReqId + ',&quot;' + item.StuffingReqNo + '&quot;,&quot;' + item.RequestDate + '&quot;);">' + item.StuffingReqNo + '</li>';
                    });
                    $('#LstRequestNo').html(html);
                }
            }
        });
    }


    function ValidationDate() {
        debugger;
        var StuffingDate = $('#StuffingDate').val();
        var RequestDate = $('#RequestDate').val();
        if (RequestDate != '') {

            var varDay = RequestDate.substring(0, 2);
            var varMonth = RequestDate.substring(3, 5);
            var varYear = RequestDate.substring(6, 8);
            var varDate = '20' + varYear + '-' + varMonth + '-' + varDay;


            var varStuffDay = StuffingDate.substring(0, 2);
            var varStuffMonth = StuffingDate.substring(3, 5);
            var varStuffYear = StuffingDate.substring(6, 10);
            var varStuffDate = varStuffYear + '-' + varStuffMonth + '-' + varStuffDay;

            var varStuffingDate = new Date(varStuffDate);
            var varRequestDate = new Date(varDate);

            if (varRequestDate.getTime() > varStuffingDate.getTime()) {
                alert('StuffingDate should be greater than request date ');
                var now = new Date();
                var datetime = (now.getDate() < 10 ? ("0" + now.getDate()) : now.getDate()) + '-' + ((now.getMonth() + 1) < 10 ? ("0" + (now.getMonth() + 1)) : (now.getMonth() + 1)) + '-' + now.getFullYear() + " " + ((now.getHours() < 10) ? ("0" + now.getHours()) : (now.getHours())) + ':' + ((now.getMinutes() < 10) ? ("0" + now.getMinutes()) : (now.getMinutes()));

                //$('#StuffingDate').val(varStuffDate.split('-')[2] + '-' + varStuffDate.split('-')[1] + '-' + varStuffDate.split('-')[0]);
                $('#StuffingDate').val(datetime);
                return false;

            }
            else {
                return true;
            }

        }
    }

    function ValidateRequestDate() {
        debugger;
        var StuffingDate = $('#StuffingDate').val();
        var RequestDate = $('#RequestDate').val();
        if (RequestDate != '') {

            var varDay = RequestDate.substring(0, 2);
            var varMonth = RequestDate.substring(3, 5);
            var varYear = RequestDate.substring(6, 8);
            var varDate = '20' + varYear + '-' + varMonth + '-' + varDay;


            var varStuffDay = StuffingDate.substring(0, 2);
            var varStuffMonth = StuffingDate.substring(3, 5);
            var varStuffYear = StuffingDate.substring(6, 10);
            var varStuffDate = varStuffYear + '-' + varStuffMonth + '-' + varStuffDay;

            var varStuffingDate = new Date(varStuffDate);
            var varRequestDate = new Date(varDate);

            if (varRequestDate.getTime() > varStuffingDate.getTime()) {
                alert('StuffingDate should be greater than request date ');
                var now = new Date();
                var datetime = (now.getDate() < 10 ? ("0" + now.getDate()) : now.getDate()) + '-' + ((now.getMonth() + 1) < 10 ? ("0" + (now.getMonth() + 1)) : (now.getMonth() + 1)) + '-' + now.getFullYear() + " " + ((now.getHours() < 10) ? ("0" + now.getHours()) : (now.getHours())) + ':' + ((now.getMinutes() < 10) ? ("0" + now.getMinutes()) : (now.getMinutes()));

                // $('#StuffingDate').val(varDate.split('-')[2] + '-' + varDate.split('-')[1] + '-' + varDate.split('-')[0]);
                $('#StuffingDate').val(datetime);
            }
        }
    }
    function selectRequestNo(id, SNo, date) {

        $('#StuffingReqNo').val(SNo);
        $('#StuffingReqId').val(id);
        $('#RequestDate').val(date);
        $('#DivModalStuffingReqNo').modal("hide");
        GetStuffingDetails(id);
        $('#BtnAddContainerStuff').prop("disabled", true);
        ValidateRequestDate();
    }

    function ShowChaName() {
        debugger;
        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetCHANameForStuffing',
            type: 'GET',
            dataType: 'JSON',
            success: function (data) {
                debugger;
                if (data != '') {

                    var EcJson = JSON.parse(data);
                    var html = '';
                    $.each(EcJson, function (i, item) {
                        html += '<li id="' + item.CHAEximTraderId + '" onclick="selectCHAName(' + item.CHAEximTraderId + ',&quot;' + item.CHAName + '&quot;);">' + item.CHAName + '</li>';
                    });
                    $('#ListOfCHAHdr').html(html);
                }
            }
        });
    }

    function selectCHAName(id, Name) {
        $('#CHA').val(Name);
        $('#CHAId').val(id);
        $("#CHAHdrModal").modal("hide");
    }

    function ShowExporterName() {
        debugger;
        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetExporterForStuffing',
            type: 'GET',
            dataType: 'JSON',
            success: function (data) {
                debugger;
                if (data != '') {

                    var EcJson = JSON.parse(data);
                    var html = '';
                    $.each(EcJson, function (i, item) {
                        html += '<li id="' + item.EXPEximTraderId + '" onclick="selectExporterName(' + item.EXPEximTraderId + ',&quot;' + item.ExporterName + '&quot;);">' + item.ExporterName + '</li>';
                    });
                    $('#LstExporter').html(html);
                }
            }
        });
    }



    function ShowShippingLine() {
        debugger;
        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetShippingLineForStuffing',
            type: 'GET',
            dataType: 'JSON',
            success: function (data) {
                debugger;
                if (data != '') {

                    var EcJson = JSON.parse(data);
                    var html = '';
                    $.each(EcJson, function (i, item) {
                        html += '<li id="' + item.ShippingLineId + '" onclick="selectShippingLine(' + item.ShippingLineId + ',&quot;' + item.ShippingLineName + '&quot;);">' + item.ShippingLineName + '</li>';
                    });
                    $('#ShippingLineList').html(html);
                }
            }
        });
    }

    function selectShippingLine(id, Name) {
        $('#ShippingLine').val(Name);
        $('#ShippingLineId').val(id);
        $("#ShippingLineModal").modal("hide");
    }
    function selectExporterName(id, Name) {
        $('#Exporter').val(Name);
        $('#ExporterId').val(id);
        $("#ExporterModal").modal("hide");
    }

    function GetContainerStuffList() {
        $('#DivContainerStuffingList').load('/Export/Loni_CWCExportV2/GetContainerStuffingList');
    }
    function LoadContainerStuffing() {
        $('#DivBody').load('/Export/Loni_CWCExportV2/CreateContainerStuffing');
    }
    function ResetAllFields() {
        ArrayOfContainerStuff = [];
        ArrayOfContainer = [];
        $('#DivAddContainerStuffing').find('input:text,textarea,select').val('');
        $('#DivAddContainerStuffing #DivContainerStuffingMsg').html('');
        $('#DivAddContainerStuffing #DivContainerStuffingErrMsg').html('');
        $('[data-valmsg-for]').html('<span><span>');
        $('#DivAddContainerStuffing #TblContainerStuffing >tbody').html('');
        $('#TblContainerStuffing').hide();
        $('#DivContainerStuffingMsg').html('');
        $('#DivContainerStuffingErrMsg').html('');
        $('#DivContainerStuffingTblErrMsg').html('');
        $('#ContainerList').html('');

    }
    function ResetAllInvoiceFields() {
        /*$('#GREPartyCode').val('');
        $('#GREPartyId').val('');
        $('#GREOperationId').val('');
        $('#GREChargeType').val('');
        $('#GREChargeName').val('');
        $('#GRETaxable').val('');
        $('#GRECharge').val('');
        $('#GRECGSTCharge').val('');
        $('#GRESGSTCharge').val('');
        $('#GREIGSTCharge').val('');
        $('#GRECGSTPer').val('');
        $('#GRESGSTPer').val('');
        $('#GREIGSTPer').val('');
        $('#GRETotalAmount').val('');
        $('#GRESACCode').val('');
        $('#Startdate').val('');
        $('#EndDate').val('');
        $('#InvoiceNoGRE').val('');


        $('#INSPartyCode').val('');
        $('#INSPartyId').val('');
        $('#INSOperationId').val('');
        $('#INSChargeType').val('');
        $('#INSChargeName').val('');
        $('#INSTaxable').val('');
        $('#INSCharge').val('');
        $('#INSCGSTCharge').val('');
        $('#INSSGSTCharge').val('');
        $('#INSIGSTCharge').val('');
        $('#INSCGSTPer').val('');
        $('#INSSGSTPer').val('');
        $('#INSIGSTPer').val('');
        $('#INSTotalAmount').val('');
        $('#INSSACCode').val('');
        $('#InvoiceNoINS').val('');

        $('#STOPartyCode').val('');
        $('#STOPartyId').val('');
        $('#STOOperationId').val('');
        $('#STOChargeType').val('');
        $('#STOChargeName').val('');
        $('#STOTaxable').val('');
        $('#STOCharge').val('');
        $('#STOCGSTCharge').val('');
        $('#STOSGSTCharge').val('');
        $('#STOIGSTCharge').val('');
        $('#STOCGSTPer').val('');
        $('#STOSGSTPer').val('');
        $('#STOIGSTPer').val('');
        $('#STOTotalAmount').val('');
        $('#STOSACCode').val('');
        $('#InvoiceNoSTO').val('');

        $('#HandalingPartyCode').val('');
        $('#HandalingPartyId').val('');
        $('#HandalingOperationId').val('');
        $('#HandalingChargeType').val('');
        $('#HandalingChargeName').val('');
        $('#HandalingTaxable').val('');
        $('#HandalingCharge').val('');
        $('#HandalingCGSTCharge').val('');
        $('#HandalingSGSTCharge').val('');
        $('#HandalingIGSTCharge').val('');
        $('#HandalingCGSTPer').val('');
        $('#HandalingSGSTPer').val('');
        $('#HandalingIGSTPer').val('');
        $('#HandalingTotalAmount').val('');
        $('#HandalingSACCode').val('');
        $('#InvoiceNoHND').val('');

        $('#GENSPPartyCode').val('');
        $('#GENSPPartyId').val('');
        $('#GENSPOperationId').val('');
        $('#GENSPChargeType').val('');
        $('#GENSPChargeName').val('');
        $('#GENSPTaxable').val('');
        $('#GENSPCharge').val('');
        $('#GENSPCGSTCharge').val('');
        $('#GENSPSGSTCharge').val('');
        $('#GENSPIGSTCharge').val('');
        $('#GENSPCGSTPer').val('');
        $('#GENSPSGSTPer').val('');
        $('#GENSPIGSTPer').val('');
        $('#GENSPTotalAmount').val('');
        $('#GENSPSACCode').val('');
        $('#InvoiceNoGENSP').val('');*/

        //InvoiceNoGRE = '';
        //InvoiceNoINS = '';
        //InvoiceNoSTO = '';
        //InvoiceNoHND = '';
    }
    //function ContainerStuffingOnSuccess(data) {
    //    if (data.Status == 1) {
    //        $('#DivContainerStuffingMsg').html(data.Message);
    //        //$('#CartingNoList #' + $('#CartingAppId').val()).remove();
    //        setTimeout(ResetAllFields, TimeInSeconds);
    //        GetContainerStuffList();
    //    }
    //    else {
    //        $('#DivContainerStuffingErrMsg').html(data.Message);
    //    }
    //}

    //function ContainerStuffingOnFailure() { }
    //---------------------------------------
    $('#GREPartybox').keyup(function () {
        debugger;
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#GREPartyModal .navList > li').show();
        }
        else {
            $('#GREPartyModal .navList > li').each(function () {
                debugger;
                var Text = $(this).text().toLowerCase();
                (Text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });

    $('#INSPartybox').keyup(function () {
        debugger;
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#INSPartyModal .navList > li').show();
        }
        else {
            $('#INSPartyModal .navList > li').each(function () {
                debugger;
                var Text = $(this).text().toLowerCase();
                (Text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });

    $('#HandalingPartybox').keyup(function () {
        debugger;
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#HandalingPartyModal .navList > li').show();
        }
        else {
            $('#HandalingPartyModal .navList > li').each(function () {
                debugger;
                var Text = $(this).text().toLowerCase();
                (Text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });

    $('#GENSPPartybox').keyup(function () {
        debugger;
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#GENSPPartyModal .navList > li').show();
        }
        else {
            $('#GENSPPartyModal .navList > li').each(function () {
                debugger;
                var Text = $(this).text().toLowerCase();
                (Text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });
    //---------------------------------------
    $('#SearchReqNo').keyup(function () {
        debugger;
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#DivModalStuffingReqNo .navList > li').show();
        }
        else {
            $('#DivModalStuffingReqNo .navList > li').each(function () {
                debugger;
                var Text = $(this).text().toLowerCase();
                (Text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });
    $('#LstRequestNo li').on("click", function () {

        debugger;
        @*ArrayOfContainerStuff = [];
        $('#DivAddContainerStuffing').find('input:text,textarea,select').val('');
        $('#DivAddContainerStuffing #DivContainerStuffingMsg').html('');
        $('#DivAddContainerStuffing #DivContainerStuffingErrMsg').html('');
        $('[data-valmsg-for]').html('<span><span>');
        $('#DivAddContainerStuffing #TblContainerStuffing >tbody').html('');
        $('#TblContainerStuffing').hide();
        $('#DivContainerStuffingMsg').html('');
        $('#DivContainerStuffingErrMsg').html('');
        $('#DivContainerStuffingTblErrMsg').html('');
        $('#ContainerList li').html('');
        $('#StuffingDate').val('@Model.StuffingDate');
        var StuffingReqNo = $(this).text();
        var StuffingReqId = $(this).attr('id');
        $('#StuffingReqNo').val(StuffingReqNo);
        $('#StuffingReqId').val(StuffingReqId);
        $('#DivModalStuffingReqNo').modal("hide");*@
        //var StuffingReqNo = $(this).text();
        //var StuffingReqId = $(this).attr('id');
        //$('#StuffingReqNo').val(StuffingReqNo);
        //$('#StuffingReqId').val(StuffingReqId);
        //$('#DivModalStuffingReqNo').modal("hide");
        //GetStuffingDetails(StuffingReqId);
        //$('#BtnAddContainerStuff').prop("disabled",true);
        // GetCartingDetails(CartingAppId);
    });


    //function GetStuffingDetails(StuffingReqId) {
    //    debugger;
    //    ArrayOfContainerStuff = [];
    //    $.ajax({
    //        url: '/Export/Ppg_CWCExport/GetContainerDetOfStuffingReq',
    //        type: 'GET',
    //        dataType: 'JSON',
    //        data: { StuffingReqId: StuffingReqId },
    //        success: function (data) {
    //            debugger;
    //            if (data.Status == 1) {

    //                $.each(data.Data, function (i, item) {

    //                    ArrayOfContainerStuff.push(item);





    //                });
    //                //$('#CartingRegList #' + $('#CartingRegisterId').val()).remove();
    //                //ContainerDet=data.Data.ContainerDetails;
    //                GenerateContainerStuffTable();
    //                $('#TblContainerStuffing').show();
    //            }
    //        }
    //    });
    //}
    var cgtype = "Non-Haz";
    function GetStuffingDetails(StuffingReqId) {
        ArrayOfContainerStuff = [];
        ArrayOfContainer = [];
        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetContainerDetOfStuffingReq',
            type: 'GET',
            dataType: 'JSON',
            data: { StuffingReqId: StuffingReqId },
            success: function (data) {
                debugger;
                if (data.Status == 1) {

                    $.each(data.Data.LstStuffing, function (i, item) {


                        debugger;
                        if (item.Insured == null)
                            item.Insured = 0;

                        ArrayOfContainerStuff.push(item);
                        if (i == 0) {
                            $('#GREPartyId').val(item.ShippingLineId);
                            $('#GREPartyCode').val(item.ShippingLine);
                        }

                    });
                    if (ArrayOfContainerStuff.length != 0) {

                        $.each(ArrayOfContainerStuff, function (i, item) {
                            if (item.CargoType == 1) {
                                cgtype = "Haz";
                            }
                            debugger;
                            //  Html += '<tr><td class="text-center">' + (i + 1) + '</td><td>' + item.ContainerNo + '</td><td>' + item.ShippingBillNo + '</td><td>' + item.ShippingDate + '</td><td>' + item.Exporter + '</td><td>' + item.StuffQuantity + '</td><td>' + item.StuffWeight + '</td><td class="text-center"><a href="#" onclick="EditContainerStuff(' + i + ')"><i class="fa fa fa-pencil-square Edit" aria-hidden="true"></i></a></td><td class="text-center"><a href="#" onclick="ViewContainerStuff(' + i + ')"><i class="fa fa-search-plus Edit" aria-hidden="true"></i></a></td></tr>';
                            //if(ArrayOfContainer.length !=0){
                            var ContainerDtl = {
                                "ContainerNo": item.ContainerNo,
                                "CFSCode": item.CFSCode,
                                "Size": item.Size,
                                "Fob": item.Fob,
                                "StuffingReqId": $('#StuffingReqId').val(),
                                "StuffWeight": item.StuffWeight,
                                "SQM": item.SQM,
                                "ShippingBillNo": item.ShippingBillNo,
                                "ShippingBillDate": item.ShippingDate,
                                "Insured": 0
                            };
                            ArrayOfContainer.push(ContainerDtl);
                            //}
                        });


                    }



                    //$('#CartingRegList #' + $('#CartingRegisterId').val()).remove();
                    //ContainerDet=data.Data.ContainerDetails;
                    GenerateContainerStuffTable();
                    $('#TblContainerStuffing').show();
                }
            }
        });
    }

    $('#ShippingLineBox').keyup(function () {
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#ShippingLineModal .navList > li').show();
        } else {
            $('#ShippingLineModal .navList > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });
    $('#ShippingLineList li').on("click", function () {
        //$('#ShippingLine').val($(this).text());
        //$('#ShippingLineId').val($(this).attr('id'));
        //$("#ShippingLineModal").modal("hide");
    });

    $('#LstExporter li').on("click", function () {
        debugger;
        //$('#Exporter').val($(this).text());
        //$('#ExporterId').val($(this).attr('id'));
        //$("#ExporterModal").modal("hide");
    });
    $('#SearchExporter').keyup(function () {
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#ExporterModal .navList > li').show();
        } else {
            $('#ExporterModal .navList > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });

    $('#ListOfCHAHdr li').on("click", function () {
        debugger;
        //$('#CHA').val($(this).text());
        //$('#CHAId').val($(this).attr('id'));
        //$("#CHAHdrModal").modal("hide");
    });
    $('#SearchCHAHdr').keyup(function () {
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#CHAHdrModal .navList > li').show();
        } else {
            $('#CHAHdrModal .navList > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });

    $('#ContainerBox').keyup(function () {
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#ContainerModal .navList > li').show();
        } else {
            $('#ContainerModal .navList > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });
    // $('#ContainerList  li').on("click", function () {
    function FillContainerTxtBox(StuffingReqDtlId, CFSCode, ContainerNo) {
        debugger;
        ContainerNo = ContainerNo.split('-');
        ContainerNo = ContainerNo[0];
        // $('[data-valmsg-for="ContainerNo"]').html('<span></span>');
        $('#DivContainerStuffingTblErrMsg').html('');
        $('#BtnAddContainerStuff').prop("disabled", false);
        $('#ContainerNo').val(ContainerNo);
        $('#CFSCode').val(CFSCode);
        $("#ContainerModal").modal("hide");
        GetContainerDet(StuffingReqDtlId, CFSCode);
    }

    //  });

    function GetContainerNoList(StuffingReqId) {
        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetContainerNoOfStuffingReq',
            type: 'GET',
            dataType: 'JSON',
            data: { StuffingReqId: StuffingReqId },
            success: function (data) {
                if (data.Status == 1) {
                    var Html = '';
                    $.each(data.Data, function (i, item) {
                        // Html += '<li onclick="FillContainerTxtBox(\'' + item.ContainerNo + '\')">' + item.ContainerNo + '</li>'
                        Html += '<li onclick="FillContainerTxtBox(' + item.StuffingReqDtlId + ',&quot;' + item.CFSCode + '&quot;,&quot;' + item.ContainerNo + '&quot;)">' + item.ContainerNo + '</li>';
                    });
                    $('#ContainerList').html(Html);
                }
            }
        });
    }

    function GetContainerDet(StuffingReqDtlId, CFSCode) {
        debugger;
        var StuffingReqId = $('#StuffingReqId').val();

        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetContainerDetOfStuffingReq',
            type: 'GET',
            dataType: 'JSON',
            data: { StuffingReqDtlId: StuffingReqDtlId, CFSCode: CFSCode },
            success: function (data) {
                debugger;
                if (data.Status == 1) {
                    $('#StuffingReqDtlId').val(data.Data.StuffingReqDtlId),
                    $('#ContainerNo').val(data.Data.ContainerNo),
                    $('#CFSCode').val(data.Data.CFSCode),
                    $('#Size').val(data.Data.Size),
                    $('#ShippingLineId').val(data.Data.ShippingLineId),
                    $('#ShippingLine').val(data.Data.ShippingLine),
                    $('#ShippingSeal').val(data.Data.ShippingSeal),
                    $('#CustomSeal').val(data.Data.CustomSeal),
                    $('#' + data.Data.StuffingType + '').prop("checked", true);
                    // $('#'+Data.StuffingType+').val(data.Data.StuffingType),
                    $('#ShippingBillNo').val(data.Data.ShippingBillNo),
                    $('#ShippingDate').val(data.Data.ShippingDate),
                    $('#CHAId').val(data.Data.CHAId),
                    $('#ExporterId').val(data.Data.ExporterId),
                    $('#CHA').val(data.Data.CHA),
                    $('#Exporter').val(data.Data.Exporter),
                    $('#CargoDescription').val(data.Data.CargoDescription),
                    $('#Consignee').val(data.Data.Consignee),
                    $('#MarksNo').val(data.Data.MarksNo),
                    $('#Fob').val(data.Data.Fob),
                    $('#StuffQuantity').val(data.Data.StuffQuantity),
                    $('#StuffWeight').val(data.Data.StuffWeight),
                    $('#StuffingReqDtlId').val(data.Data.StuffingReqDtlId),
                    $('#RequestDate').val(data.Data.RequestDate),
                    $('#SQM').val(data.Data.SQM),
                    $('#spacetype').val(data.Data.spacetype),
                    $('#SEZ').val(data.Data.SEZ)
                    //$('#ContainerList #' + $('#ShippingBillNo').val()).remove();

                }
            }
        });
    }
    var AddStatus = 0;
    function SaveContainerStuffingDtl() {
        debugger;
        $('#DivContainerStuffingTblErrMsg').html('');
        var c = 0;
        $.each(ArrayOfContainerStuff, function (i, item) {
            debugger;
            if (item.ContainerNo == $('#ContainerNo').val() && item.ShippingBillNo == $('#ShippingBillNo').val()) {
                c = 1;
            }
            //Html += '<tr><td class="text-center">' + (i + 1) + '</td><td>' + item.ContainerNo + '</td><td>' + item.ShippingBillNo + '</td><td>' + item.ShippingDate + '</td><td>' + item.Exporter + '</td><td>' + item.StuffQuantity + '</td><td>' + item.StuffWeight + '</td><td class="text-center"><a href="#" onclick="EditContainerStuff(' + i + ')"><i class="fa fa fa-pencil-square Edit" aria-hidden="true"></i></a></td><td class="text-center"><a href="#" onclick="ViewContainerStuff(' + i + ')"><i class="fa fa-search-plus" aria-hidden="true"></i></a></td><td class="text-center"><a href="#" onclick="DeleteContainerStuff(' + i + ')"><i class="fa fa-window-close-o Delete" aria-hidden="true"></i></a></td></tr>';
        });
        if (c == 1) {
            alert("Container /CBT No Already Added.");
            ResetConatinerStuffDet();
            return false;
        }

        if ($('#ContainerNo').val() != "") {
            debugger;
            var StuffingType = $('#FCL').prop("checked") == true ? "FCL" : "LCL"
            var ContainerStuffingDtl = {
                "ContainerNo": $('#ContainerNo').val(),
                "CFSCode": $('#CFSCode').val(),
                "Size": $('#Size').val(),
                "ShippingLineId": $('#ShippingLineId').val(),
                "ShippingLine": $('#ShippingLine').val(),
                "ShippingSeal": $('#ShippingSeal').val(),
                "CustomSeal": $('#CustomSeal').val(),
                "StuffingType": StuffingType,
                "ShippingBillNo": $('#ShippingBillNo').val(),
                "ShippingDate": $('#ShippingDate').val(),
                "CHAId": $('#CHAId').val(),
                "ExporterId": $('#ExporterId').val(),
                "CHA": $('#CHA').val(),
                "Exporter": $('#Exporter').val(),
                "CargoDescription": $('#CargoDescription').val(),
                "Consignee": $('#Consignee').val(),
                "MarksNo": $('#MarksNo').val() == "" ? 0 : $('#MarksNo').val(),
                "Fob": $('#Fob').val() == "" ? 0 : $('#Fob').val(),
                "StuffQuantity": $('#StuffQuantity').val() == "" ? 0 : $('#StuffQuantity').val(),
                "StuffWeight": $('#StuffWeight').val() == "" ? 0 : $('#StuffWeight').val(),
                "StuffingReqDtlId": $('#StuffingReqDtlId').val(),
                "SQM": $('#SQM').val() == "" ? 0 : $('#SQM').val(),
                "Insured": $('#Insured').is(':checked') == true ? 1 : 0,
                "EquipmentSealType": $('#EquipmentSealType').val(),
                "EquipmentStatus": $('#EquipmentStatus').val(),
                "EquipmentQUC": $('#EquipmentQUC').val(),
                "MCINPCIN": $('#MCINPCIN').val(),
                "SEZ": $('#SEZ').val()

            }
            // $('#TblContainerStuffing tbody tr').each(function (i, item) {
            /*if ($('#TblContainerStuffing>tbody').find('td').eq(1).text() == ContainerStuffingDtl.ContainerNo && $('#TblContainerStuffing>tbody').find('td').eq(2).text() == ContainerStuffingDtl.ShippingBillNo) {
                alert("Container No Already Added.");
                ResetConatinerStuffDet();
                return false;

                }
                else {
                ArrayOfContainerStuff.push(ContainerStuffingDtl);
                }*/
            //    });

            ArrayOfContainerStuff.push(ContainerStuffingDtl);

            //$('#ContainerList #' + $('#ContainerNo').val()).remove();              '#TblContainerStuffing>tbody'
            var ContainerDtl = {
                "ContainerNo": $('#ContainerNo').val(),
                "CFSCode": $('#CFSCode').val(),
                "ShippingBillNo": $('#ShippingBillNo').val(),
                "ShippingBillDate": $('#ShippingDate').val(),
                "Size": $('#Size').val(),
                "Fob": $('#Fob').val(),
                "StuffingReqId": $('#StuffingReqId').val(),
                "StuffWeight": $('#StuffWeight').val(),
                "Insured": $('#Insured').is(':checked') == true ? 1 : 0,
                "SQM": $('#SQM').val() == "" ? 0 : $('#SQM').val(),
                "spacetype": $('#spacetype').val()
            }
            ArrayOfContainer.push(ContainerDtl);

            $.each(ArrayOfContainerStuff, function (i, item) {
                debugger;
                if (item.ContainerNo == $('#ContainerNo').val()) {
                    item.ShippingSeal = $('#ShippingSeal').val();
                    item.CustomSeal = $('#CustomSeal').val();
                    item.EquipmentQUC = $('#EquipmentQUC').val();
                    item.EquipmentStatus = $('#EquipmentStatus').val();
                    item.EquipmentSealType = $('#EquipmentSealType').val();
                }
            });

            GenerateContainerStuffTable();
            ResetConatinerStuffDet();
            $('#BtnAddContainerStuff').prop("disabled", true);
            AddStatus = 1;
        }

        else {
            $('#DivContainerStuffingTblErrMsg').html('Please Select A Container No In Order To Add Details');
            // $('[data-valmsg-for="ContainerNo"]').html('<span>Fill Out This Field</span>');

        }
    }

    function ResetConatinerStuffDet() {
        debugger;
        var POD = $('#POD').val();
        var CustodianCode = $('#CustodianCode').val();
        $('#DivContainerStuffingDetails').find('input:text,textarea').val('');
        $('#DivAddContainerStuffing #Size').val('');
        $('#FCL').prop("checked", false);
        $('#LCL').prop("checked", false);
        $('#DivContainerStuffingDetails #Insured').prop("checked", false);
        $('#DivContainerNo').find('input:text').val('');
        $('#DivContainerSize').find('input:text').val('');
        $('#DivShippingLine').find('input:text').val('');
        $('#DivShippingSeal').find('input:text').val('');
        $('#SearchContainerNo').css("display", "none");
        $('#TblShippingIns>tbody').html('');
        $('#TblShippingGen>tbody').html('');
        $('#POD').val(POD);
        $('#CustodianCode').val(CustodianCode);
        $('#EquipmentSealType').val('BTSL');
        $('#EquipmentStatus').val('94');
        $('#EquipmentQUC').val('PKG');
    }

    function GenerateContainerStuffTable() {
        debugger;
        $('#TblContainerStuffing').hide();
        var Html = '';
        var contNo = '';
        if (ArrayOfContainerStuff.length != 0) {
            $.each(ArrayOfContainerStuff, function (i, item) {
                debugger;
                Html += '<tr><td class="text-center">' + (i + 1) + '</td><td>' + item.ContainerNo + '</td><td>' + item.ShippingBillNo + '</td><td>' + item.ShippingDate + '</td><td>' + item.Exporter + '</td><td>' + item.StuffQuantity + '</td><td>' + item.StuffWeight + '</td><td>' + item.MCINPCIN + '</td><td class="text-center"><a href="#" onclick="EditContainerStuff(' + i + ')"><i class="fa fa fa-pencil-square Edit" aria-hidden="true"></i></a></td><td class="text-center"><a href="#" onclick="ViewContainerStuff(' + i + ')"><i class="fa fa-search-plus" aria-hidden="true"></i></a></td></tr>';
                contNo = item.ContainerNo;


            });
            //if ($('#TblContainerStuffing>tbody').find('td').eq(1).text() != contNo)
            //{
            //    $('#TblContainerStuffing>tbody').html(Html);
            //}
            //else {
            //    alert("Container No already added.");
            //}



            $('#TblContainerStuffing>tbody').html(Html);
            $('#TblContainerStuffing').show();
        }
    }
    var EditStatus = 0;
    function EditContainerStuff(Index) {
        debugger;
        //if ($('#BtnAddContainerStuff').prop("disabled") == true) {
        $('#SearchContainerNo').css("display", "block");
        $('#BtnAddContainerStuff').prop("disabled", false);
        $('#ContainerNo').val(ArrayOfContainerStuff[Index].ContainerNo);
        $('#CFSCode').val(ArrayOfContainerStuff[Index].CFSCode);
        $('#Size').val(ArrayOfContainerStuff[Index].Size);
        $('#ShippingLineId').val(ArrayOfContainerStuff[Index].ShippingLineId);
        $('#ShippingLine').val(ArrayOfContainerStuff[Index].ShippingLine);
        $('#ShippingSeal').val(ArrayOfContainerStuff[Index].ShippingSeal);
        $('#CustomSeal').val(ArrayOfContainerStuff[Index].CustomSeal);
        $('#' + ArrayOfContainerStuff[Index].StuffingType + '').prop("checked", true);
        $('#ShippingBillNo').val(ArrayOfContainerStuff[Index].ShippingBillNo);
        $('#ShippingDate').val(ArrayOfContainerStuff[Index].ShippingDate);
        $('#CHAId').val(ArrayOfContainerStuff[Index].CHAId);
        $('#ExporterId').val(ArrayOfContainerStuff[Index].ExporterId);
        $('#CHA').val(ArrayOfContainerStuff[Index].CHA);
        $('#Exporter').val(ArrayOfContainerStuff[Index].Exporter);
        $('#CargoDescription').val(ArrayOfContainerStuff[Index].CargoDescription);
        $('#Consignee').val(ArrayOfContainerStuff[Index].Consignee);
        $('#MarksNo').val(ArrayOfContainerStuff[Index].MarksNo);
        $('#Fob').val(ArrayOfContainerStuff[Index].Fob);
        $('#StuffQuantity').val(ArrayOfContainerStuff[Index].StuffQuantity);
        $('#StuffWeight').val(ArrayOfContainerStuff[Index].StuffWeight);
        $('#StuffingReqDtlId').val(ArrayOfContainerStuff[Index].StuffingReqDtlId);
        $('#SQM').val(ArrayOfContainerStuff[Index].SQM);
        ArrayOfContainerStuff[Index].Insured == 1 ? $('#Insured').prop("checked", true) : $('#Insured').prop("checked", false);

        $('#EquipmentSealType').val(ArrayOfContainerStuff[Index].EquipmentSealType == "" ? 'BTSL' : ArrayOfContainerStuff[Index].EquipmentSealType);
        $('#EquipmentStatus').val(ArrayOfContainerStuff[Index].EquipmentStatus == "" ? '94' : ArrayOfContainerStuff[Index].EquipmentStatus);
        $('#EquipmentQUC').val(ArrayOfContainerStuff[Index].EquipmentQUC == "" ? 'PKG' : ArrayOfContainerStuff[Index].EquipmentQUC);
        $('#MCINPCIN').val(ArrayOfContainerStuff[Index].MCINPCIN);
        $('#MCINPCINText').val(ArrayOfContainerStuff[Index].MCINPCIN);
        $('#SEZ').val(ArrayOfContainerStuff[Index].SEZ);
        ArrayOfContainerStuff.splice(Index, 1);
        ArrayOfContainer.splice(Index, 1);
        GenerateContainerStuffTable();
        ResetAllInvoiceFields();
        EditStatus = 1;
        //}
        //else {
        //    $('#DivContainerStuffingTblErrMsg').html('Please Add The Above Records');
        //}
    }

    function DeleteContainerStuff(Index) {
        debugger;
        ArrayOfContainerStuff.splice(Index, 1);
        ArrayOfContainer.splice(Index, 1);
        GenerateContainerStuffTable();
        ResetAllInvoiceFields();

    }

    function ViewContainerStuff(Index) {
        debugger;
        // if ($('#BtnAddContainerStuff').prop("disabled") == true) {
        $('#BtnAddContainerStuff').prop("disabled", true);
        // if ($('#DivShippingDetails #Exporter').val() == '' || $('#DivShippingDetails #Exporter').prop("disabled") == true) {
        //$('#DivShippingDetails').find('input').prop("disabled", true);
        $('#SearchContainerNo').css("display", "none");
        $('#ContainerNo').val(ArrayOfContainerStuff[Index].ContainerNo);
        $('#CFSCode').val(ArrayOfContainerStuff[Index].CFSCode);
        $('#Size').val(ArrayOfContainerStuff[Index].Size);
        $('#ShippingLineId').val(ArrayOfContainerStuff[Index].ShippingLineId);
        $('#ShippingLine').val(ArrayOfContainerStuff[Index].ShippingLine);
        $('#ShippingSeal').val(ArrayOfContainerStuff[Index].ShippingSeal);
        $('#CustomSeal').val(ArrayOfContainerStuff[Index].CustomSeal);
        $('#' + ArrayOfContainerStuff[Index].StuffingType + '').prop("checked", true);
        // $('#StuffingType').val(ArrayOfCartingRegDtl[Index].StuffingType);
        $('#ShippingBillNo').val(ArrayOfContainerStuff[Index].ShippingBillNo);
        $('#ShippingDate').val(ArrayOfContainerStuff[Index].ShippingDate);
        $('#CHAId').val(ArrayOfContainerStuff[Index].CHAId);
        $('#ExporterId').val(ArrayOfContainerStuff[Index].ExporterId);
        $('#CHA').val(ArrayOfContainerStuff[Index].CHA);
        $('#Exporter').val(ArrayOfContainerStuff[Index].Exporter);
        $('#CargoDescription').val(ArrayOfContainerStuff[Index].CargoDescription);
        $('#Consignee').val(ArrayOfContainerStuff[Index].Consignee);
        $('#MarksNo').val(ArrayOfContainerStuff[Index].MarksNo);
        $('#Fob').val(ArrayOfContainerStuff[Index].Fob);
        $('#StuffQuantity').val(ArrayOfContainerStuff[Index].StuffQuantity);
        $('#StuffWeight').val(ArrayOfContainerStuff[Index].StuffWeight);
        $('#StuffingReqDtlId').val(ArrayOfContainerStuff[Index].StuffingReqDtlId);
        $('#SQM').val(ArrayOfContainerStuff[Index].SQM);
        // $('#Insured').val(ArrayOfContainerStuff[Index].Insured);
        ArrayOfContainerStuff[Index].Insured == 1 ? $('#Insured').prop("checked", true) : $('#Insured').prop("checked", false);
        $('#EquipmentSealType').val(ArrayOfContainerStuff[Index].EquipmentSealType == "" ? 'BTSL' : ArrayOfContainerStuff[Index].EquipmentSealType);
        $('#EquipmentStatus').val(ArrayOfContainerStuff[Index].EquipmentStatus == "" ? '94' : ArrayOfContainerStuff[Index].EquipmentStatus);
        $('#EquipmentQUC').val(ArrayOfContainerStuff[Index].EquipmentQUC == "" ? 'PKG' : ArrayOfContainerStuff[Index].EquipmentQUC);
        $('#MCINPCIN').val(ArrayOfContainerStuff[Index].MCINPCIN);
        $('#MCINPCINText').val(ArrayOfContainerStuff[Index].MCINPCIN);
        $('#SEZ').val(ArrayOfContainerStuff[Index].SEZ);

        // }
        //else {
        //    $('#DivContainerStuffingTblErrMsg').html('Please Add The Above Records');
        //}

    }

    $('#BtnSaveContainerStuff').on("click", function () {
        debugger;
        if (AddStatus != EditStatus) {
            alert('Please click on add button to save the record');
            return false;
        }
        if (AddStatus == EditStatus) {
            AddStatus = 0;
            EditStatus = 0;
        }
        var Radio = $('input[name=Mode]:checked').val();
        if (Radio == "By Road") {
            $('#TransportMode').val(2);
            //document.getElementById("Road").checked = true;
        }
        else {
            $('#TransportMode').val(1);
            //document.getElementById("Train").checked = true;
        }

        $('#DivContainerStuffingTblErrMsg').html('');
        if ($('#ContainerNo').val() == "" && $('#TblContainerStuffing >tbody').html() != "") {
            if (ArrayOfContainerStuff.length != 0) {
                $('#StuffingXML').val(JSON.stringify(ArrayOfContainerStuff));
            }
        }
        else if ($('#ContainerNo').val() != "" && $('#BtnAddContainerStuff').prop("disabled") == true) {
            if (ArrayOfContainerStuff.length != 0) {
                $('#StuffingXML').val(JSON.stringify(ArrayOfContainerStuff));
            }
        }
        else {
            $('#DivContainerStuffingTblErrMsg').html('Please Add The Above Records');
            return false;
        }

        /*if ($('#GREPartyCode').val() == "" || $('#INSPartyCode').val() == "" || $('#STOPartyCode').val() == "" || $('#HandalingPartyCode').val() == "" || $('#GENSPPartyCode').val() == "") {
            alert("Please Fill Up Party Name");
            return false;
        }*/
        if ($('#PayeeName').val() == '') {
            alert("Please Fill Up Payee Name");
            return false;
        }
        if ($('#Origin').val() == "") {
            alert("Please Fill Up Origin");
            return false;
        }
        if ($('#Via').val() == "") {
            alert("Please Fill Up Via");
            return false;
        }
        if ($('#CustodianCode').val() == "" || $('#CustodianCode').val() == null) {
            alert('Please Fill Up Final Destination location');
            return false;
        }

        if ($('#CustodianCode').val() == ""|| $('#CustodianCode').val() == null) {
            alert("Please Fill Up final destination location");
            return false;
        }
        ArryResList = [];
        if (ArrayOfContainerStuff.length > 0) {
            //debugger;
            ArryResList = ArrayOfContainerStuff;

            for (var j = 0; j < ArrayOfContainerStuff.length; j++) {
                if (ArryResList[j].CustomSeal == null || ArryResList[j].CustomSeal == "") {
                    //$("#CustomSeal").rules("add", "required");
                    alert("Please enter Custom Seal");
                    return false;

                }
                if (ArryResList[j].ShippingSeal == null || ArryResList[j].ShippingSeal == "") {
                    // $("#ShippingSeal").rules("add", "required");
                    alert("Please enter Shipping Seal");
                    return false;

                }

                if (ArryResList[j].SEZ == 0 &&  (ArryResList[j].MCINPCIN == null || ArryResList[j].MCINPCIN == "")) {
                    // $("#ShippingSeal").rules("add", "required");
                    alert("MCIN / PCIN Is Required For Every ShipBill.");
                    return false;

                }

            }


        }


        $('#ContOrigin').val($('#Origin').val());
        $('#ContVia').val($('#Via').val());
        var cid = cgtype == "Haz" ? 1 : 2;
        $('#CargoTypeId').val(cid);

        if (confirm("Are You Sure You Want To Save?")) {
            $('#BtnSaveContainerStuff').attr('disabled', true);
            $('#BtnSaveContainerStuff').submit();
        }
    });
    var InvoiceNoGRE = '';
    var InvoiceNoINS = '';
    var InvoiceNoSTO = '';
    var InvoiceNoHND = '';
    var InvoiceNoGENSP = '';
    function ContainerStuffingOnSuccess(data) {
        if (data.Status == 1) {
            debugger;
            //$('#InvoiceNo').val(data.Data.invoicenoGRE);
            //$('#InvoiceNoGRE').val(data.Data.invoicenoGRE);

            var AppValues = data.Data.invoicenoGRE.split("-")
            $('#InvoiceNo').val(AppValues[0]);
            $('#InvoiceNoGRE').val(AppValues[0]);
            $('#ServiceType').val(data.Data.invoicenoINS);
            $('#StuffingId').val(data.Data.invoicenoSTO);
            $('#InvoiceNoINS').val(data.Data.invoicenoINS);
          
            $('#InvoiceNoHND').val(data.Data.invoicenoHND);
            $('#InvoiceNoGENSP').val(data.Data.invoicenoGENSP);

            InvoiceNoGRE = data.Data.invoicenoGRE;
            InvoiceNoINS = data.Data.invoicenoINS;
            InvoiceNoSTO = data.Data.invoicenoSTO;
            InvoiceNoHND = data.Data.invoicenoHND;
            InvoiceNoGENSP = data.Data.invoicenoGENSP;
            //PrintInvoiceByNo();



            $('#BtnGenerateIRN').removeAttr('disabled');
            $('#BtnCIMSF').removeAttr('disabled');

            

            $('#DivContainerStuffingMsg').html(data.Message);
            $('#BtnPrint').prop("disabled", false);
            $('#BtnSaveContainerStuff').prop("disabled", true);
            // setTimeout(GetContainerStuffList, TimeInSeconds);
            $('#TblShippingIns>tbody').html('');
            $('#TblShippingGen>tbody').html('');
            //$('#DivContainerStuffingErrMsg').html('');
            //GetContainerStuffList();
        }
        else if (data.Status == 2 || data.Status == 7) {

            alert(data.Message);
            //setTimeout(LoadContainerStuffing, TimeInSeconds);
            //GetContainerStuffList();
        }
        else {
            $('#DivContainerStuffingErrMsg').html(data.Message);
        }
    }


    function SendSF() {
        debugger;
        var ContainerStuffingId=$('#StuffingId').val();
        var Token = $('input[name="__RequestVerificationToken"]').val();
        $.ajax({
            url: "/Export/Loni_CWCExportV2/SendSF",
            type: "POST",
            dataType: "JSON",
            data: { ContainerStuffingId: ContainerStuffingId },
            headers: { "__RequestVerificationToken": Token },
            async: false,
            success: function (data) {
                if (data.Status == 1) {
                    $('#BtnCIMSF').prop('disabled', true);
                    //location.href = '/Export/Loni_CWCExportV2/DownloadFile?Path=' + data.Path + '&FileName=' + data.Data;
                    alert(data.Message);
                }
                else {
                    alert(data.Message);
                }
            }
        });
    }



    function ContainerStuffingOnFailure() { }
    $('#StuffingDate').on("change", function () {
        ResetAllInvoiceFields();
    });
    function TransPortModeFunc() {
        var Radio = $('input[name=Mode]:checked').val();
        if (Radio == "By Road") {
            $('#TransportMode').val(2);
            document.getElementById("Road").checked = true;
        }
        else {
            $('#TransportMode').val(1);
            document.getElementById("Train").checked = true;
        }
    }
</script>
<script type="text/javascript" src="/scripts/jquery.nicescroll.min.js"></script>
<style>
    #tblPayee.dataTable tbody > tr > td {
        cursor: pointer;
    }

    .slimScrollDiv {
        height: 300px;
    }

    .table.tblhd {
        border-bottom: 0;
    }
</style>
@{
    AjaxOptions options = new AjaxOptions();

    options.OnSuccess = "ContainerStuffingOnSuccess";
    options.OnFailure = "ContainerStuffingOnFailure";
    options.InsertionMode = InsertionMode.InsertAfter;
}


<div class="container-fluid">
    <div style="width:90%;margin-left:auto;margin-right:auto;">
        <div class="row clearfix">
            @using (Ajax.BeginForm("AddEditContainerStuffingDet", "Loni_CWCExportV2", options))
            {
                @Html.AntiForgeryToken()

                <div class="panel with-nav-tabs panel-primary cwc_panel">
                    <div class="panel-heading cwc_panel_heading">
                        <ul class="nav nav-tabs" id="DivTabs">
                            <li class="active"><a href="#DivContainerStuffing" data-toggle="tab">Container /CBT Stuffing</a></li>
                            <li><a href="#DivInvoice" style="display:none;" data-toggle="tab">Invoice</a></li>
                        </ul>
                    </div>

                    @Html.HiddenFor(m => m.GREOperationCFSCodeWiseAmt)
                    @Html.HiddenFor(m => m.GREContainerWiseAmt)
                    @Html.HiddenFor(m => m.INSOperationCFSCodeWiseAmt)
                    @Html.HiddenFor(m => m.INSContainerWiseAmt)
                    @Html.HiddenFor(m => m.STOinvoicecargodtl)
                    @Html.HiddenFor(m => m.STOOperationCFSCodeWiseAmt)
                    @Html.HiddenFor(m => m.HNDOperationCFSCodeWiseAmt)
                    @Html.HiddenFor(m => m.GENSPOperationCFSCodeWiseAmt)
                    @Html.HiddenFor(m => m.PPG_ShippingBillAmt)
                    @Html.HiddenFor(m => m.PPG_ShippingBillAmtGen)
                    @Html.HiddenFor(m => m.ChargesXML)
                    @Html.HiddenFor(m => m.BreakUpdateXML)
                    @Html.Hidden("ServiceType")
                    @Html.Hidden("StuffingId")
                    @Html.Hidden("MCINPCIN")
                    @Html.Hidden("SEZ")
                    <div class="panel-body">
                        <div class="tab-content">
                            <div class="tab-pane fade in active" id="DivContainerStuffing">
                                <div class="Head_h4" style="border:0;">
                                    <div id="DivAddContainerStuffing">
                                        @Html.HiddenFor(m => m.StuffingXML)
                                        @Html.HiddenFor(m => m.StuffingReqId)
                                        @Html.Hidden("StuffingReqDtlId")
                                        @Html.HiddenFor(m => m.TransportMode)
                                        @Html.HiddenFor(m => m.ContOrigin)
                                        @Html.HiddenFor(m => m.ContVia)
                                        @Html.HiddenFor(m => m.SQM)
                                        @Html.HiddenFor(m => m.spacetype)
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Transport Mode:</label>
                                                </div>
                                                <div class="col-md-1-5">
                                                    <div class="boolean-container">
                                                        @Html.RadioButton("Mode", "By Train", new { @id = "Train", @checked = true, @onclick = "TransPortModeFunc();" })
                                                        <label for="Train"><i class="circle"></i><span>By Train</span></label>
                                                    </div>
                                                </div>
                                                <div class="col-md-1-5">
                                                    <div class="boolean-container">
                                                        @Html.RadioButton("Mode", "By Road", new { @id = "Road", @onclick = "TransPortModeFunc();" })
                                                        <label for="Road"><i class="circle"></i><span>By Road</span></label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Request No:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.TextBoxFor(m => m.StuffingReqNo, new { @class = "form-control input-sm", @readonly = true })
                                                    <span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" onclick="ShowRequestNo();" data-target="#DivModalStuffingReqNo"></i></span>
                                                    @Html.ValidationMessageFor(m => m.StuffingReqNo, "", new { @class = "Error_Msg" })
                                                </div>
                                                <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                    <label>Request Date:</label>
                                                </div>
                                                <div class="col-md-2 col_cus_2_5 Date_Img">
                                                    @Html.TextBoxFor(m => m.RequestDate, new { @class = "form-control input-sm", @readonly = true })
                                                    @Html.ValidationMessageFor(m => m.RequestDate, "", new { @class = "Error_Msg" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Stuffing No:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.TextBoxFor(m => m.StuffingNo, new { @class = "form-control input-sm", @readonly = true })
                                                    @Html.ValidationMessageFor(m => m.StuffingNo, "", new { @class = "Error_Msg" })
                                                </div>
                                                <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                    <label>Stuffing Date:</label>
                                                </div>
                                                <div class="col-md-2 col_cus_2_5 Date_Img">
                                                    @Html.TextBoxFor(m => m.StuffingDate, new { @class = "form-control input-sm", @readonly = true })
                                                    @Html.ValidationMessageFor(m => m.StuffingDate, "", new { @class = "Error_Msg" })
                                                </div>
                                            </div>
                                        </div>
                                        <div id="DivContainerNo" class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Container /CBT No:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.TextBox("ContainerNo", "", new { @class = "form-control input-sm", @readonly = true })
                                                    @*<span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#ContainerModal"></i></span>*@
                                                    @Html.ValidationMessage("ContainerNo", "", new { @class = "Error_Msg" })
                                                </div>
                                                <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                    <label>ICD Code:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.TextBox("CFSCode", "", new
                                           {
                                               @class = "form-control input-sm",
                                               @readonly = true@*, maxlength = "11", @onkeypress = "return AllowOnlyDecimal()"*@ })
                                                    @Html.ValidationMessage("CFSCode", new { @class = "Error_Msg" })
                                                </div>
                                            </div>
                                        </div>
                                        <div id="DivContainerSize" class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Container /CBT Size:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.DropDownList("Size", new List<SelectListItem>
                                        {
                                            new SelectListItem { Text="20",Value="20"},
                                            new SelectListItem { Text="40",Value="40"},

                                        }, "----Select----", new { @class = "form-control input-sm dropdown" })
                                                    @Html.ValidationMessage("Size", new { @class = "Error_Msg" })
                                                </div>
                                                <div class="col-md-1 padding_rt">
                                                    <div class="boolean-container">
                                                        @Html.RadioButton("StuffingType", "FCL", new { @class = "", @id = "FCL" })
                                                        <label for="FCL"><i class="circle"></i><span>FCL</span></label>
                                                    </div>
                                                </div>
                                                <div class="col-md-1 padding_rt">
                                                    <div class="boolean-container">
                                                        @Html.RadioButton("StuffingType", "LCL", new { @class = "", @id = "LCL" })
                                                        <label for="LCL"><i class="circle"></i><span>LCL</span></label>
                                                    </div>
                                                </div>
                                                <div class="col-md-offset-0-5 col-md-3" style="display:none">
                                                    <div class="boolean-container">
                                                        @Html.CheckBoxFor(m => m.DirectStuffing, new { @id = "chkDS" })
                                                        <label for="chkDS"><i class="square"></i><span>Direct Stuffing</span></label>
                                                    </div>
                                                </div>
                                                <div class="col-md-offset-2 col-md-1-5 col_cus_5">
                                                    <label>POD:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.TextBoxFor(m => m.POD, new { @class = "form-control input_sm",  @readonly = true })
                                                    <span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#PortOfDestinationModal" onclick="GetAllPortOfDestination()"></i></span>

                                                </div>

                                            </div>
                                        </div>

                                        <div id="DivContainerSize" class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Origin:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.DropDownList("Origin", new List<SelectListItem>
                                        {
                                            new SelectListItem { Text="FAC",Value="FAC"},
                                            new SelectListItem { Text="NON FAC",Value="NON FAC"},

                                        }, "----Select----", new { @class = "form-control input-sm dropdown" })
                                                    @Html.ValidationMessage("Origin", new { @class = "Error_Msg" })
                                                </div>

                                                <div class="col-md-1 col_cus_2">
                                                    <label>POL:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.DropDownListFor(m => m.ContPOL, new List<SelectListItem>
                                        {
                                            new SelectListItem { Text="LONI",Value="LONI"},
                                            new SelectListItem { Text="PIPAVA",Value="PIPAVA"},
                                            new SelectListItem { Text="MUNDRA",Value="MUNDRA"},
                                            new SelectListItem { Text="JNPT",Value="JNPT"},
                                            new SelectListItem { Text="GTIL",Value="GTIL"},
                                            new SelectListItem { Text="NSICT",Value="NSICT"},
                                             new SelectListItem { Text="NSIGT",Value="NSIGT"},
                                              new SelectListItem { Text="BMCT",Value="BMCT"},

                                        }, "----Select----", new { @class = "form-control input-sm dropdown" })
                                                    @*@Html.ValidationMessage("POL", new { @class = "Error_Msg" })*@
                                                </div>


                                                <div class="col-md-offset-1 col-md-1 col_cus_2">
                                                    <label>Via:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.DropDownList("Via", new List<SelectListItem>
                                        {
                                            new SelectListItem { Text="ACTL",Value="ACTL"},
                                            new SelectListItem { Text="TKD",Value="TKD"},
                                              new SelectListItem { Text="ROAD",Value="ROAD"},

                                        }, "----Select----", new { @class = "form-control input-sm dropdown" })
                                                    @Html.ValidationMessage("Via", new { @class = "Error_Msg" })
                                                </div>
                                            </div>
                                        </div>




                                        <div id="DivShippingLine" class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Shipping Line:</label>
                                                </div>
                                                <div class="col-md-10-5 col_cus_10">
                                                    @Html.TextBox("ShippingLine", "", new { @class = "form-control input-sm", @readonly = true })
                                                    @*<span class="search" id="ShippingLineSearch" ><i class="fa fa-search" aria-hidden="true" data-toggle="modal" onclick="ShowShippingLine();" data-target="#ShippingLineModal"></i></span>*@
                                                    @Html.Hidden("ShippingLineId")
                                                </div>
                                            </div>
                                        </div>
                                        <div id="DivShippingSeal" class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Shipping Seal:</label>
                                                </div>
                                                <div class="col-md-4">
                                                    @Html.TextBox("ShippingSeal", "", new
                                           {
                                               @class = "form-control input-sm",
                                               @maxlength = "30" @*, @readonly = true*@ })
                                                </div>
                                                <div class="col-md-1-5 col_cus_offset_0_5 col-md-offset-1 padding_rt">
                                                    <label>Custom Seal:</label>
                                                </div>
                                                <div class="col-md-4">
                                                    @Html.TextBox("CustomSeal", "", new
                                           {
                                               @class = "form-control input-sm",
                                               @maxlength = "30" @*, maxlength = "11", @onkeypress = "return AllowOnlyDecimal()"*@ })
                                                    @Html.ValidationMessage("CustomSeal", new { @class = "Error_Msg" })
                                                </div>
                                            </div>
                                        </div>
                                        <div id="divDestination" class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Final Destination location:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.HiddenFor(m => m.CustodianId)
                                                    @Html.TextBoxFor(m => m.CustodianCode, new { @class = "form-control input_sm", @readonly = true })
                                                    <span class="search" id="CustodianSearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#DestinationModal" onclick="GetFinalDestination()"></i></span>
                                                    @Html.ValidationMessageFor(m => m.CustodianCode, "", new { @class = "Error_Msg" })
                                                </div>
                                                <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                    <label>Equipment Seal Type:</label>
                                                </div>
                                                <div class="col-md-2-5 col_cus_2_5">
                                                    @Html.DropDownList("EquipmentSealType", new List<SelectListItem>
                                                {
                                                   new SelectListItem { Text="Bottle-Seal",Value="BTSL"},
                                                   new SelectListItem { Text="E-Seal",Value="ESEAL"},
                                                   new SelectListItem { Text="Others",Value="OTH"},
                                                }, new { @class = "form-control input-sm dropdown" })
                                                    @Html.ValidationMessage("EquipmentSealType", new { @class = "Error_Msg" })
                                                </div>
                                            </div>
                                        </div>

                                        <div id="divEquipment" class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Equipment Status:</label>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.DropDownList("EquipmentStatus", new List<SelectListItem>
                                                {
                                                   new SelectListItem { Text="Intact",Value="94"},
                                                   new SelectListItem { Text="Damaged",Value="218"}
                                                }, new { @class = "form-control input-sm dropdown" })
                                                    @Html.ValidationMessage("EquipmentStatus", new { @class = "Error_Msg" })
                                                </div>
                                                <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                    <label>Equipment QUC:</label>
                                                </div>
                                                <div class="col-md-2-5 col_cus_2_5">
                                                    @Html.DropDownList("EquipmentQUC", new List<SelectListItem>
                                                {
                                                    new SelectListItem { Text="Package",Value="PKG"},
                                                    new SelectListItem { Text="Kilogram",Value="KGS"},
                                                }, new { @class = "form-control input-sm dropdown" })
                                                    @Html.ValidationMessage("EquipmentQUC", new { @class = "Error_Msg" })
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row Form_Space_top Form_Space_bottom">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2">
                                                    <label>Remarks:</label>
                                                </div>
                                                <div class="col-md-10-5 col_cus_10">
                                                    @Html.TextBoxFor(m => m.Remarks, new { @style = "width:100%;" })
                                                    @Html.ValidationMessageFor(m => m.Remarks, "", new { @class = "Error_Msg", @maxlength = "500" })
                                                </div>
                                            </div>
                                        </div>
                                        <div id="DivContainerStuffingDetails" class="Head_h5">
                                            @*@Html.Hidden("CartingAppDtlId")
                                                @Html.Hidden("LocationDetails")*@
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2 padding_rt">
                                                        <label>Shipping Bill No:</label>
                                                    </div>
                                                    <div class="col-md-2-5">
                                                        @Html.TextBox("ShippingBillNo", "", new
                                               {
                                                   @class = "form-control input-sm",
                                                   @maxlength = "30",
                                                   @readonly = true
                                               })
                                                    </div>
                                                    <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                        <label>Shipping Bill Date:</label>
                                                    </div>
                                                    <div class="col-md-2 col_cus_2_5 Date_Img">
                                                        @Html.TextBox("ShippingDate", "", new { @class = "form-control input-sm", @readonly = true })
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2">
                                                        <label>CHA:</label>
                                                    </div>
                                                    <div class="col-md-10-5 col_cus_10">
                                                        @Html.Hidden("CHAId")
                                                        @Html.TextBox("CHA", "", new { @class = "form-control input-sm", @readonly = true })
                                                        @*<span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" onclick="ShowChaName();" data-target="#CHAHdrModal"></i></span>*@
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2">
                                                        <label>Exporter:</label>
                                                    </div>
                                                    <div class="col-md-10-5 col_cus_10">
                                                        @Html.Hidden("ExporterId")
                                                        @Html.TextBox("Exporter", "", new { @class = "form-control input-sm", @readonly = true })
                                                        @*<span class="search"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" onclick="ShowExporterName();" data-target="#ExporterModal"></i></span>*@
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2">
                                                        <label>Consignee:</label>
                                                    </div>
                                                    <div class="col-md-10-5 col_cus_10">
                                                        @Html.TextBox("Consignee", "", new
                                               {
                                                   @class = "form-control input-sm",
                                                   @maxlength = "30"  @*, @readonly = true*@ })
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2" style="padding-right:0px;">
                                                        <label>Cargo Description:</label>
                                                    </div>
                                                    <div class="col-md-10-5 col_cus_10">
                                                        @Html.TextArea("CargoDescription", "", new
                                               {
                                                   @style = "width:100%;height:100px",
                                                   @maxlength = "1000"  @*, @readonly = true*@ })
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2">
                                                        <label>Marks & No:</label>
                                                    </div>
                                                    <div class="col-md-2-5">
                                                        @Html.TextBox("MarksNo", "", new
                                               {
                                                   @class = "form-control input-sm" @*, @readonly = true*@ })
                                                    </div>
                                                    <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                        <label>FOB Value:</label>
                                                    </div>
                                                    <div class="col-md-2-5">
                                                        @Html.TextBox("Fob", "", new
                                               {
                                                   @class = "form-control input-sm" @*, @readonly = true*@ })
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2">
                                                        <label>Stuffed Qty:</label>
                                                    </div>
                                                    <div class="col-md-2-5">
                                                        @Html.TextBox("StuffQuantity", "", new
                                               {
                                                   @class = "form-control input-sm"@*, @readonly = true*@ })
                                                    </div>
                                                    <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">
                                                        <label>Stuffed Wt (Kg):</label>
                                                    </div>
                                                    <div class="col-md-2-5">
                                                        @Html.TextBox("StuffWeight", "", new
                                               {
                                                   @class = "form-control input-sm" @*, maxlength = "11", @onkeypress = "return AllowOnlyDecimal(event)"*@ })
                                                        @*@Html.ValidationMessage("CUM", new { @class = "Error_Msg" })*@
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2">
                                                        <label>Insured:</label>

                                                    </div>
                                                    <div class="col-md-1">
                                                        <div class="boolean-container">
                                                            <input type="checkbox" id="Insured" />
                                                            <label for="Insured"><i class="square"></i></label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2">
                                                        <label>MCIN/PCIN:</label>

                                                    </div>
                                                    <div class="col-md-2-5">
                                                        <div class="boolean-container">
                                                            @Html.TextBox("MCINPCINText", "", new
                                                       {
                                                           @class = "form-control input-sm",
                                                           @readonly = true
                                                       })
                                                            @*@Html.ValidationMessage("CUM", new { @class = "Error_Msg" })*@
                                                        </div>
                                                    </div>
                                                    <div class="col-md-1-5 col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt">

                                                    </div>
                                                    <div class="col-md-2-5">

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="stoke SignUp_space_top SignUp_space_bottom"></div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-offset-4 col-md-2">
                                                    <input type="button" id="BtnAddContainerStuff" class="btn log_Btn_sm" value="Add" onclick="SaveContainerStuffingDtl()" />
                                                </div>
                                                <div class="col-md-2">
                                                    <input type="button" class="btn log_Btn_sm" value="Reset" />
                                                </div>

                                            </div>
                                            <div id="DivContainerStuffingTblErrMsg" class="logErrMsg Form_Space_top Form_Space_bottom" style="background-color:transparent"></div>
                                            <table class="table table-striped table-bordered dataTable" id="TblContainerStuffing" style="width:100%;">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center">@Html.DisplayName("SL No")</th>
                                                        <th>@Html.DisplayName("Container /CBT No")</th>
                                                        <th>@Html.DisplayName("Shipping Bill No")</th>
                                                        <th>@Html.DisplayName("Shipping Bill Date")</th>
                                                        <th>@Html.DisplayName("Exporter")</th>
                                                        <th>@Html.DisplayName("Stuffed Qty")</th>
                                                        <th>@Html.DisplayName("Stuffed Wt")</th>
                                                        <th>@Html.DisplayName("MCINPCIN")</th>
                                                        <th>@Html.DisplayName("Edit")</th>
                                                        <th class="text-center">@Html.DisplayName("View")</th>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                        @*
                                            Done after discussion with Tonmoy sir.
                                            Party modal added on 23-11-2019 and multiple shipping line is allowed.
                                            First shipping line will be populated in party name.
                                        *@
                                        <div class="Head_h5">
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2">
                                                        <label>Party Name:</label>
                                                    </div>
                                                    <div class="col-md-10-5">
                                                        @Html.HiddenFor(m => m.GREPartyId, new { @value = "0" })
                                                        @Html.TextBoxFor(m => m.GREPartyCode, new { @class = "form-control input-sm", @readOnly = true })
                                                        <span class="search" id="PartySearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" onclick="LoadMoreParty();" data-target="#PartyModal"></i></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2">
                                                        <label>Payee Name:</label>
                                                    </div>
                                                    <div class="col-md-10-5">
                                                        @Html.TextBoxFor(m => m.PayeeName, new { @class = "form-control input-sm", @readonly = true })
                                                        @Html.HiddenFor(m => m.PayeeId)
                                                        <span class="search" id="PayeeSearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" onclick="LoadMore();" data-target="#PayeeModal"></i></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="form-group Form_Input">
                                                    <div class="col-md-1-5 col_cus_2">
                                                        <label>Invoice No.:</label>
                                                    </div>
                                                    <div class="col-md-2-5">
                                                        @Html.TextBox("InvoiceNo", "", new { @class = "form-control input-sm", @readonly = true })
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row Form_Space_top">
                                                <div class="col-md-12">
                                                    <table id="tblGRE" class="table table-bordered table-striped dataTable Table_center">
                                                        <thead>
                                                            <tr>
                                                                <th rowspan="2" style="width:10%;">Charges</th>
                                                                <th rowspan="2" style="width:8%;">Value</th>
                                                                <th colspan="2" style="width:8%;" class="text-center">CGST</th>
                                                                <th colspan="2" style="width:8%;" class="text-center">SGST</th>
                                                                <th colspan="2" style="width:8%;" class="text-center">IGST</th>
                                                                <th rowspan="2" style="width:10%;">Total</th>
                                                            </tr>
                                                            <tr>
                                                                <th style="width:2%;">%</th>
                                                                <th>Amt</th>
                                                                <th style="width:2%;">%</th>
                                                                <th>Amt</th>
                                                                <th style="width:2%;">%</th>
                                                                <th style="border-right:1px solid #ddd;">Amt</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                        <tfoot>
                                                            <tr>
                                                                <td colspan="8" class="text-right">Total:</td>
                                                                <td style="font-weight:bold;color:#ff0000;text-align:right;">
                                                                    @Html.TextBoxFor(m => m.GRETotalAmount, new { @class = "form-control input-sm", @readonly = true })
                                                                </td>
                                                            </tr>
                                                        </tfoot>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="DivInvoice">
                                <div class="Head_h4" style="border:0;">
                                    <div class="Head_h5">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <h5>Charges</h5>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2 padding_rt">
                                                    @Html.LabelFor(m => m.GREPartyCode, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @*@Html.HiddenFor(m => m.GREPartyId, new { @value = "0" })
                    @Html.TextBoxFor(m => m.GREPartyCode, new { @class = "form-control input-sm", @readOnly = true })*@
                                                    <span class="search" id="GREPartySearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#GREPartyModal"></i></span>
                                                    @*@Html.ValidationMessageFor(m => m.PortCharge)*@
                                                </div>

                                                <div class="col-md-offset-4-5 col-md-1-5 col_cus_2 padding_rt">
                                                    <label class="InputLabel">InvoiceNo GRE</label><span class="LabelColon">:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(m => m.InvoiceNoGRE, new { @class = "form-control input-sm", @readOnly = true })
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row Form_Space_top">
                                            <div class="col-md-12">
                                                <table id="tblCWCCharges" class="table table-bordered table-striped dataTable Table_center">
                                                    <thead>
                                                        <tr>
                                                            <th rowspan="2">Charges</th>
                                                            <th rowspan="2">Value</th>
                                                            <th colspan="2" class="text-center">IGST</th>
                                                            <th colspan="2" class="text-center">CGST</th>
                                                            <th colspan="2" class="text-center">SGST</th>
                                                            <th rowspan="2" style="width:15%;">Total</th>
                                                        </tr>
                                                        <tr>
                                                            <th>%</th>
                                                            <th>Amt</th>
                                                            <th>%</th>
                                                            <th>Amt</th>
                                                            <th>%</th>
                                                            <th style="border-right:1px solid #ddd;">Amt</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            @Html.HiddenFor(m => m.GREOperationId, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.GREChargeType, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.GRESACCode, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.GREStartdate)
                                                            @Html.HiddenFor(m => m.GREEndDate)
                                                            @Html.HiddenFor(m => m.GRECFSCode)
                                                            <td>@Html.TextBoxFor(m => m.GREChargeName, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GRECharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GREIGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GREIGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GRECGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GRECGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GRESGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GRESGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GRETotalAmount, new { @class = "form-control input-sm", @readonly = true })</td>
                                                        </tr>
                                                    </tbody>
                                                    @*<tfoot>
                        <tr>
                            <td colspan="8" class="text-right">Total:</td>
                            <td style="font-weight:bold;color:#ff0000;text-align:right;">
                                @Html.TextBoxFor(m => m.GRETotalAmount, new { @class = "form-control input-sm", @readonly = true })
                            </td>
                        </tr>
                    </tfoot>*@
                                                </table>
                                            </div>
                                        </div>

                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2 padding_rt">
                                                    @Html.LabelFor(m => m.INSPartyCode, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.HiddenFor(m => m.INSPartyId, new { @value = "0" })
                                                    @Html.TextBoxFor(m => m.INSPartyCode, new { @class = "form-control input-sm", @readOnly = true })
                                                    <span class="search" id="INSPartySearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#INSPartyModal"></i></span>
                                                    @*@Html.ValidationMessageFor(m => m.PortCharge)*@
                                                </div>

                                                <div class="col-md-offset-4-5 col-md-1-5 col_cus_2 padding_rt">
                                                    <label class="InputLabel">Invoice No INS</label><span class="LabelColon">:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(m => m.InvoiceNoINS, new { @class = "form-control input-sm", @readOnly = true })
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row Form_Space_top">
                                            <div class="col-md-12">
                                                <table id="tblCWCCharges" class="table table-bordered table-striped dataTable Table_center">
                                                    <thead>
                                                        <tr>
                                                            <th rowspan="2">Charges</th>
                                                            <th rowspan="2">Value</th>
                                                            <th colspan="2" class="text-center">IGST</th>
                                                            <th colspan="2" class="text-center">CGST</th>
                                                            <th colspan="2" class="text-center">SGST</th>
                                                            <th rowspan="2" style="width:15%;">Total</th>
                                                        </tr>
                                                        <tr>
                                                            <th>%</th>
                                                            <th>Amt</th>
                                                            <th>%</th>
                                                            <th>Amt</th>
                                                            <th>%</th>
                                                            <th style="border-right:1px solid #ddd;">Amt</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            @Html.HiddenFor(m => m.INSOperationId, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.INSChargeType, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.INSSACCode, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.INSStartdate)
                                                            @Html.HiddenFor(m => m.INSEndDate)
                                                            @Html.HiddenFor(m => m.INSCFSCode)

                                                            <td>@Html.TextBoxFor(m => m.INSChargeName, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.INSCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.INSIGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.INSIGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.INSCGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.INSCGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.INSSGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.INSSGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.INSTotalAmount, new { @class = "form-control input-sm", @readonly = true })</td>
                                                        </tr>
                                                    </tbody>
                                                    @*<tfoot>
                        <tr>
                            <td colspan="8" class="text-right">Total:</td>
                            <td style="font-weight:bold;color:#ff0000;text-align:right;">
                                @Html.TextBoxFor(m => m.INSTotalAmount, new { @class = "form-control input-sm", @readonly = true })
                            </td>
                        </tr>
                    </tfoot>*@
                                                </table>
                                            </div>
                                        </div>


                                        @*<div class="row Form_Space_top">
            <div class="form-group Form_Input">
                <div class="col-md-1-5 col_cus_2 padding_rt">
                    @Html.LabelFor(m => m.STOPartyCode, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                </div>
                <div class="col-md-2-5">
                    @Html.HiddenFor(m => m.STOPartyId, new { @value = "0" })
                    @Html.TextBoxFor(m => m.STOPartyCode, new { @class = "form-control input-sm", @readOnly = true })
                    <span class="search" id="STOPartySearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#STOPartyModal"></i></span>

                </div>

                <div class="col-md-offset-4-5 col-md-1-5 col_cus_2 padding_rt">
                    <label class="InputLabel">Invoice No STO</label><span class="LabelColon">:</span>
                </div>
                <div class="col-md-2">
                    @Html.TextBoxFor(m => m.InvoiceNoSTO, new { @class = "form-control input-sm", @readOnly = true })
                </div>
            </div>
        </div>

        <div class="row Form_Space_top">
            <div class="col-md-12">
                <table id="tblCWCCharges" class="table table-bordered table-striped dataTable Table_center">
                    <thead>
                        <tr>
                            <th rowspan="2">Charges</th>
                            <th rowspan="2">Value</th>
                            <th colspan="2" class="text-center">IGST</th>
                            <th colspan="2" class="text-center">CGST</th>
                            <th colspan="2" class="text-center">SGST</th>
                            <th rowspan="2" style="width:15%;">Total</th>
                        </tr>
                        <tr>
                            <th>%</th>
                            <th>Amt</th>
                            <th>%</th>
                            <th>Amt</th>
                            <th>%</th>
                            <th style="border-right:1px solid #ddd;">Amt</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            @Html.HiddenFor(m => m.STOOperationId, new { @value = "0" })
                            @Html.HiddenFor(m => m.STOChargeType, new { @value = "0" })
                            @Html.HiddenFor(m => m.STOSACCode, new { @value = "0" })
                            <td>@Html.TextBoxFor(m => m.STOChargeName, new { @class = "form-control input-sm", @readonly = true })</td>
                            <td>@Html.TextBoxFor(m => m.STOCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                            <td>@Html.TextBoxFor(m => m.STOIGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                            <td>@Html.TextBoxFor(m => m.STOIGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                            <td>@Html.TextBoxFor(m => m.STOCGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                            <td>@Html.TextBoxFor(m => m.STOCGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                            <td>@Html.TextBoxFor(m => m.STOSGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                            <td>@Html.TextBoxFor(m => m.STOSGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                            <td>@Html.TextBoxFor(m => m.STOTotalAmount, new { @class = "form-control input-sm", @readonly = true })</td>
                        </tr>
                    </tbody>

                </table>
            </div>
        </div>*@

                                        <div class="row Form_Space_top">
                                            <div class="col-md-12">
                                                <div class="Head_h5" style="margin:0;">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <h5>Break-up Insurance Shipping Bill Wise</h5>
                                                        </div>
                                                    </div>
                                                    <div class="row Form_Space_top">
                                                        <div class="col-md-12">
                                                            <table class="table table-striped table-bordered dataTable" id="TblShippingIns" style="width:100%;">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Container No</th>
                                                                        <th>ICD Code</th>
                                                                        <th>Shipping Bill No.</th>
                                                                        <th>Shipping Bill Date</th>
                                                                        <th>FOB</th>
                                                                        <th>Amount</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody></tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>




                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2 padding_rt">
                                                    @Html.LabelFor(m => m.HandalingPartyCode, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.HiddenFor(m => m.CargoTypeId)


                                                    @Html.HiddenFor(m => m.HandalingPartyId, new { @value = "0" })
                                                    @Html.TextBoxFor(m => m.HandalingPartyCode, new { @class = "form-control input-sm", @readOnly = true })
                                                    <span class="search" id="HandalingPartySearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#HandalingPartyModal"></i></span>
                                                    @*@Html.ValidationMessageFor(m => m.PortCharge)*@
                                                </div>

                                                <div class="col-md-offset-4-5 col-md-1-5 col_cus_2 padding_rt">
                                                    <label class="InputLabel">Invoice No. MO</label><span class="LabelColon">:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(m => m.InvoiceNoHND, new { @class = "form-control input-sm", @readOnly = true })
                                                </div>
                                            </div>
                                        </div>
                                        BtnSaveContainerStuff
                                        <div class="row Form_Space_top">
                                            <div class="col-md-12">
                                                <table id="tblCWCCharges" class="table table-bordered table-striped dataTable Table_center">
                                                    <thead>
                                                        <tr>
                                                            <th rowspan="2">Charges</th>
                                                            <th rowspan="2">Value</th>
                                                            <th colspan="2" class="text-center">IGST</th>
                                                            <th colspan="2" class="text-center">CGST</th>
                                                            <th colspan="2" class="text-center">SGST</th>
                                                            <th rowspan="2" style="width:15%;">Total</th>
                                                        </tr>
                                                        <tr>
                                                            <th>%</th>
                                                            <th>Amt</th>
                                                            <th>%</th>
                                                            <th>Amt</th>
                                                            <th>%</th>
                                                            <th style="border-right:1px solid #ddd;">Amt</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            @Html.HiddenFor(m => m.HandalingOperationId, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.HandalingChargeType, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.HandalingSACCode, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.HNDStartdate)
                                                            @Html.HiddenFor(m => m.HNDEndDate)
                                                            @Html.HiddenFor(m => m.HNDCFSCode)
                                                            <td>@Html.TextBoxFor(m => m.HandalingChargeName, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.HandalingCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.HandalingIGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.HandalingIGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.HandalingCGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.HandalingCGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.HandalingSGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.HandalingSGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.HandalingTotalAmount, new { @class = "form-control input-sm", @readonly = true })</td>
                                                        </tr>
                                                    </tbody>
                                                    @*<tfoot>
                        <tr>
                            <td colspan="8" class="text-right">Total:</td>
                            <td style="font-weight:bold;color:#ff0000;text-align:right;">
                                @Html.TextBoxFor(m => m.TotalAmount, new { @class = "form-control input-sm", @readonly = true })
                            </td>
                        </tr>
                    </tfoot>*@
                                                </table>
                                            </div>
                                        </div>


                                        <div class="row Form_Space_top">
                                            <div class="form-group Form_Input">
                                                <div class="col-md-1-5 col_cus_2 padding_rt">
                                                    @Html.LabelFor(m => m.GENSPPartyCode, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                                                </div>
                                                <div class="col-md-2-5">
                                                    @Html.HiddenFor(m => m.GENSPPartyId, new { @value = "0" })
                                                    @Html.TextBoxFor(m => m.GENSPPartyCode, new { @class = "form-control input-sm", @readOnly = true })
                                                    <span class="search" id="GENSPPartySearch"><i class="fa fa-search" aria-hidden="true" data-toggle="modal" data-target="#GENSPPartyModal"></i></span>
                                                    @*@Html.ValidationMessageFor(m => m.PortCharge)*@
                                                </div>

                                                <div class="col-md-offset-4-5 col-md-1-5 col_cus_2 padding_rt">
                                                    <label class="InputLabel">Invoice No. Gen.Space</label><span class="LabelColon">:</span>
                                                </div>
                                                <div class="col-md-2">
                                                    @Html.TextBoxFor(m => m.InvoiceNoGENSP, new { @class = "form-control input-sm", @readOnly = true })
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row Form_Space_top">
                                            <div class="col-md-12">
                                                <table id="tblCWCCharges" class="table table-bordered table-striped dataTable Table_center">
                                                    <thead>
                                                        <tr>
                                                            <th rowspan="2">Charges</th>
                                                            <th rowspan="2">Value</th>
                                                            <th colspan="2" class="text-center">IGST</th>
                                                            <th colspan="2" class="text-center">CGST</th>
                                                            <th colspan="2" class="text-center">SGST</th>
                                                            <th rowspan="2" style="width:15%;">Total</th>
                                                        </tr>
                                                        <tr>
                                                            <th>%</th>
                                                            <th>Amt</th>
                                                            <th>%</th>
                                                            <th>Amt</th>
                                                            <th>%</th>
                                                            <th style="border-right:1px solid #ddd;">Amt</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            @Html.HiddenFor(m => m.GENSPOperationId, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.GENSPChargeType, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.GENSPSACCode, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.STOStartdate, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.STOEndDate, new { @value = "0" })
                                                            @Html.HiddenFor(m => m.STOCFSCode, new { @value = "0" })
                                                            <td>@Html.TextBoxFor(m => m.GENSPChargeName, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GENSPCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GENSPIGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GENSPIGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GENSPCGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GENSPCGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GENSPSGSTPer, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GENSPSGSTCharge, new { @class = "form-control input-sm", @readonly = true })</td>
                                                            <td>@Html.TextBoxFor(m => m.GENSPTotalAmount, new { @class = "form-control input-sm", @readonly = true })</td>
                                                        </tr>
                                                    </tbody>
                                                    @*<tfoot>
                        <tr>
                            <td colspan="8" class="text-right">Total:</td>
                            <td style="font-weight:bold;color:#ff0000;text-align:right;">
                                @Html.TextBoxFor(m => m.TotalAmount, new { @class = "form-control input-sm", @readonly = true })
                            </td>
                        </tr>
                    </tfoot>*@
                                                </table>
                                            </div>
                                        </div>
                                        <div class="row Form_Space_top">
                                            <div class="col-md-12">
                                                <div class="Head_h5" style="margin:0;">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <h5>Break-up Gen. Charge Shipping Bill Wise</h5>
                                                        </div>
                                                    </div>
                                                    <div class="row Form_Space_top">
                                                        <div class="col-md-12">
                                                            <table class="table table-striped table-bordered dataTable" id="TblShippingGen" style="width:100%;">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Container No</th>
                                                                        <th>ICD Code</th>
                                                                        <th>Shipping Bill No.</th>
                                                                        <th>Shipping Bill Date</th>
                                                                        <th>Area</th>
                                                                        <th>Amount</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody></tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="stoke SignUp_space_bottom2 SignUp_space_top2"></div>
                    </div>
                    <div class="row">
                        <div class="col-md-offset-1 col-md-2 SignUp_space_bottom">
                            <input type="button" class="btn log_Btn_sm" value="Save" id="BtnSaveContainerStuff" />
                        </div>
                        <div class="col-md-2">
                            <input type="button" class="btn log_Btn_sm" value="Reset" onclick="$('#DivBody').load('/Export/Loni_CWCExportV2/CreateContainerStuffing')" />
                        </div>
                        <div class="col-md-3">
                            <input type="button" id="BtnGenerateIRN" class="btn log_Btn_sm" value="Generate IRN" onclick="GenerateIRN()" disabled="disabled" />
                        </div>

                        <div class="col-md-2">
                            <input type="button" id="BtnPrint" class="btn log_Btn_sm" value="Print" onclick="PrintInvoiceByNo()" />
                        </div>
                        <div class="col-md-2">
                            <input type="button" id="BtnCIMSF" class="btn log_Btn_sm" disabled value="CIM SF" onclick="SendSF()" />
                        </div>
                    </div>
                    <div class="logSuccMsg" style="background-color:transparent" id="DivContainerStuffingMsg"></div>
                    <div class="logErrMsg Form_Space_bottom" style="background-color:transparent" id="DivContainerStuffingErrMsg"></div>

                </div>
            }
            @Scripts.Render("~/bundles/jqueryval")
            <div class="row">
                <div class="col-md-2">
                    <input type="button" id="btnContainerStuffList" value="Show List" class="btn log_Btn_sm" onclick="GetContainerStuffList()" />
                </div>
                <div class="col-md-12">
                    <div id="DivContainerStuffingList"></div>
                </div>
            </div>
        </div>
    </div>
</div>



<div class="modal fade" id="PayeeModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" onclick="ClosePayee()"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Payee Name</h4>
            </div>
            <div class="modal-body popup_body" style="position:relative;">
                <input placeholder="Search By Party Code" id="PayeeCode" type="text" />
                <span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick="LoadPayee()"></i></span>
                <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                    <thead>
                        <tr>
                            <th colspan="8" width="80%">Payee Name</th>
                            <th colspan="4" width="20%">Payee Code</th>
                        </tr>
                    </thead>
                </table>
                <div id="slim_scroll">
                    <table class="table dataTable table-bordered table-striped slim_tble" id="tblPayee">
                        <tbody></tbody>
                        @*@{
                                if (ViewBag.lstCHA != null)
                                {
                                    foreach (var item in ViewBag.lstCHA)
                                    {
                                        <tr onclick="SelectCHA(@item.EximTraderId,'@item.EximTraderName')">
                                            <td colspan="8" width="80%" class="txt_wrp">@item.EximTraderName</td>
                                            <td colspan="4" width="20%" class="txt_wrp">@item.EximTraderAlias</td>
                                        </tr>
                                    }
                                }
                            }*@
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-6">
                        <button type="button" style="width:100%; margin-left:0;" onclick="LoadMore()" class="btn log_Btn_sm" id="btnLoad">Load More Data</button>
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn log_Btn_sm" onclick="ClosePayee()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="PartyModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" onclick="CloseParty()"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Party Name</h4>
            </div>
            <div class="modal-body popup_body" style="position:relative;">
                <input placeholder="Search By Party Code" id="PartyCode" type="text" />
                <span class="search" style="top: 18px;"><i class="fa fa-search" aria-hidden="true" onclick="LoadParty()"></i></span>
                <table class="table table-striped table-bordered dataTable tblhd" style="width:100%; margin:0 !important; border-bottom:0; padding:0;">
                    <thead>
                        <tr>
                            <th colspan="8" width="80%">Party Name</th>
                            <th colspan="4" width="20%">Party Code</th>
                        </tr>
                    </thead>
                </table>
                <div id="slim_scrollParty">
                    <table class="table dataTable table-bordered table-striped slim_tble" id="tblParty">
                        <tbody></tbody>
                        @*@{
                                if (ViewBag.lstCHA != null)
                                {
                                    foreach (var item in ViewBag.lstCHA)
                                    {
                                        <tr onclick="SelectCHA(@item.EximTraderId,'@item.EximTraderName')">
                                            <td colspan="8" width="80%" class="txt_wrp">@item.EximTraderName</td>
                                            <td colspan="4" width="20%" class="txt_wrp">@item.EximTraderAlias</td>
                                        </tr>
                                    }
                                }
                            }*@
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-6">
                        <button type="button" style="width:100%; margin-left:0;" onclick="LoadMoreParty()" class="btn log_Btn_sm" id="btnLoadParty">Load More Data</button>
                    </div>
                    <div class="col-md-6">
                        <button type="button" class="btn log_Btn_sm" onclick="CloseParty()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="GREPartyModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Party</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="GREPartybox" type="text" />
                <ul class="navList" id="lstGREParty"></ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="INSPartyModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Party</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="INSPartybox" type="text" />
                <ul class="navList" id="lstINSParty"></ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="STOPartyModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Party</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="STOPartybox" type="text" />
                <ul class="navList" id="lstSTOParty"></ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="HandalingPartyModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Party</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="HandalingPartybox" type="text" />
                <ul class="navList" id="lstHandalingParty"></ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="GENSPPartyModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Party</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="GENSPPartybox" type="text" />
                <ul class="navList" id="lstGENSPParty"></ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function GetCountryByDestinationId(Portid, PortName) {
        debugger;

        $('#PortOfDestinationModal').modal('hide');
        $('#POD').val(PortName);

    }

    function PortOfDestinationModalClose() {
        $('#PortOfDestinationModal').modal("hide");
        $('#PortOfDestinationModal .navList > li').show();
        $('#PortOfDestinationBox').val('');
        $('#POD').focus();
    }
    $('#PortOfDestinationBox').keyup(function () {
        var valThis = $(this).val().toLowerCase();
        if (valThis == "") {
            $('#PortOfDestinationModal .navList > li').show();
        } else {
            $('#PortOfDestinationModal .navList > li').each(function () {
                var text = $(this).text().toLowerCase();
                (text.indexOf(valThis) >= 0) ? $(this).show() : $(this).hide();
            });
        };
    });

    function GetAllPortOfDestination() {
        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetPortOfDestination',
            type: 'GET',
            dataType: 'JSON',
            success: function (data) {
                debugger;
                if (data != '') {
                    $('#PortOfDestinationList').html('');

                    var html = '';
                    var tab = 401;
                    var jsondata = JSON.parse(JSON.stringify(data));
                    $.each(jsondata, function (i, item) {
                        html += '<li tabindex=' + tab + '_' + i + ' onkeypress="GetCountryByDestinationId(' + item.PortId + ',&quot;' + item.PortName + '&quot;)" onclick="GetCountryByDestinationId(' + item.PortId + ',&quot;' + item.PortName + '&quot;)">' + item.PortName + '</li>';
                    });

                    $('#PortOfDestinationList').html(html);

                }


            }
        });
    }
    function debounce(func, wait, immediate) {
        var timeout;
        return function () {
            var context = this, args = arguments;
            var later = function () {
                timeout = null;
                if (!immediate) func.apply(context, args);
            };
            var callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) func.apply(context, args);
        };
    };

    document.getElementById('PortOfDestinationBox').addEventListener('keyup', debounce(function () {
        debugger;
        SearchPod();
    }, 1200));




    function SearchPod() {
        var pod = $('#PortOfDestinationBox').val();
        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetPortOfDestinationSearch',
            type: 'GET',
            data: { pod: pod },
            dataType: 'JSON',
            success: function (data) {
                debugger;
                if (data != '') {
                    $('#PortOfDestinationList').html('');

                    var html = '';
                    var tab = 401;
                    var jsondata = JSON.parse(JSON.stringify(data));
                    $.each(jsondata, function (i, item) {
                        html += '<li tabindex=' + tab + '_' + i + ' onkeypress="GetCountryByDestinationId(' + item.PortId + ',&quot;' + item.PortName + '&quot;)" onclick="GetCountryByDestinationId(' + item.PortId + ',&quot;' + item.PortName + '&quot;)">' + item.PortName + '</li>';
                    });

                    $('#PortOfDestinationList').html(html);

                }


            }
        });
    }
    $(function () {
        $('#slim_scroll').slimScroll({
            allowPageScroll: true
        });
        $('#slim_scrollParty').slimScroll({
            allowPageScroll: true
        });
    });
    var Page = -1;
    function debounce(func, wait, immediate) {
        var timeout;
        return function () {
            var context = this, args = arguments;
            var later = function () {
                timeout = null;
                if (!immediate) func.apply(context, args);
            };
            var callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) func.apply(context, args);
        };
    };
    document.getElementById('PayeeCode').addEventListener('keyup', debounce(function () {
        if (document.getElementById('PayeeCode').value != "")
            LoadPayee();
        else {
            $('#tblPayee tbody').html('');
            LoadMore();
        }
    }, 800));
    document.getElementById('PartyCode').addEventListener('keyup', debounce(function () {
        if (document.getElementById('PartyCode').value != "")
            LoadParty();
        else {
            $('#tblParty tbody').html('');
            LoadMoreParty();
        }
    }, 800));
    function SelectPayee(EximTraderId, EximTraderName) {
        if (AddStatus != EditStatus) {
            alert('Please click on add button to select the payee');
            return false;
        }
        if ($('#StuffingReqId').val() == '0') {
            alert('Select Stuffing Request');
            return false;
        }
        if (ArrayOfContainerStuff[0].ShippingLineId == 0 || ArrayOfContainerStuff[0].ShippingLineId == null || ArrayOfContainerStuff[0].ShippingLineId == undefined) {
            alert('Select Shipping Line');
            return false;
        }
        //if (ArrayOfContainerStuff.length != ArrayOfContainerStuff.filter(c=>c.ShippingLineId == ArrayOfContainerStuff[0].ShippingLineId).length)
        //{
        //    alert('Multiple Shipping Line exists');
        //    return false;
        //}

        $('#PayeeId').val(EximTraderId);
        $('#PayeeName').val(EximTraderName);
        $("#PayeeModal").modal("hide");
        if (ValidationDate()) {
            CalculateGREandLNE();
        }

    }
    function CalculateGREandLNE() {
        debugger;
        var StuffingDate = $('#StuffingDate').val();
        var PartyId = $('#GREPartyId').val(); //ArrayOfContainerStuff[0].ShippingLineId;
        $('#ShippingLineSearch').css('display', 'none');
        $('#Size').prop('disabled', true);
        //$('#GREPartyId').val(ArrayOfContainerStuff[0].ShippingLineId);
        //$('#GREPartyCode').val(ArrayOfContainerStuff[0].ShippingLine);

        $.ajax({
            url: '/Export/Loni_CWCExportV2/CalculateGroundRentEmpty',
            type: 'POST',
            data: {
                "StuffingDate": StuffingDate,
                "ArrayOfContainer": JSON.stringify(ArrayOfContainer),
                "PartyId": PartyId,
                "StuffingReqId": $('#StuffingReqId').val()
            },
            success: function (data) {
                debugger;
                if (data != null || data != undefined) {
                    $('#GREContainerWiseAmt').val(JSON.stringify(data.GREContainerWiseAmtLst));
                    $('#GREOperationCFSCodeWiseAmt').val(JSON.stringify(data.GREOperationCFSCodeWiseAmtLst));
                    $('#ChargesXML').val(JSON.stringify(data.lstChargs));
                    $('#BreakUpdateXML').val(JSON.stringify(data.lstPostPaymentChrgBreakup));

                    var html = '';
                    if (data.lstChargs.length > 0) {
                        $.each(data.lstChargs, function (i, item) {
                            html += '<tr><td><input class="form-control input-sm" type="text" value="' + item.ChargeType + '.' + item.ChargeName + '" readonly></td>';
                            html += '<td><input class="form-control input-sm" type="text" value="' + item.Taxable + '" readonly></td>';
                            html += '<td><input class="form-control input-sm" type="text" value="' + item.CGSTPer + '" readonly></td>';
                            html += '<td><input class="form-control input-sm" type="text" value="' + item.CGSTAmt + '" readonly></td>';
                            html += '<td><input class="form-control input-sm" type="text" value="' + item.SGSTPer + '" readonly></td>';
                            html += '<td><input class="form-control input-sm" type="text" value="' + item.SGSTAmt + '" readonly></td>';
                            html += '<td><input class="form-control input-sm" type="text" value="' + item.IGSTPer + '" readonly></td>';
                            html += '<td><input class="form-control input-sm" type="text" value="' + item.IGSTAmt + '" readonly></td>';
                            html += '<td><input class="form-control input-sm" type="text" value="' + item.Total + '" readonly></td>';
                        });
                    }
                    $('#tblGRE tbody').html(html);

                    /*$('#GREOperationId').val(data.GREOperationId);
                    $('#GREChargeType').val(data.GREChargeType);
                    $('#GREChargeName').val(data.GREChargeName);
                    $('#GRETaxable').val(data.GRETaxable);*/
                    $('#GRECharge').val(data.GRECharge);
                    $('#GRECGSTCharge').val(data.GRECGSTCharge);
                    $('#GRESGSTCharge').val(data.GRESGSTCharge);
                    $('#GREIGSTCharge').val(data.GREIGSTCharge);
                    /*$('#GRECGSTPer').val(data.GRECGSTPer);
                    $('#GRESGSTPer').val(data.GRESGSTPer);
                    $('#GREIGSTPer').val(data.GREIGSTPer);*/
                    $('#GRETotalAmount').val(data.GRETotalAmount);
                    /*$('#GRESACCode').val(data.GRESACCode);

                    $('#GREStartdate').val(data.GREStartdate);
                    $('#GREEndDate').val(data.GREEndDate);
                    $('#GRECFSCode').val(data.GRECFSCode);*/
                    $('.search').css('display', 'none');
                    $('#CustodianSearch').css('display', '');
                    $('#StuffingDate').parent().find('img').css('display', 'none');

                    //$('#StuffingReqNo span >i').html('');
                    //$('#StuffingDate span').html('');
                }
            }
        });

    }
    function ClosePayee(EximTraderId, EximTraderName) {
        Page = -1;
        $('#tblPayee tbody').html('');
        $('#PayeeCode').val('');
        $("#PayeeModal").modal("hide");
    }
    function LoadMore() {
        Page++;
        $.ajax({
            url: '/Export/Loni_CWCExportV2/LoadPayeeList',
            type: 'GET',
            data: { Alias: "", Page: Page },
            success: function (data) {
                if (data.Status == 1) {
                    var html = '';
                    $.each(data.Data.lstShiping, function (item, elem) {
                        html += '<tr onclick="SelectPayee(' + elem.EximTraderId + ',&quot;' + elem.EximTraderName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.EximTraderName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.EximTraderAlias + '</td></tr>';
                    });
                    if ($('#tblPayee tbody tr').length > 0)
                        $('#tblPayee tbody').append(html);
                    else $('#tblPayee tbody').html(html);
                    if (data.Data.State == true)
                        $('#btnLoad').prop('disabled', false);
                    else $('#btnLoad').prop('disabled', true);
                }
            }
        });
    }
    function LoadPayee() {
        Page = -1;
        var PayeeCode = $('#PayeeCode').val().trim();
        $.ajax({
            url: '/Export/Loni_CWCExportV2/LoadPayeeList',
            type: 'GET',
            data: { Alias: PayeeCode, Page: 0 },
            success: function (data) {
                if (data.Status == 1) {
                    var html = '';
                    $.each(data.Data.lstShiping, function (item, elem) {
                        html += '<tr onclick="SelectPayee(' + elem.EximTraderId + ',&quot;' + elem.EximTraderName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.EximTraderName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.EximTraderAlias + '</td></tr>';
                    });

                    $('#tblPayee tbody').html(html);

                    if (data.Data.State == true)
                        $('#btnLoad').prop('disabled', false);
                    else $('#btnLoad').prop('disabled', true);
                }
            }
        });
    }
    var PageParty = -1;
    function CloseParty(EximTraderId, EximTraderName) {
        PageParty = -1;
        $('#tblParty tbody').html('');
        $('#PartyCode').val('');
        $("#PartyModal").modal("hide");
    }
    function LoadMoreParty() {
        PageParty++;
        $.ajax({
            url: '/Export/Loni_CWCExportV2/LoadPartyList',
            type: 'GET',
            data: { Alias: "", Page: PageParty },
            success: function (data) {
                if (data.Status == 1) {
                    var html = '';
                    $.each(data.Data.lstShiping, function (item, elem) {
                        html += '<tr onclick="SelectParty(' + elem.EximTraderId + ',&quot;' + elem.EximTraderName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.EximTraderName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.EximTraderAlias + '</td></tr>';
                    });
                    if ($('#tblParty tbody tr').length > 0)
                        $('#tblParty tbody').append(html);
                    else $('#tblParty tbody').html(html);
                    if (data.Data.State == true)
                        $('#btnLoadParty').prop('disabled', false);
                    else $('#btnLoadParty').prop('disabled', true);
                }
            }
        });
    }
    function LoadParty() {
        PageParty = -1;
        var PartyCode = $('#PartyCode').val().trim();
        $.ajax({
            url: '/Export/Loni_CWCExportV2/LoadPartyList',
            type: 'GET',
            data: { Alias: PartyCode, Page: 0 },
            success: function (data) {
                if (data.Status == 1) {
                    var html = '';
                    $.each(data.Data.lstShiping, function (item, elem) {
                        html += '<tr onclick="SelectParty(' + elem.EximTraderId + ',&quot;' + elem.EximTraderName + '&quot;)"><td colspan="8" width="80%" class="txt_wrp">' + elem.EximTraderName + '</td><td colspan="4" width="20%" class="txt_wrp">' + elem.EximTraderAlias + '</td></tr>';
                    });

                    $('#tblParty tbody').html(html);

                    if (data.Data.State == true)
                        $('#btnLoadParty').prop('disabled', false);
                    else $('#btnLoadParty').prop('disabled', true);
                }
            }
        });
    }
    function SelectParty(EximTraderId, EximTraderName) {
        $('#GREPartyId').val(EximTraderId);
        $('#GREPartyCode').val(EximTraderName);
        $("#PartyModal").modal("hide");
    }
    var ViewCHAShippingLine = [];

    //var GREContainerWiseAmtLst = [];
    //var GREOperationCFSCodeWiseAmtLst = [];

    // var INSContainerWiseAmtLst = [];
    //var INSOperationCFSCodeWiseAmtLst = [];

    //var STOinvoicecargodtlLst = [];
    //var HNDOperationCFSCodeWiseAmtLst = [];

    function PrintInvoiceByNo() {
        var invno = $('#InvoiceNo').val();
        if (invno != '') {
            var Token = $('input[name="__RequestVerificationToken"]').val();
            $.ajax({
                url: '@Url.Action("GetBulkInvoiceReport", "Ppg_ReportCWCV2", new { Area = "Report" }) ',
                headers: { "__RequestVerificationToken": Token },
                dataType: 'JSON',
                type: 'POST',
                data: {
                    InvoiceNumber: invno,
                    InvoiceModule: 'EXPCS',
                    PeriodFrom: '@DateTime.Now.ToString("dd/MM/yyyy")',
                    PeriodTo: '@DateTime.Now.ToString("dd/MM/yyyy")',
                    InvoiceModuleName: 'EXPORT CONTAINER STUFFING',
                },
                success: function (data) {
                    if (data.Status == 1) {
                        window.open(data.Data + "?_t=" + (new Date().getTime()), "_blank");
                    }
                    else
                        alert(data.Data);
                }
            });
        }


        @*if (InvoiceNoINS != '') {
            $.ajax({
                url: '@Url.Action("GetBulkInvoiceReport", "Ppg_ReportCWC", new { Area = "Report" }) ',
                headers: { "__RequestVerificationToken": Token },
                dataType: 'JSON',
                type: 'POST',
                data: {
                    InvoiceNumber: InvoiceNoINS,
                    InvoiceModule: 'EXPCS',
                    PeriodFrom: '@DateTime.Now.ToString("dd/MM/yyyy")',
                    PeriodTo: '@DateTime.Now.ToString("dd/MM/yyyy")',
                    InvoiceModuleName: 'Container Stuffing',
                },
                success: function (data) {
                    if (data.Status == 1) {
                        window.open(data.Data + "?_t=" + (new Date().getTime()), "_blank");
                    }
                    else
                        alert(data.Data);
                }
            });
        }
        if(InvoiceNoSTO != ''){
            $.ajax({
                url: '@Url.Action("GetBulkInvoiceReport", "Ppg_ReportCWC", new { Area = "Report" }) ',
                headers: { "__RequestVerificationToken": Token },
                dataType: 'JSON',
                type: 'POST',
                data: {
                    InvoiceNumber: InvoiceNoSTO,
                    InvoiceModule: 'EXPCSSTO',
                    PeriodFrom: '@DateTime.Now.ToString("dd/MM/yyyy")',
                    PeriodTo: '@DateTime.Now.ToString("dd/MM/yyyy")',
                    InvoiceModuleName: 'Container Stuffing',
                },
                success: function (data) {
                    if (data.Status == 1) {
                        window.open(data.Data + "?_t=" + (new Date().getTime()), "_blank");

                    }
                    else
                        alert(data.Data);
                }
            });
        }
        if (InvoiceNoHND != '') {
            $.ajax({
                url: '@Url.Action("GetBulkInvoiceReport", "Ppg_ReportCWC", new { Area = "Report" }) ',
                headers: { "__RequestVerificationToken": Token },
                dataType: 'JSON',
                type: 'POST',
                data: {
                    InvoiceNumber: InvoiceNoHND,
                    InvoiceModule: 'EXPCS',
                    PeriodFrom: '@DateTime.Now.ToString("dd/MM/yyyy")',
                    PeriodTo: '@DateTime.Now.ToString("dd/MM/yyyy")',
                    InvoiceModuleName: 'Container Stuffing',
                },
                success: function (data) {
                    if (data.Status == 1)
                        window.open(data.Data + "?_t=" + (new Date().getTime()), "_blank");
                    else
                        alert(data.Data);
                }
            });
        }



        if (InvoiceNoGENSP != '') {
            $.ajax({
                url: '@Url.Action("GetBulkInvoiceReport", "Ppg_ReportCWC", new { Area = "Report" }) ',
                headers: { "__RequestVerificationToken": Token },
                dataType: 'JSON',
                type: 'POST',
                data: {
                    InvoiceNumber: InvoiceNoGENSP,
                    InvoiceModule: 'EXPCS',
                    PeriodFrom: '@DateTime.Now.ToString("dd/MM/yyyy")',
                    PeriodTo: '@DateTime.Now.ToString("dd/MM/yyyy")',
                    InvoiceModuleName: 'Container Stuffing',
                },
                success: function (data) {
                    if (data.Status == 1)
                        window.open(data.Data + "?_t=" + (new Date().getTime()), "_blank");
                    else
                        alert(data.Data);
                }
            });
        }*@
        ResetAllFields();
        ResetAllInvoiceFields();
        setTimeout(LoadContainerStuffing, TimeInSeconds);

        //else {
        //alert("Invoice No not generated");
        //}
    }

    function GenerateIRN() {
        debugger;
        $.ajax({
            url: '/Import/Ppg_CWCImport/GetIRNForYardInvoice',
            type: 'POST',
            data: { InvoiceNo: $('#InvoiceNo').val(), SupplyType: $('#ServiceType').val() },
            // headers:{"__RequestVerificationToken":Token},
            dataType: 'JSON',
            success: function (data) {

                alert(data.Message);
            }
        });
    }

    $('#GREPartySearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("ListOfGREParty", "Loni_CWCExportV2 ", new { Area = "Export" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;
                ViewCHAShippingLine = data;
                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.GREPartyId + '" " onclick="GetGREParty(this)">' + item.GREPartyCode + '</li>';
                });
                $('#lstGREParty').html(html);
            }
        });

    });
    function GetGREParty(elem) {

        $('#GREPartyCode').val($(elem).text());
        $('#GREPartyId').val($(elem).attr('id'))
        CalculateGroundRentEmpty();
        $("#GREPartyModal").modal("hide");
    }

    function CalculateGroundRentEmpty() {
        debugger;

        var StuffingDate = $('#StuffingDate').val();

        var GREPartyId = $('#GREPartyId').val();

        $.ajax({
            url: '/Export/Loni_CWCExportV2/CalculateGroundRentEmpty',
            type: 'POST',
            data: {
                "StuffingDate": StuffingDate, "ArrayOfContainer": JSON.stringify(ArrayOfContainer), "GREPartyId": GREPartyId
            },
            success: function (data) {
                debugger;
                if (data != null || data != undefined) {
                    //GREContainerWiseAmtLst=data.GREContainerWiseAmtLst;
                    //GREOperationCFSCodeWiseAmtLst = data.GREOperationCFSCodeWiseAmtLst;
                    $('#GREContainerWiseAmt').val(JSON.stringify(data.GREContainerWiseAmtLst));
                    $('#GREOperationCFSCodeWiseAmt').val(JSON.stringify(data.GREOperationCFSCodeWiseAmtLst));

                    debugger;
                    $('#GREOperationId').val(data.GREOperationId);
                    $('#GREChargeType').val(data.GREChargeType);
                    $('#GREChargeName').val(data.GREChargeName);
                    $('#GRETaxable').val(data.GRETaxable);
                    $('#GRECharge').val(data.GRECharge);
                    $('#GRECGSTCharge').val(data.GRECGSTCharge);
                    $('#GRESGSTCharge').val(data.GRESGSTCharge);
                    $('#GREIGSTCharge').val(data.GREIGSTCharge);
                    $('#GRECGSTPer').val(data.GRECGSTPer);
                    $('#GRESGSTPer').val(data.GRESGSTPer);
                    $('#GREIGSTPer').val(data.GREIGSTPer);
                    $('#GRETotalAmount').val(data.GRETotalAmount);
                    $('#GRESACCode').val(data.GRESACCode);

                    $('#GREStartdate').val(data.GREStartdate);
                    $('#GREEndDate').val(data.GREEndDate);
                    $('#GRECFSCode').val(data.GRECFSCode);
                }
            }
        });

    }
    $('#INSPartySearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("ListOfINSParty", "Loni_CWCExportV2", new { Area = "Export" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;
                ViewCHAShippingLine = data;
                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.INSPartyId + '" " onclick="GetINSParty(this)">' + item.INSPartyCode + '</li>';
                });
                $('#lstINSParty').html(html);
            }
        });

    });
    function GetINSParty(elem) {

        $('#INSPartyCode').val($(elem).text());
        $('#INSPartyId').val($(elem).attr('id'))
        CalculateINS();
        $("#INSPartyModal").modal("hide");
    }

    function CalculateINS() {
        debugger;
        var StuffingDate = $('#StuffingDate').val();
        var ContainerNo = $('#ContainerNo').val();
        var CFSCode = $('#CFSCode').val();
        var Size = $('#Size').val();
        var INSPartyId = $('#INSPartyId').val();

        $.ajax({
            url: '/Export/Loni_CWCExportV2/CalculateINS',
            type: 'POST',
            data: {
                "StuffingDate": StuffingDate, "ArrayOfContainer": JSON.stringify(ArrayOfContainer), "INSPartyId": INSPartyId
            },
            success: function (data) {
                debugger;
                if (data != null || data != undefined) {
                    debugger;
                    //INSContainerWiseAmtLst = data.INSContainerWiseAmtLst;
                    //INSOperationCFSCodeWiseAmtLst = data.INSOperationCFSCodeWiseAmtLst;

                    $('#INSContainerWiseAmt').val(JSON.stringify(data.INSContainerWiseAmtLst));
                    $('#INSOperationCFSCodeWiseAmt').val(JSON.stringify(data.INSOperationCFSCodeWiseAmtLst));
                    $('#PPG_ShippingBillAmt').val(JSON.stringify(data.LstppgShipDtl));


                    $('#INSOperationId').val(data.INSOperationId);
                    $('#INSChargeType').val(data.INSChargeType);
                    $('#INSChargeName').val(data.INSChargeName);
                    $('#INSTaxable').val(data.INSTaxable);
                    $('#INSCharge').val(data.INSCharge);
                    $('#INSCGSTCharge').val(data.INSCGSTCharge);
                    $('#INSSGSTCharge').val(data.INSSGSTCharge);
                    $('#INSIGSTCharge').val(data.INSIGSTCharge);
                    $('#INSCGSTPer').val(data.INSCGSTPer);
                    $('#INSSGSTPer').val(data.INSSGSTPer);
                    $('#INSIGSTPer').val(data.INSIGSTPer);
                    $('#INSTotalAmount').val(data.INSTotalAmount);
                    $('#INSSACCode').val(data.INSSACCode);
                    $('#INSStartdate').val(data.INSStartdate);
                    $('#INSEndDate').val(data.INSEndDate);
                    $('#INSCFSCode').val(data.INSCFSCode);
                    var Html = "";
                    $.each(data.LstppgShipDtl, function (i, item) {
                        debugger;
                        Html += '<tr><td>' + item.ContainerNo + '</td><td>' + item.CFSCode + '</td><td>' + item.ShippingBillNo + '</td><td>' + item.ShippingDate + '</td><td>' + item.FOB + '</td><td>' + item.Amount + '</td></tr>';

                    });
                    //if ($('#TblContainerStuffing>tbody').find('td').eq(1).text() != contNo)
                    //{
                    //    $('#TblContainerStuffing>tbody').html(Html);
                    //}
                    //else {
                    //    alert("Container No already added.");
                    //}



                    $('#TblShippingIns>tbody').html(Html);
                    $('#TblShippingIns>tbody').html(Html);
                    $('#TTblShippingIns').show();
                }
            }
        });
    }

    $('#STOPartySearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("ListOfSTOParty", "Loni_CWCExportV2", new { Area = "Export" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;
                ViewCHAShippingLine = data;
                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.STOPartyId + '" " onclick="GetSTOParty(this)">' + item.STOPartyCode + '</li>';
                });
                $('#lstSTOParty').html(html);
            }
        });

    });
    function GetSTOParty(elem) {
        $('#STOPartyCode').val($(elem).text());
        $('#STOPartyId').val($(elem).attr('id'))
        CalculateSTO();
        $("#STOPartyModal").modal("hide");
    }
    function CalculateSTO() {
        debugger;
        var StuffingDate = $('#StuffingDate').val();
        var ContainerNo = $('#ContainerNo').val();
        var CFSCode = $('#CFSCode').val();
        var Size = $('#Size').val();
        var STOPartyId = $('#STOPartyId').val();

        $.ajax({
            url: '/Export/Loni_CWCExportV2/CalculateSTO',
            type: 'POST',
            data: {
                "StuffingDate": StuffingDate, "ArrayOfContainer": JSON.stringify(ArrayOfContainer), "STOPartyId": STOPartyId
            },
            success: function (data) {
                debugger;
                if (data != null || data != undefined) {
                    debugger;

                    $('#STOinvoicecargodtl').val(JSON.stringify(data.STOinvoicecargodtlLst));
                    $('#STOOperationCFSCodeWiseAmt').val(JSON.stringify(data.STOOperationCFSCodeWiseAmtLst));

                    $('#STOOperationId').val(data.STOOperationId);
                    $('#STOChargeType').val(data.STOChargeType);
                    $('#STOChargeName').val(data.STOChargeName);
                    $('#STOTaxable').val(data.STOTaxable);
                    $('#STOCharge').val(data.STOCharge);
                    $('#STOCGSTCharge').val(data.STOCGSTCharge);
                    $('#STOSGSTCharge').val(data.STOSGSTCharge);
                    $('#STOIGSTCharge').val(data.STOIGSTCharge);
                    $('#STOCGSTPer').val(data.STOCGSTPer);
                    $('#STOSGSTPer').val(data.STOSGSTPer);
                    $('#STOIGSTPer').val(data.STOIGSTPer);
                    $('#STOTotalAmount').val(data.STOTotalAmount);
                    $('#STOSACCode').val(data.STOSACCode);
                }
            }
        });
    }


    $('#HandalingPartySearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("ListOfHandalingParty", "Loni_CWCExportV2", new { Area = "Export" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;

                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.HandalingPartyId + '" " onclick="GetHandalingParty(this)">' + item.HandalingPartyCode + '</li>';
                });
                $('#lstHandalingParty').html(html);
            }
        });

    });
    function GetHandalingParty(elem) {
        $('#HandalingPartyCode').val($(elem).text());
        $('#HandalingPartyId').val($(elem).attr('id'))
        CalculateHandaling();
        $("#HandalingPartyModal").modal("hide");
    }
    function CalculateHandaling() {
        debugger;
        var cid = cgtype == "Haz" ? 1 : 2;
        $('#CargoTypeId').val(cid);
        var StuffingDate = $('#StuffingDate').val();
        var HandalingPartyId = $('#HandalingPartyId').val();
        //   var Radio = $('input[name=Mode]:checked').val();
        //  var TMode = "";
        //  if (Radio == "By Road") {
        //      TMode = "Road";
        //document.getElementById("Road").checked = true;
        //  }
        //  else {
        //      TMode = "Train";
        //document.getElementById("Train").checked = true;
        // }

        var Orig = $('#Origin').val();
        var Via = $('#Via').val();
        $.ajax({
            url: '/Export/Loni_CWCExportV2/CalculateHandaling',
            type: 'POST',
            data: {
                "StuffingDate": StuffingDate, "Origin": Orig, "Via": Via, "ArrayOfContainer": JSON.stringify(ArrayOfContainer), "HandalingPartyId": HandalingPartyId, "CargoType": cgtype
            },
            success: function (data) {
                debugger;
                if (data != null || data != undefined) {
                    debugger;
                    //HNDOperationCFSCodeWiseAmtLst = data.HNDOperationCFSCodeWiseAmtLst;
                    $('#HNDOperationCFSCodeWiseAmt').val(JSON.stringify(data.HNDOperationCFSCodeWiseAmtLst));

                    $('#HandalingOperationId').val(data.HandalingOperationId);
                    $('#HandalingChargeType').val(data.HandalingChargeType);
                    $('#HandalingChargeName').val(data.HandalingChargeName);
                    $('#HandalingTaxable').val(data.HandalingTaxable);
                    $('#HandalingCharge').val(data.HandalingCharge);
                    $('#HandalingCGSTCharge').val(data.HandalingCGSTCharge);
                    $('#HandalingSGSTCharge').val(data.HandalingSGSTCharge);
                    $('#HandalingIGSTCharge').val(data.HandalingIGSTCharge);
                    $('#HandalingCGSTPer').val(data.HandalingCGSTPer);
                    $('#HandalingSGSTPer').val(data.HandalingSGSTPer);
                    $('#HandalingIGSTPer').val(data.HandalingIGSTPer);
                    $('#HandalingTotalAmount').val(data.HandalingTotalAmount);
                    $('#HandalingSACCode').val(data.HandalingSACCode);
                    $('#HNDStartdate').val(data.HNDStartdate);
                    $('#HNDEndDate').val(data.HNDEndDate);
                    $('#HNDCFSCode').val(data.HNDCFSCode);
                }
            }
        });
    }





    $('#GENSPPartySearch').on("click", function () {
        debugger;
        $.ajax({
            url: '@Url.Action("ListOfGENSPParty", "Loni_CWCExportV2", new { Area = "Export" })',
            dataType: 'JSON',
            type: 'GET',
            success: function (data) {
                debugger;

                var html = '';
                $.each(data, function (i, item) {
                    html += '<li id="' + item.GENSPPartyId + '" " onclick="GetGENSPParty(this)">' + item.GENSPPartyCode + '</li>';
                });
                $('#lstGENSPParty').html(html);
            }
        });

    });
    function GetGENSPParty(elem) {
        $('#GENSPPartyCode').val($(elem).text());
        $('#GENSPPartyId').val($(elem).attr('id'))
        CalculateGENSP();
        $("#GENSPPartyModal").modal("hide");
    }
    function CalculateGENSP() {
        debugger;
        var StuffingDate = $('#StuffingDate').val();
        var GENSPPartyId = $('#GENSPPartyId').val();

        $.ajax({
            url: '/Export/Loni_CWCExportV2/CalculateGENSP',
            type: 'POST',
            data: {
                "StuffingDate": StuffingDate, "ArrayOfContainer": JSON.stringify(ArrayOfContainer), "GENSPPartyId": GENSPPartyId
            },
            success: function (data) {
                debugger;
                if (data != null || data != undefined) {
                    debugger;
                    $('#STOinvoicecargodtl').val(JSON.stringify(data.STOinvoicecargodtlLst));

                    //HNDOperationCFSCodeWiseAmtLst = data.HNDOperationCFSCodeWiseAmtLst;
                    $('#GENSPOperationCFSCodeWiseAmt').val(JSON.stringify(data.GENSPOperationCFSCodeWiseAmtLst));
                    $('#PPG_ShippingBillAmtGen').val(JSON.stringify(data.LstppgShipDtl));


                    $('#GENSPOperationId').val(data.GENSPOperationId);
                    $('#GENSPChargeType').val(data.GENSPChargeType);
                    $('#GENSPChargeName').val(data.GENSPChargeName);
                    $('#GENSPTaxable').val(data.GENSPTaxable);
                    $('#GENSPCharge').val(data.GENSPCharge);
                    $('#GENSPCGSTCharge').val(data.GENSPCGSTCharge);
                    $('#GENSPSGSTCharge').val(data.GENSPSGSTCharge);
                    $('#GENSPIGSTCharge').val(data.GENSPIGSTCharge);
                    $('#GENSPCGSTPer').val(data.GENSPCGSTPer);
                    $('#GENSPSGSTPer').val(data.GENSPSGSTPer);
                    $('#GENSPIGSTPer').val(data.GENSPIGSTPer);
                    $('#GENSPTotalAmount').val(data.GENSPTotalAmount);
                    $('#GENSPSACCode').val(data.GENSPSACCode);
                    $("#GENSPPartyModal").modal("hide");

                    $('#STOStartdate').val(data.STOStartdate);
                    $('#STOEndDate').val(data.STOEndDate);
                    $('#STOCFSCode').val(data.STOCFSCode);
                    var Html = "";
                    $.each(data.LstppgShipDtl, function (i, item) {
                        debugger;
                        Html += '<tr><td>' + item.ContainerNo + '</td><td>' + item.CFSCode + '</td><td>' + item.ShippingBillNo + '</td><td>' + item.ShippingDate + '</td><td>' + item.FOB + '</td><td>' + item.Amount + '</td></tr>';

                    });
                    //if ($('#TblContainerStuffing>tbody').find('td').eq(1).text() != contNo)
                    //{
                    //    $('#TblContainerStuffing>tbody').html(Html);
                    //}
                    //else {
                    //    alert("Container No already added.");
                    //}



                    $('#TblShippingGen>tbody').html(Html);
                    $('#TblShippingGen>tbody').html(Html);
                    $('#TblShippingGen').show();
                }
            }
        });
    }



</script>



<div class="modal fade" id="DivModalStuffingReqNo" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List Of Request No.</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="SearchReqNo" type="text" />
                <ul class="navList" id="LstRequestNo">
                    @*@{
                            if (ViewBag.LstRequestNo != null)
                            {
                                foreach (var data in ViewBag.LstRequestNo)
                                {
                                    <li id="@data.Value">@data.Text</li>
                                }
                            }
                        }*@
                </ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="CHAHdrModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List Of CHA</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="SearchCHAHdr" type="text" />
                <ul class="navList" id="ListOfCHAHdr"></ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="ExporterModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List Of Exporter</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="SearchExporter" type="text" />
                <ul class="navList" id="LstExporter"></ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="ShippingLineModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Shipping Line</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="ShippingLineBox" type="text" />
                <ul class="navList" id="ShippingLineList"></ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="ContainerModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Container /CBT No</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="ContainerBox" type="text" />
                <ul class="navList" id="ContainerList">
                    @*<li></li>*@
                    @*@{
                            if (ViewBag.ContainerList != null)
                            {
                                foreach (var item in ViewBag.ContainerList)
                                {
                                    <li id="@item.Value">@item.Text</li>
                                }
                            }
                        }*@
                </ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<div class="modal fade mTabindex" id="PortOfDestinationModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" onclick="PortOfDestinationModalClose()"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of POD</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="PortOfDestinationBox" type="text" tabindex="401" />
                <ul class="navList" id="PortOfDestinationList"></ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" onclick="PortOfDestinationModalClose()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade mTabindex" id="DestinationModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content popup_modal">
            <div class="modal-header popup_header">
                <button type="button" class="close" onclick="DestinationModalClose()"><i class="fa fa-times" aria-hidden="true"></i></button>
                <h4 class="modal-title">List of Final Destination</h4>
            </div>
            <div class="modal-body popup_body">
                <input placeholder="Search Me" id="FinalDestinationBox" type="text" tabindex="401" />
                <ul class="navList" id="FinalDestinationList"></ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-6 col-md-6">
                        <button type="button" class="btn log_Btn_sm" onclick="DestinationModalClose()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function GetFinalDestination() {
        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetFinalDestination',
            type: 'GET',
            dataType: 'JSON',
            success: function (data) {
                debugger;
                if (data != '') {
                    $('#FinalDestinationList').html('');
                    var html = '';
                    var tab = 401;
                    var jsondata = JSON.parse(JSON.stringify(data));
                    $.each(jsondata, function (i, item) {
                        html += '<li tabindex=' + tab + '_' + i + ' onkeypress="SelectFinalDestination(' + item.CustodianId + ',&quot;' + item.CustodianCode + '&quot;)" onclick="SelectFinalDestination(' + item.CustodianId + ',&quot;' + item.CustodianCode + '&quot;)">' + item.CustodianCode + '</li>';
                    });

                    $('#FinalDestinationList').html(html);

                }
            }
        });
    }

    function debounce(func, wait, immediate) {
        var timeout;
        return function () {
            var context = this, args = arguments;
            var later = function () {
                timeout = null;
                if (!immediate) func.apply(context, args);
            };
            var callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) func.apply(context, args);
        };
    };

    document.getElementById('FinalDestinationBox').addEventListener('keyup', debounce(function () {
        debugger;
        SearchFinalDestination();
    }, 1200));




    function SearchFinalDestination() {
        var CustodianName = $('#FinalDestinationBox').val();
        $.ajax({
            url: '/Export/Loni_CWCExportV2/GetFinalDestination',
            type: 'GET',
            data: { CustodianName: CustodianName },
            dataType: 'JSON',
            success: function (data) {
                debugger;
                if (data != '') {
                    $('#FinalDestinationList').html('');
                    var html = '';
                    var tab = 401;
                    var jsondata = JSON.parse(JSON.stringify(data));
                    $.each(jsondata, function (i, item) {
                        html += '<li tabindex=' + tab + '_' + i + ' onkeypress="SelectFinalDestination(' + item.CustodianId + ',&quot;' + item.CustodianCode + '&quot;)" onclick="SelectFinalDestination(' + item.CustodianId + ',&quot;' + item.CustodianCode + '&quot;)">' + item.CustodianCode + '</li>';
                    });
                    $('#FinalDestinationList').html(html);
                }
            }
        });
    }


    function SelectFinalDestination(CustodianId, CustodianCode) {
        var dt = CustodianCode;
        var dtvalue = dt.split("-");
        var dtval = dtvalue[0];
        $('#CustodianId').val(CustodianId);
        $('#CustodianCode').val(dtval);
        $('#DestinationModal').modal("hide");
    }
    function DestinationModalClose() {
        $('#DestinationModal').modal("hide");
        $('#DestinationModal .navList > li').show();
        $('#DestinationBox').val('');
    }
</script>