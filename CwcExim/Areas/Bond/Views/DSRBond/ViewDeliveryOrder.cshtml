@model CwcExim.Areas.Bond.Models.DSRDeliveryOrder

<div class="container-fluid">
    <div class="col-md-offset-0-5 col-md-11">
        <div class="Head_h4">
            <div>
                @Html.Hidden("GodownId")
                @Html.Hidden("DepositAppId")
                @Html.Hidden("DeliveryOrderXml")
                @Html.HiddenFor(m => m.SpaceAppId)
                @Html.HiddenFor(m => m.CHAId)
                @Html.HiddenFor(m => m.DeliveryOrderId)
                @Html.Hidden("DeliveryOrderDtlId")
                <div class="row">
                    <div class="col-md-12">
                        <h4>View Delivery Order</h4>
                    </div>
                </div>
                <div class="row Form_Space_top">
                    <div class="form-group Form_Input">
                        <div class="col-md-1-5 col_cus_2 padding_rt">
                            <label>Delivery Order No:</label>
                        </div>
                        <div class="col-md-2-5">
                            @Html.TextBoxFor(m => m.DeliveryOrderNo, new { @class = "form-control input-sm", @readonly = true })
                            @Html.ValidationMessageFor(m => m.DeliveryOrderNo, "", new { @class = "Error_Msg" })
                        </div>
                        <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5 padding_rt">
                            <label>Delivery Order Date:</label>
                        </div>
                        <div class="col-md-2 col_cus_2_5 Date_Img">
                            @Html.TextBoxFor(m => m.DeliveryOrderDate, new { @class = "form-control input-sm", @readonly = true })
                            @Html.ValidationMessageFor(m => m.DeliveryOrderDate, "", new { @class = "Error_Msg" })
                        </div>
                    </div>
                </div>
                @*<div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                <label>Work Order No:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBoxFor(m => m.WorkOrderNo, new { @class = "form-control input-sm", @readonly = true })
                                @Html.ValidationMessageFor(m => m.WorkOrderNo, "", new { @class = "Error_Msg" })
                            </div>
                            <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 padding_rt col-md-1-5">
                                <label>Work Order Date:</label>
                            </div>
                            <div class="col-md-2 col_cus_2_5 Date_Img">
                                @Html.TextBoxFor(m => m.WorkOrderDate, new { @class = "form-control input-sm", @readonly = true })
                                @Html.ValidationMessageFor(m => m.WorkOrderDate, "", new { @class = "Error_Msg" })
                            </div>
                        </div>
                    </div>*@
                <div class="row Form_Space_top">
                    <div class="form-group Form_Input">
                        <div class="col-md-1-5 col_cus_2">
                            <label>SAC No:</label>
                        </div>
                        <div class="col-md-2-5">
                            @Html.TextBoxFor(m => m.SacNo, new { @class = "form-control input-sm", @readonly = true })
                        </div>
                        <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5">
                            <label>SAC Date:</label>
                        </div>
                        <div class="col-md-2 col_cus_2_5">
                            @Html.TextBoxFor(m => m.SacDate, new { @class = "form-control input-sm", @readonly = true })
                        </div>
                    </div>
                </div>
                <div class="row Form_Space_top">
                    <div class="form-group Form_Input">
                        <div class="col-md-1-5 col_cus_2 padding_rt">
                            @Html.LabelFor(m => m.BondNo, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                        </div>
                        <div class="col-md-2-5">
                            @Html.TextBoxFor(m => m.BondNo, new { @class = "form-control input-sm", @readonly = true })
                        </div>
                        <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5">
                            <label>Bond Date:</label>
                        </div>
                        <div class="col-md-2 col_cus_2_5">
                            @Html.TextBoxFor(m => m.BondDate, new { @class = "form-control input-sm", @readonly = true })
                        </div>
                    </div>
                </div>
                <div class="row Form_Space_top">
                    <div class="form-group Form_Input">
                        <div class="col-md-1-5 col_cus_2">
                            @Html.LabelFor(m => m.Importer, new { @class = "InputLabel" })<span class="LabelColon">:</span>
                        </div>
                        <div class="col-md-10-5 col_cus_10">
                            @Html.TextBoxFor(m => m.Importer, new { @class = "form-control input-sm", @readonly = true })
                        </div>
                    </div>
                </div>
                <div class="row Form_Space_top">
                    <div class="form-group Form_Input">
                        <div class="col-md-1-5 col_cus_2 padding_rt">
                            <label>Remarks:</label>
                        </div>
                        <div class="col-md-10-5 col_cus_10">
                            @Html.TextAreaFor(m => m.Remarks, new { @class = "form-control input-sm", @style = "width:100%;height:100px;", @disabled = true })
                            @Html.ValidationMessageFor(m => m.Remarks, "", new { @class = "Error_Msg" })
                        </div>
                    </div>
                </div>
                <div class="row Form_Space_top">
                    <div class="form-group Form_Input">
                        <div class="col-md-1-5 col_cus_2 padding_rt">
                            <label>Last Delivery Date:</label>
                        </div>
                        <div class="col-md-2-5">
                            @Html.TextBoxFor(m => m.LastDeliveryDate, new { @class = "form-control input-sm", @readonly = true })
                        </div>
                    </div>
                </div>
                @*<div class="row">
                    <div class="stoke SignUp_space_bottom2 SignUp_space_top2"></div>
                </div>*@
                <div id="DivDeliveryOrderDetails" class="Head_h5">
                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                <label>Deposit No:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("DepositNo", "", new { @class = "form-control input-sm", @readonly = true })
                                @Html.ValidationMessage("DepositNo", "", new { @class = "Error_Msg" })
                            </div>
                            <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5 padding_rt">
                                <label>Deposit Date:</label>
                            </div>
                            <div class="col-md-2 col_cus_2_5 Date_Img">
                                @Html.TextBox("DepositDate", "", new { @class = "form-control input-sm", @readonly = true })
                                @Html.ValidationMessage("DepositDate")
                            </div>
                        </div>
                    </div>
                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2">
                                <label>WR No:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("WRNo", "", new { @class = "form-control input-sm", @readonly = true })
                            </div>
                            <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5">
                                <label>WR Date:</label>
                            </div>
                            <div class="col-md-2 col_cus_2_5 Date_Img">
                                @Html.TextBox("WRDate", "", new { @class = "form-control input-sm", @readonly = true })
                            </div>
                        </div>
                    </div>
                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2">
                                <label>Ex-BOE No:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("ExBoeNo", "", new { @class = "form-control input-sm", @readonly = true })
                            </div>
                            <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5">
                                <label>Ex-BOE Date:</label>
                            </div>
                            <div class="col-md-2 col_cus_2_5 Date_Img">
                                @Html.TextBox("ExBoeDate", "", new { @class = "form-control input-sm", @readonly = true })
                            </div>
                        </div>
                    </div>
                    <div style="margin-top:20px; margin-bottom:20px;">

                        <table class="table table-striped table-bordered dataTable slim_tble" id="TblGodownWiseEntryDet" style="width:100%;">
                            <thead>
                                <tr>
                                    <th width="2%" class="text-center">@Html.DisplayName("SL No")</th>
                                    <th rowspan="2" width="10%" class="text-center">@Html.DisplayName("Godown Name")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Units")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Closing Units")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Weight")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Closing Weight")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Area")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Closing Area")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Value")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Closing Value")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Duty")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Closing Duty")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Reserved Area")</th>
                                    <th rowspan="2" width="7%" class="text-center">@Html.DisplayName("Closing Reserved Area")</th>
                                </tr>
                            </thead>
                            <tbody align="center"></tbody>
                        </table>
                    </div>
                    <div class="row Form_Space_top" style="display:none">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2">
                                <label>Units:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("Units", "", new { @class = "form-control input-sm", @readonly = true, @onchange = "FillBalancedUnits()", @onkeypress = "return AllowOnlyInteger(event)" })
                                @Html.ValidationMessage("Units", "", new { @class = "Error_Msg" })
                            </div>
                            <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5">
                                <label>Closing Units:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("ClosingUnits", "", new { @class = "form-control input-sm", @readonly = true })
                            </div>
                        </div>
                    </div>
                    <div class="row Form_Space_top" style="display:none">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2">
                                <label>Area:</label>
                            </div>
                            <div class="col-md-2-5">
                                @*<span class="ReQSimbol">*</span>*@
                                @Html.TextBox("Areas", "", new { @class = "form-control input-sm", @readonly = true, @onchange = "FillBalancedAreas()", @onkeypress = "return AllowOnlyInteger(event)" })
                                @Html.ValidationMessage("Areas", "", new { @class = "Error_Msg" })
                            </div>
                            <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5">
                                <label>Closing Area:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("ClosingAreas", "", new { @class = "form-control input-sm", @readonly = true })
                            </div>
                        </div>
                    </div>
                    <div class="row Form_Space_top" style="display:none">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2">
                                <label>Weight:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("Weight", "", new { @class = "form-control input-sm", @readonly = true, @onchange = "FillBalancedWeights()", @onkeypress = "return AllowOnlyDecimal(event)", maxlength = "11" })
                                @Html.ValidationMessage("Weight", "", new { @class = "Error_Msg" })
                            </div>
                            <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5">
                                <label>Closing Weight:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("ClosingWeight", "", new { @class = "form-control input-sm", @readonly = true })
                            </div>
                        </div>
                    </div>
                    <div class="row Form_Space_top"  style="display:none">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                <label>Value:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("Value", "", new { @class = "form-control input-sm", maxlength = "11", @onkeypress = "return AllowOnlyDecimal(event)", @readonly = true })
                                @Html.ValidationMessage("Value", "", new { @class = "Error_Msg" })
                            </div>
                            <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5">
                                <label>Closing Value:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("ClosingValue", "", new { @class = "form-control input-sm", @readonly = true })
                            </div>
                        </div>
                    </div>
                    <div class="row Form_Space_top"  style="display:none">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                <label>Duty:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("Duty", "", new { @class = "form-control input-sm", @onkeypress = "return AllowOnlyDecimal(event)", maxlength = "11", @readonly = true })
                                @Html.ValidationMessage("Duty", "", new { @class = "Error_Msg" })
                            </div>
                            <div class="col-md-offset-4 col_cus_offset_3 col_cus_2 col-md-1-5">
                                <label>Closing Duty:</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("ClosingDuty", "", new { @class = "form-control input-sm", @readonly = true })
                            </div>
                        </div>
                    </div>
                    <div class="row Form_Space_top">
                        <div class="form-group Form_Input">
                            <div class="col-md-1-5 col_cus_2 padding_rt">
                                <label>Delivery Manual Weight(QTL) Handling :</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("DeliveryHandlingChrManual", "", new { @class = "form-control input-sm", @readonly = true })
                                @Html.ValidationMessage("DeliveryHandlingChrManual", "", new { @class = "Error_Msg" })
                            </div>
                            <div class="col-md-offset-3 col_cus_offset_2 col_cus_3 col-md-2">
                                <label>Delivery Mechanical Weight(QTL) Handling :</label>
                            </div>
                            <div class="col-md-2-5">
                                @Html.TextBox("DeliveryHandlingChrMechanical", "", new { @class = "form-control input-sm", @readonly = true })
                                @Html.ValidationMessage("DeliveryHandlingChrMechanical", "", new { @class = "Error_Msg" })
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="stoke SignUp_space_top SignUp_space_bottom"></div>
                    </div>
                    @*<div class="row">
                            <div class="col-md-offset-4 col-md-2">
                                <input type="button" id="BtnAddDeliveryOrder" class="btn log_Btn_sm" value="Add" onclick="SaveDeliveryOrderDtl()" disabled />
                            </div>
                            <div class="col-md-2">
                                <input type="button" class="btn log_Btn_sm" value="Reset" onclick="ResetDeliveryOrderDet()" />
                            </div>
                        </div>*@
                    <div id="DivDeliveryOrderTblErrMsg" class="logErrMsg Form_Space_top Form_Space_bottom" style="background-color:transparent"></div>
                    <table class="table table-striped table-bordered dataTable" id="TblDeliveryOrderDtl" style="width:100%;">
                        <thead>
                            <tr>
                                <th class="text-center">@Html.DisplayName("SL No")</th>
                                <th>@Html.DisplayName("Deposit No")</th>
                                <th>@Html.DisplayName("Deposit Date")</th>
                                <th class="text-center">@Html.DisplayName("View")</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="row">
                    <div class="stoke SignUp_space_bottom2 SignUp_space_top2"></div>
                </div>
                <div class="row SignUp_space_bottom2">
                    <div class="col-md-offset-5 col-md-2">
                        <input type="button" class="btn log_Btn_sm" value="Back" onclick="LoadDeliveryOrder()" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    var ArrayLst = [];
    var ArrayLst2 = [];
    $(function () {
        ArrayOfDeliveryOrder=@Html.Raw(Json.Encode(Model.LstDeliveryOrderhdb));
        GenerateDeliveryOrderTable();
        ArrayLst=@Html.Raw(Json.Encode(Model.lstGodownWiseDtl));
        $('#TblGodownWiseEntryDet').hide();
        $('#TblGodownWiseEntryDet>tbody').html('');
    });
    function GenerateDeliveryOrderTable() {
        $('#TblDeliveryOrderDtl').hide();
        var Html = '';
        if (ArrayOfDeliveryOrder.length != 0) {
            $.each(ArrayOfDeliveryOrder, function (i, item) {
                Html += '<tr><td class="text-center">' + (i + 1) + '</td><td>' + item.DepositNo + '</td><td>' + item.DepositDate + '</td><td class="text-center"><a href="#" onclick="ViewDeliveryOrderDtlf(' + i + ')"><i class="fa fa-search-plus" aria-hidden="true"></i></a></td></tr>';
            });
            $('#TblDeliveryOrderDtl>tbody').html(Html);
            $('#TblDeliveryOrderDtl').show();
        }
    }

    function ViewDeliveryOrderDtlf(Index) {
            $('#SearchDepositNo').css("display", "none");
            $('#DeliveryOrderDtlId').val(ArrayOfDeliveryOrder[Index].DeliveryOrderDtlId);
            $('#DepositNo').val(ArrayOfDeliveryOrder[Index].DepositNo);
            $('#DepositAppId').val(ArrayOfDeliveryOrder[Index].DepositAppId);
            $('#DepositDate').val(ArrayOfDeliveryOrder[Index].DepositDate);
            $('#WRNo').val(ArrayOfDeliveryOrder[Index].WRNo);
            $('#WRDate').val(ArrayOfDeliveryOrder[Index].WRDate);
            $('#Units').val(ArrayOfDeliveryOrder[Index].Units);
            $('#Areas').val(ArrayOfDeliveryOrder[Index].Areas);
            $('#ClosingUnits').val(ArrayOfDeliveryOrder[Index].ClosingUnits);
            $('#ClosingWeight').val(ArrayOfDeliveryOrder[Index].ClosingWeight);
            $('#ClosingAreas').val(ArrayOfDeliveryOrder[Index].ClosingAreas);
            $('#Weight').val(ArrayOfDeliveryOrder[Index].Weight);
            $('#Value').val(ArrayOfDeliveryOrder[Index].Value);
            $('#Duty').val(ArrayOfDeliveryOrder[Index].Duty);
            $('#ClosingValue').val(ArrayOfDeliveryOrder[Index].ClosingValue);
            $('#ClosingDuty').val(ArrayOfDeliveryOrder[Index].ClosingDuty);
            $('#GodownId').val(ArrayOfDeliveryOrder[Index].GodownId);
            $('#ExBoeNo').val(ArrayOfDeliveryOrder[Index].ExBoeNo);
            $('#DeliveryHandlingChrManual').val(ArrayOfDeliveryOrder[Index].DeliveryHandlingChrManual);
            $('#DeliveryHandlingChrMechanical').val(ArrayOfDeliveryOrder[Index].DeliveryHandlingChrMechanical);
            if (ArrayOfDeliveryOrder[Index].ExBoeDate != null && ArrayOfDeliveryOrder[Index].ExBoeDate != '' && ArrayOfDeliveryOrder[Index].ExBoeDate != '00/00/0000') {
                $('#ExBoeDate').val(ArrayOfDeliveryOrder[Index].ExBoeDate);
            }
            GenerateGodownWiseEntryTable();
            //if (ArrayLst.length != 0) {
            //    $.each(ArrayLst, function (i, item) {
            //        $('#Units_' + item.GodownId).val(item.Units);
            //        $('#Weights_' + item.GodownId).val(item.Weights);
            //        $('#Area_' + item.GodownId).val(item.Area);
            //        $('#hndClosingUnits_' + item.GodownId).val(item.HndClosingUnits);
            //        $('#ClosingUnits_' + item.GodownId).val(item.ClosingUnits);
            //        $('#hndClosingWeight_' + item.GodownId).val(item.HndClosingWeight);
            //        $('#ClosingWeight_' + item.GodownId).val(item.ClosingWeight);
            //        $('#ClosingArea_' + item.GodownId).val(item.ClosingArea);
            //        $('#hndClosingArea_' + item.GodownId).val(item.HndClosingArea);
            //    });
            //}
    }

    function LoadDeliveryOrder() {
        $('#DivBody').load('/Bond/DSRBond/CreateDeliveryOrder');
    }
    function GenerateGodownWiseEntryTable() {
        debugger;
        $('#TblGodownWiseEntryDet').hide();
        $('#TblGodownWiseEntryDet>tbody').html('');
        $("#SpaceReq").val('');
        $("#SpaceReqReserved").val('');
        var Html = '';
        if (ArrayLst.length != 0) {
            $.each(ArrayLst, function (i, item) {
                Html += '<tr>';
                Html += '<td width="2px" class="text-center">' + (i + 1) + '</td>';
                Html += '<td width="30px" class="txt_wrp">' + item.GodownName + '</td>';
                Html += '<td width="6%" class="txt_wrp">' + item.Units + '</td>';
                Html += '<td width="20%" class="txt_wrp">' + item.ClosingUnits + '</td>';
                Html += '<td width="6%" class="txt_wrp">' + item.Weights + '</td>';
                Html += '<td width="20%" class="txt_wrp">' + item.ClosingWeight + '</td>';
                Html += '<td width="6%" class="txt_wrp">' + item.Area + '</td>';
                Html += '<td width="20%" class="txt_wrp">' + item.ClosingArea + '</td>';
                
                Html += '<td width="6%" class="txt_wrp">' + item.Value + '</td>';
                Html += '<td width="20%" class="txt_wrp">' + item.ClosingValue + '</td>';
                Html += '<td width="6%" class="txt_wrp">' + item.Duty + '</td>';
                Html += '<td width="20%" class="txt_wrp">' + item.ClosingDuty + '</td>';
                Html += '<td width="6%" class="txt_wrp">' + item.ReservedArea + '</td>';
                Html += '<td width="20%" class="txt_wrp">' + item.ClosingReservedArea + '</td>';

                Html += '</tr>';
            });
            $('#TblGodownWiseEntryDet>tbody').html(Html);
            $('#TblGodownWiseEntryDet').show();

        }
    }
</script>